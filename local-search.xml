<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>凸优化</title>
    <link href="/2024/05/31/20240531_ConvexOptimization/"/>
    <url>/2024/05/31/20240531_ConvexOptimization/</url>
    
    <content type="html"><![CDATA[<h1 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h1>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>数学基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>算法</tag>
      
      <tag>SVM</tag>
      
      <tag>凸优化</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>支持向量机</title>
    <link href="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/"/>
    <url>/2024/05/21/20240521_MachineLearning_SupportVectorMachines/</url>
    
    <content type="html"><![CDATA[<h1 id="线性可分定义"><a href="#线性可分定义" class="headerlink" title="线性可分定义"></a>线性可分定义</h1><p>​    二维平面中，<strong>存在一条直线</strong>可以把圆圈和叉分开；三维平面中，<strong>存在一个面</strong>可以把圆圈和叉分开；四维及以上，<strong>超平面</strong>。</p><p><style>.fvscjordwsoo{zoom:67%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240521231920803.png" class="fvscjordwsoo" alt="image-20240521231920803"></p><h2 id="假设"><a href="#假设" class="headerlink" title="假设"></a>假设</h2><p>​    我们有N个训练样本和他们的标签${(X_1,y_1),(X_2,y_2),…,(X_N,y_N)}$，</p><p>​    其中$X_i = [x_{i1},x_{i2}]^T$，$y_i = {+1,-1}$，这样，$y_i = +1$时，$X_1$属于$C_1$</p><h2 id="数学定义"><a href="#数学定义" class="headerlink" title="数学定义"></a>数学定义</h2><p>线性可分的严格定义：一个训练样本集${(X_i,y_i),…,(X_N,y_N)}$，在i=1~N线性可分，是指存在$(w_1,w_2,b)$，使得对i = 1~N，有：</p><ul><li>若$y_i = +1$，则$\omega_1x_{i1}+\omega_2x_{i2}+b &gt; 0$</li><li>若$y_i = -1$，则$\omega_1x_{i1}+\omega_2x_{i2}+b &lt; 0$</li></ul><h2 id="向量形式定义"><a href="#向量形式定义" class="headerlink" title="向量形式定义"></a>向量形式定义</h2><p>假设：$X_i={\begin{bmatrix}X_{i1}\\X_{i2}\end{bmatrix}}^T  \omega={\begin{bmatrix}\omega_{1}\\\omega_{2}\end{bmatrix}}^T$</p><ul><li>若$y_i = +1$，则$\omega^TX_{i}+b &gt; 0$</li><li>若$y_i = -1$，则$\omega^TX_{i}+b &lt; 0$</li></ul><h2 id="最简化形式"><a href="#最简化形式" class="headerlink" title="最简化形式"></a>最简化形式</h2><p>如果    $y_i=+1$或-1</p><p>一个训练样本集${(X_i,y_i)}$，在i = 1~N线性可分，是指存在(\omega，b)，使得对i = 1~N，有：</p> $$y_i(\omega^TX_i+b)>0 $$<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><h3 id="解决线性可分问题"><a href="#解决线性可分问题" class="headerlink" title="解决线性可分问题"></a>解决线性可分问题</h3><ul><li><p>在无数多个分开各个类别的超平面中，到底哪一个最好？</p><p><style>.mtdqcbttlggh{zoom:50%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240522000808394.png" class="mtdqcbttlggh" alt="image-20240522000808394"></p><p>基于对训练样本先验分布有一定假设，如假设训练样本的位置在特征空间上有测量误差，图中二号线对训练样本误差的容忍程度是最高的，相比1号线和3号线更能抵御训练样本位置的误差</p></li><li><p>2号线是怎么画出来的？</p><p>基于最优化理论，间隔最大的是2号线，(确定唯一)取上下两个平行线中间</p><p><style>.xbtikilvxhgv{zoom:50%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240522001428124.png" class="xbtikilvxhgv" alt="image-20240522001428124"></p><ol><li>该直线分开了两类</li><li>该直线最大化间隔</li><li>该直线处于间隔的中间，到所有支持向量距离相等</li></ol></li></ul><h3 id="再将线性可分问题中获得的结论推广到线性不可分情况"><a href="#再将线性可分问题中获得的结论推广到线性不可分情况" class="headerlink" title="再将线性可分问题中获得的结论推广到线性不可分情况"></a>再将线性可分问题中获得的结论推广到线性不可分情况</h3><h1 id="优化问题"><a href="#优化问题" class="headerlink" title="优化问题"></a>优化问题</h1><p><strong>如何用严格的数学，寻找最有分类超平面的过程，写成一个最优化的问题</strong></p><p>假定训练样本集是线性可分的,支持向量机需要的是最大化间隔(MARGIN)的超平面(离两边所有支持向量的距离相等)</p><h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><p>已知：训练样本集{(x_i,y_i)},i=1到N；</p><p>待求：(w,b)</p><h2 id="最小化"><a href="#最小化" class="headerlink" title="最小化"></a>最小化</h2><p>${1/over 2}||\omega||^2$</p><p><style>.jcnxuzrdiryf{zoom:67%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240528121654953.png" class="jcnxuzrdiryf" alt="image-20240528121654953"></p><h2 id="限制条件"><a href="#限制条件" class="headerlink" title="限制条件"></a>限制条件</h2><p><strong>$y_i(w^Tx_i+b)&gt;=1,(i=1 ~ N)$</strong></p><p>在支持向量机（Support Vector Machine, SVM）中，约束条件$y_i (\omega^T x_i + b) \geq 1 ) （其中 (i = 1, 2, \ldots, N)$是用于确保数据点被正确分类并且在超平面边界以外有一定的间隔。具体解释如下：</p><ol><li><p><strong>定义符号</strong>：</p><ul><li>$\omega$是超平面的法向量。</li><li>$x_i$是第 $i$ 个样本点。</li><li>$b$是超平面的偏置项。</li><li>$y_i$ 是第$i$个样本点的类别标签，取值为$\pm1$。</li></ul></li><li><p><strong>支持向量机的目标</strong>：<br>SVM的目标是找到一个能够最大化分类间隔（Margin）的超平面。分类间隔定义为到最近数据点的距离。</p></li><li><p><strong>约束条件解释</strong>：<br>约束条件$y_i (\omega^T x_i + b) \geq 1$用于确保所有训练样本点被正确分类，并且离超平面至少有一个单位的距离。$y_i$协调超平面的左右。详细解释如下：</p><ul><li>当 $y_i = 1$ 时，约束条件为$\omega^T x_i + b \geq 1$。这意味着正类样本点$x_i $应该位于超平面的正侧并且到超平面的距离至少为 1。</li><li>当 $y_i = -1 $时，约束条件为$\omega^T x_i + b \leq -1$。这意味着负类样本点$x_i$应该位于超平面的负侧并且到超平面的距离至少为 1。</li></ul></li><li><p><strong>最大化间隔</strong>：<br>通过这些约束条件，我们确保了最小间隔为 1 的正确分类，同时目标是最大化此间隔。在优化过程中，我们会最小化 $\frac{1}{2} |\omega|^2$，等价于最大化间隔，因为间隔与$|\omega|$成反比。</p></li><li><p><strong>几何解释</strong>：<br>通过添加这个约束条件，我们可以确保找到的超平面不仅能正确分类所有样本点，还能最大化分类的鲁棒性，即使数据点在决策边界附近有少量扰动，也能保证分类的准确性。</p></li></ol><p>综上所述，约束条件$y_i (\omega^T x_i + b) \geq 1$是支持向量机的重要组成部分，它保证了正确分类并且尽可能地增大分类间隔，从而提高模型的泛化能力。</p><h2 id="事实"><a href="#事实" class="headerlink" title="事实"></a>事实</h2><h3 id="事实1"><a href="#事实1" class="headerlink" title="事实1"></a>事实1</h3><p>$\omega^Tx+b = b$与(a\omega^T)x+(ab)=0是同一个超平面。($a \neq 0$)</p><h3 id="事实2"><a href="#事实2" class="headerlink" title="事实2"></a>事实2</h3><p><strong>一个点$X_0$到超平面$\omega^Tx+b = 0$的距离$d = {|\omega^Tx_0+b| \over ||\omega||}$</strong></p><p><strong>一个点$(x_0,y_0)$到超平面$\omega_1x+\omega_2y+b = 0 $的距离$d = {|\omega_1x_0 + \omega_2y_0 + b| \over  \sqrt {\omega_1^2 + \omega_2^2}}$</strong></p><ol><li><p><strong>平面方程</strong>：给定平面$ \alpha $的方程为：<br>$Ax + By + Cz + D = 0 $</p></li><li><p><strong>点和法向量</strong>：点  $P_0(x_0, y_0, z_0) $是要计算到平面距离的点，平面的法向量为 $\vec{n} = (A, B, C) $。</p></li><li><p><strong>距离公式的推导</strong>：</p><ol><li>选择平面上的一点 $P_1(x_1, y_1, z_1)$  作为参考点。</li><li>向量 $\vec{P_1P_0} $表示从点 $ P_1 $ 到点 $ P_0 $的向量，其表示为：<br>$\vec{P_1P_0} = (x_0 - x_1, y_0 - y_1, z_0 - z_1) $</li><li>点 $P_0 $到平面的距离 $d$等于向量$\vec{P_1P_0}$ 在法向量 $\vec{n} $上的投影的绝对值，公式为：<br>$d = \frac{|\vec{P_1P_0} \cdot \vec{n}|}{|\vec{n}|}$</li><li>计算向量点积$\vec{P_1P_0} \cdot \vec{n}$：<br>$ \vec{P_1P_0} \cdot \vec{n} = A(x_0 - x_1) + B(y_0 - y_1) + C(z_0 - z_1)$</li><li>计算法向量$\vec{n}$的模长：<br>$ |\vec{n}| = \sqrt{A^2 + B^2 + C^2}$</li></ol></li><li><p><strong>化简距离公式</strong>：</p><ol><li>由于点$P_1$在平面上，所以 $Ax_1 + By_1 + Cz_1 + D = 0$，因此$D = -(Ax_1 + By_1 + Cz_1)$。</li><li>将上面的结果代入到公式中，得到：<br>$d = \frac{|A(x_0 - x_1) + B(y_0 - y_1) + C(z_0 - z_1)|}{\sqrt{A^2 + B^2 + C^2}}$</li><li>将 ( P_1(x_1, y_1, z_1) ) 替换成点 ( P_0(x_0, y_0, z_0) ) 的坐标，公式变为：<br>$d = \frac{|Ax_0 + By_0 + Cz_0 + D|}{\sqrt{A^2 + B^2 + C^2}}$</li></ol></li></ol><p>因此，点 $P_0(x_0, y_0, z_0)$到平面$Ax + By + Cz + D = 0$的距离公式为：</p><p>$d = \frac{|Ax_0 + By_0 + Cz_0 + D|}{\sqrt{A^2 + B^2 + C^2}}$</p><h2 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h2><ul><li>用a去缩放$/omega b$</li><li>$(/omega , b)-&gt;(a/omega , ab)$</li><li>最终使在支持向量x_0上有$|/omega^Tx_0 + b| = 1$，而在非支持向量上$ |/omega^Tx_0 + b| &gt; 1$</li><li>根据事实2，支持向量机x_0到超平面距离将会变为：$d = \frac{|\omega^T x_0 + b|}{|\omega|} = \frac{1}{|\omega|}$</li><li>最大化支持向量到超平面的距离等价于最小化||/omega||</li></ul><h2 id="二次规划"><a href="#二次规划" class="headerlink" title="二次规划"></a>二次规划</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul><li><p>目标函数是二次项</p><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240528171356369.png" class="" title="image-20240528171356369"></li><li><p>限制条件是一次项</p><p><style>.yohpcysisyri{zoom: 50%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240528171415612.png" class="yohpcysisyri" alt="image-20240528171415612"></p></li><li><p>这种凸优化问题要么无解，要么只有唯一的最小值解，可以应用梯度算法来解</p></li></ul><h1 id="线性不可分情况"><a href="#线性不可分情况" class="headerlink" title="线性不可分情况"></a>线性不可分情况</h1><ul><li><p>不存在$/omega$和$b$满足上面所有N个限制条件</p></li><li><p>需要放松限制条件(基本思路)</p><ul><li>对每个训练样本及标签$(X_i,Y_i)$</li><li>松弛变量$\delta_i$</li><li>限制条件改写：$y_i(\omega^TX_i + b) \ge 1 - \delta_i (i = 1\sim N)$</li></ul></li><li><p>改造后的支持向量机优化版本</p><p><style>.lvgehmwpeobn{zoom: 33%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531112604943.png" class="lvgehmwpeobn" alt="image-20240531112604943"></p></li><li><p>人为实现设定的参数叫做算法的超参数，不断变化C的值，同时测试算法的识别率，选取超参数C</p></li><li><p>支持向量机是超参数很少的算法模型</p></li></ul><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p><style>.skjtqtdgsjiw{zoom:33%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531113517531.png" class="skjtqtdgsjiw" alt="image-20240531113517531"></p><p><strong>C很大</strong>，会迫使所有的$\delta_i$趋于0，<strong>超平面和线性可分情况保持基本一致</strong></p><p><style>.lsyckspqvolr{zoom:50%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531113702251.png" class="lsyckspqvolr" alt="image-20240531113702251"></p><p>未达到求解目的(类型:所有的圆圈被所有的叉包围了)，这个解远远不能让人满意，分错了一半训练样本</p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>我们是假设分开两类的函数是线性的，线性模型的表现力是不够的，无论我们如何取直线，都是不好的，应该扩大可选函数范围，使得其超越线性</p><h2 id="课后思考"><a href="#课后思考" class="headerlink" title="课后思考"></a>课后思考</h2><p>请问：在这个例子中，你能否设计出一个这样的非线性变换，将这个分类问题转化为线性可分？</p><p>要将这个非线性可分的分类问题转化为线性可分，可以考虑使用核函数或特征变换。一个常见的非线性变换方法是将输入空间映射到一个更高维的特征空间</p><p>对于这个例子，可以使用径向基函数(BRF)核函数或多项式核函数来进行非线性变换</p><h3 id="特征变换的示例"><a href="#特征变换的示例" class="headerlink" title="特征变换的示例"></a>特征变换的示例</h3><p>假设我们有两个特征$x_1$和$x_2$，可以将其转换为新的特征z，例如：</p><p>$ z_1 = x_1^2$</p><p>$ z_2 = x_2^2$</p><p>$ z_3 = x_1 \cdot x_2$</p><p>这种变换可以将原始的二维非线性可分数据映射到三维空间，使得在这个新空间中变得线性可分</p><h3 id="核方法"><a href="#核方法" class="headerlink" title="核方法"></a>核方法</h3><p>另一种方法是使用核函数，例如径向基函数核(RBF核)：</p><p>$K(x_i,x_j) = exp(\gamma||x_i - x_j||^2)$</p><p>通过这种方法，可以隐式地将数据映射到一个高维空间，而无需显示地计算特征变换</p><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-comment"># 导入Numpy库，用于数值计算</span><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<span class="hljs-comment"># 导入Matplotlib库，用于绘图</span><br><span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVC<span class="hljs-comment"># 从Scikit-learn库中导入支持向量分类器</span><br><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> make_circles<span class="hljs-comment"># 从Scikit-learn库中导入make_circles函数，用于生成示例数据集</span><br><span class="hljs-keyword">from</span> mpl_toolkits.mplot3d <span class="hljs-keyword">import</span> Axes3D<span class="hljs-comment"># 从Matplotlib库中导入3D绘图工具</span><br><br><span class="hljs-comment"># 生成非线性可分的数据</span><br>X, y = make_circles(n_samples=<span class="hljs-number">100</span>, factor=<span class="hljs-number">.3</span>, noise=<span class="hljs-number">.05</span>)<br><span class="hljs-comment"># factor的值是介于0和1之间的小数，表示内圈半径与外圈半径的比例。这里表示内圈是外圈的30%</span><br><span class="hljs-comment"># noise参数控制数据点的随机扰动或噪声的量。表示生成数据点加入的高斯噪声的标准差。这里noise=.05表示数据点会有一定程度的随机偏移，以增加数据的真实感和复杂性</span><br><span class="hljs-comment"># x：形状为(n_samples,2)的Numpy数组，其中每一行表示二维数据点。具体来说，x的每一行包含一个数据点的两个特征</span><br><span class="hljs-comment"># y：形状为(n_samples,)的Numpy数组，包含每一个数据点的类别标签。类别标签为二进制的（0或1），表示数据点的外圈和内圈</span><br><br><span class="hljs-comment"># 绘制原始数据</span><br>plt.scatter(X[:, <span class="hljs-number">0</span>], X[:, <span class="hljs-number">1</span>], c=y, cmap=plt.cm.Paired)<br>plt.title(<span class="hljs-string">&quot;Original Data&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;$x_1$&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;$x_2$&#x27;</span>)<br>plt.show()<br><br><span class="hljs-comment"># 特征变换，变换后新特征矩阵Z具有三个特征列</span><br>Z = np.array([X[:, <span class="hljs-number">0</span>]**<span class="hljs-number">2</span>, <br>              X[:, <span class="hljs-number">1</span>]**<span class="hljs-number">2</span>, <br>              X[:, <span class="hljs-number">0</span>] * X[:, <span class="hljs-number">1</span>]]).T<br><br><br><span class="hljs-comment"># 绘制变换后的数据</span><br>fig = plt.figure()<br>ax = fig.add_subplot(<span class="hljs-number">111</span>, projection=<span class="hljs-string">&#x27;3d&#x27;</span>)<br>ax.scatter(Z[:, <span class="hljs-number">0</span>], Z[:, <span class="hljs-number">1</span>], Z[:, <span class="hljs-number">2</span>], c=y, cmap=plt.cm.Paired)<br>plt.title(<span class="hljs-string">&quot;Transformed Data&quot;</span>)<br>ax.set_xlabel(<span class="hljs-string">&#x27;$z_1$&#x27;</span>)<br>ax.set_ylabel(<span class="hljs-string">&#x27;$z_2$&#x27;</span>)<br>ax.set_zlabel(<span class="hljs-string">&#x27;$z_3$&#x27;</span>)<br>plt.show()<br><br><span class="hljs-comment"># 使用RBF核进行SVM分类</span><br>clf = SVC(kernel=<span class="hljs-string">&#x27;rbf&#x27;</span>)<br>clf.fit(X, y)<br><br><span class="hljs-comment"># 绘制决策边界</span><br>xx, yy = np.meshgrid(np.linspace(-<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">500</span>), np.linspace(-<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">500</span>))<br>Z = clf.decision_function(np.c_[xx.ravel(), yy.ravel()])<br>Z = Z.reshape(xx.shape)<br><br>plt.scatter(X[:, <span class="hljs-number">0</span>], X[:, <span class="hljs-number">1</span>], c=y, cmap=plt.cm.Paired)<br>plt.contour(xx, yy, Z, levels=[<span class="hljs-number">0</span>], linewidths=<span class="hljs-number">2</span>, colors=<span class="hljs-string">&#x27;black&#x27;</span>)<br>plt.title(<span class="hljs-string">&quot;Decision Boundary with RBF Kernel&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;$x_1$&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;$x_2$&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><h3 id="思维方式"><a href="#思维方式" class="headerlink" title="思维方式"></a>思维方式</h3><ol><li><p>观察数据分布</p><p>首先，我们需要仔细观察数据的分布。通过可视化数据（如散点图），我们可以识别出数据的结构和模式。在你的例子中，数据呈现出同心圆的分布，明显不是线性可分的。</p></li><li><p>找到适合的特征变换</p><p>为了使数据变得线性可分，我们需要找到一种变换方式，使得数据在新的特征空间中分布更适合线性分类。常见的思路包括：</p><ul><li><strong>多项式变换</strong>：对于同心圆分布的数据，平方或交叉项（如$x_1^2 、x_2^2 和x_1 \cdot x_2$）可能会有帮助，因为这些变换可以捕捉到数据的非线性关系。</li><li><strong>非线性变换</strong>：使用核方法（如RBF核）来隐式地将数据映射到高维空间，其中数据可能会变得线性可分。</li></ul></li><li><p>数学和几何直觉</p><p>通过数学和几何直觉，我们可以推断出一些变换可能会使数据线性可分。例如，考虑二次多项式变换。对于同心圆数据，使用平方项可以将圆形分布的数据转换为线性可分的数据。这是因为平方变换会放大远离原点的数据点的特征，使得数据点在新的空间中分布得更加分散。</p></li><li><p>实验和验证</p><p>即使有数学和几何直觉的支持，我们仍然需要通过实验和验证来确认选择的特征变换是否有效。这可以通过以下步骤实现：</p><ul><li><strong>选择变换</strong>：选定一种或几种可能的特征变换。</li><li><strong>应用变换</strong>：将原始数据应用选定的变换。</li><li><strong>训练模型</strong>：在变换后的特征空间中训练线性分类模型。</li><li><strong>验证结果</strong>：评估模型的表现，查看其是否能够有效分类数据。</li></ul></li></ol><h1 id="低维到高维的映射"><a href="#低维到高维的映射" class="headerlink" title="低维到高维的映射"></a>低维到高维的映射</h1><ul><li><p>在扩大可选函数范围方面独树一帜</p></li><li><p>特征空间由低维映射到高维，用线性超平面对数据进行分类</p></li><li><p><style>.rkuhwlxbomkd{zoom: 33%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531150013897.png" class="rkuhwlxbomkd" alt="image-20240531150013897"></p></li><li><p>构造一个二维到五维的映射$\varphi(x)$</p><ul><li><style>.jpzhsplxjhpj{zoom: 33%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531150401228.png" class="jpzhsplxjhpj" alt="image-20240531150401228"></li><li><style>.xluxgwhtlafh{zoom:33%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531150540767.png" class="xluxgwhtlafh" alt="image-20240531150540767"></li><li>此时线性可分</li><li><style>.bzgppfopndrn{zoom:33%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531150706444.png" class="bzgppfopndrn" alt="image-20240531150706444"></li></ul></li><li><p>假设：</p><p>在一个<strong>M维空间</strong>上随机取N个训练样本</p><p>随机的对每个训练样本赋予标签<strong>+1或-1</strong></p><p><strong>假设</strong>：</p><p>这些训练样本线性可分的概率为<strong>P(M)</strong></p><p><strong>当M趋于无穷大时    P(M)=1</strong></p></li></ul><h2 id="优化问题-1"><a href="#优化问题-1" class="headerlink" title="优化问题"></a>优化问题</h2><p>前$\omega维度与X_i$维度相同    $\omega$维度与$\varphi(x_i)$相同</p><p>高维情况下优化问题的解法和低维情况下是完全类似的</p><p><style>.cktlrkacxbde{zoom:67%;}</style><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531151519887.png" class="cktlrkacxbde" alt="image-20240531151519887"></p><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531151548140.png" class="" title="image-20240531151548140"><h2 id="优化问题的凸性"><a href="#优化问题的凸性" class="headerlink" title="优化问题的凸性"></a>优化问题的凸性</h2><h3 id="凸优化问题的定义"><a href="#凸优化问题的定义" class="headerlink" title="凸优化问题的定义"></a>凸优化问题的定义</h3><ul><li>一个优化问题是凸的，如果其目标函数是凸函数，并且约束条件也定义了一个凸集</li><li>凸函数的一个重要性质是其任意局部最优解也是全局最优解，这使得优化问题易于求解</li></ul><h3 id="SVM优化目标"><a href="#SVM优化目标" class="headerlink" title="SVM优化目标"></a>SVM优化目标</h3><ul><li><p>支持向量机的目标是找到一个分离超平面，使得两个类别的间隔最大化。对于线性 SVM，其优化问题可以表示为： </p><p>$\min_{w,b}{1\over2}||w||^2 $</p><p>其中 <strong>w</strong> 是权重向量，b* 是偏置。这个目标函数是凸的。</p></li></ul><h1 id="核函数的定义"><a href="#核函数的定义" class="headerlink" title="核函数的定义"></a>核函数的定义</h1><p>$K(X_1,X_2) = \varphi(X_1)^T\varphi(X_2)$完成对测试样本类别的预测</p><h2 id="核方法和核矩阵"><a href="#核方法和核矩阵" class="headerlink" title="核方法和核矩阵"></a>核方法和核矩阵</h2><h3 id="核函数的引入"><a href="#核函数的引入" class="headerlink" title="核函数的引入"></a>核函数的引入</h3><ul><li>在处理非线性可分问题时，SVM使用核函数$K(X_i,X_j)$将数据映射到高维特征空间，以实现线性可分</li><li>核函数K计算两个输入数据点$X_i和X_j$在高维空间中的内积，而不需要显示地进行高维映射</li></ul><h3 id="核矩阵"><a href="#核矩阵" class="headerlink" title="核矩阵"></a>核矩阵</h3><ul><li>$K_{ij} = K(X_i,X_j)$</li><li>核矩阵K是一个对称矩阵，其元素是核函数在数据点间计算的值</li></ul><h2 id="半正定性的重要性"><a href="#半正定性的重要性" class="headerlink" title="半正定性的重要性"></a>半正定性的重要性</h2><h3 id="半正定性定义"><a href="#半正定性定义" class="headerlink" title="半正定性定义"></a>半正定性定义</h3><ul><li>一个对称矩阵K是半正定的，如果对于任何向量z，都有$z^TKz \ge 0$</li></ul><h3 id="核矩阵的半正定性与凸性"><a href="#核矩阵的半正定性与凸性" class="headerlink" title="核矩阵的半正定性与凸性"></a>核矩阵的半正定性与凸性</h3><ul><li>对于SVM的优化问题，目标函数包含核矩阵K。如果K是半正定的，那么相应的二次规划问题也是凸的</li><li>半正定性保证了目标函数在所有方向上的二次型都是非负的，即目标函数是凸函数</li></ul><h3 id="唯一解的存在性"><a href="#唯一解的存在性" class="headerlink" title="唯一解的存在性"></a>唯一解的存在性</h3><ul><li>在凸优化问题中，目标函数的任何局部最优解也是全局最优解。因此，确保核矩阵是半正定的，能保证SVM优化问题有唯一解。</li></ul><h2 id="核函数与-varphi-x-的关系"><a href="#核函数与-varphi-x-的关系" class="headerlink" title="核函数与$\varphi(x)$的关系"></a>核函数与$\varphi(x)$的关系</h2><p>核函数K和映射$\varphi$是一一对应的，核函数的形式不能随意取，需满足为一定条件才能分解为两个$\varphi$内积的形式</p><h3 id="Mercer’s-Theorem定理"><a href="#Mercer’s-Theorem定理" class="headerlink" title="Mercer’s Theorem定理"></a>Mercer’s Theorem定理</h3><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531154748128.png" class="" title="image-20240531154748128"><h3 id="已知-varphi-求K"><a href="#已知-varphi-求K" class="headerlink" title="已知$\varphi$求K"></a>已知$\varphi$求K</h3><p>假设：$\varphi(x)$是一个将二维向量映射为三维向量的映射</p><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531153113219.png" class="" title="image-20240531153113219"><p>假设有两个二维向量</p><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531153414510.png" class="" title="image-20240531153414510"><h3 id="已知K求-varphi"><a href="#已知K求-varphi" class="headerlink" title="已知K求$\varphi()$"></a>已知K求$\varphi()$</h3><p>假设：</p><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531153902859.png" class="" title="image-20240531153902859"><p>假设：</p><p>$X = [x_1,x_2]^T$</p><img src="/2024/05/21/20240521_MachineLearning_SupportVectorMachines/image-20240531154142917.png" class="" title="image-20240531154142917"><p><strong>$K(X_1,X_2)$就是前面那个形式</strong></p><h1 id="原问题和对偶问题"><a href="#原问题和对偶问题" class="headerlink" title="原问题和对偶问题"></a>原问题和对偶问题</h1><h2 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h2><ol><li><p>原问题</p><ul><li>最小化：$f(\omega)$</li><li>限制条件<ul><li>$g_i(\omega) \le 0    i = 1 \sim K$</li><li>$h_i(\omega) = 0     i = 1 \sim m$</li></ul></li></ul></li><li><p>对偶问题</p><ul><li><p>$ L(\omega, \alpha, \beta) = f(\omega) + \sum_{i=1}^{K} \alpha_i g_i(\omega) + \sum_{i=1}^{K} \beta_i h_i(\omega) $</p><p> $ = f(\omega) + \alpha^T g(\omega) + \beta^T h(\omega) $</p></li><li><p>其中</p><p>$ \alpha = \begin{bmatrix} \alpha_1, \alpha_2, \ldots, \alpha_K \end{bmatrix}^T $</p><p>$ \beta = \begin{bmatrix} \beta_1, \beta_2, \ldots, \beta_M \end{bmatrix}^T $</p><p>$ g(\omega) = \begin{bmatrix} g_1(\omega), g_2(\omega), \ldots, g_k(\omega) \end{bmatrix}^T $</p><p>$ h(\omega) = \begin{bmatrix} h_1(\omega), h_2(\omega), \ldots, h_m(\omega) \end{bmatrix}^T $</p></li><li><p>最大化：$\theta(\alpha,\beta) = inf   L(\omega,\alpha,\beta)$，所有定义域内的\omega , 使得L最小</p></li><li><p>限制条件：$\alpha_i \ge 0, i =  1 \sim K$</p></li></ul></li><li><p>定理一</p><p>如果$\omega$是原问题的解，$(\alpha^\ast,\beta^\ast)$是对偶问题的解则有：</p><p><strong>$f(\omega^\ast) \ge \theta(\alpha^\ast,\beta^\ast)$</strong></p><p>证明：$\theta(\alpha^\ast, \beta^\ast) = \inf L(\omega, \alpha^\ast, \beta^\ast)$</p><p>​           $\leq L(\omega^\ast, \alpha^\ast, \beta^\ast)$</p><p>​           $= f(\omega^\ast) + \alpha^{\astT} g(\omega^\ast) + \beta^{\astT} h(\omega^\ast)$</p><p>​           $\leq f(\omega^\ast)$</p><ul><li><p>原问题的解总是大于对偶问题的解</p></li><li><p>对偶差距：$\textcolor{yellow}{\bm{f}(\omega^<em>) - \theta(\alpha^</em>, \beta^*)}$</p><p>对偶差距为大于等于零的函数</p></li></ul></li><li><p>强对偶定理</p><p>如果$g(\omega)=A\omega+b,h(\omega)=C\omega+d$,f(\omega)为凸函数，则有$f(\omega^\ast) = \theta(\alpha^\ast,\beta^\ast)$,</p><p>则对偶差距为0。</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>机器学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>机器学习</tag>
      
      <tag>AI</tag>
      
      <tag>算法</tag>
      
      <tag>SVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>机器学习引言</title>
    <link href="/2024/05/19/20240519_MachineLearning_Introduction/"/>
    <url>/2024/05/19/20240519_MachineLearning_Introduction/</url>
    
    <content type="html"><![CDATA[<h1 id="机器学习观点"><a href="#机器学习观点" class="headerlink" title="机器学习观点"></a>机器学习观点</h1><ul><li><p>拿到数据之后，<strong>构建机器学习算法第一步</strong>：观察数据，总结规律</p><ul><li><p><strong>不正确观点</strong>：收集足够多数据，从网上随便下载一个开源算法模型，直接将数据扔进模型中训练，就可能获得很好的结果（大多数不正确）</p></li><li><p>对数据有足够的感性认识，才能设计出好的算法以及认识算法的性能极限</p></li></ul></li><li><strong>设计算法</strong>：思考一个任务的经验E和性能指标P是什么</li><li>一个解决分类的问题稍微加以改造就可以解决回归问题，反之亦然，因为连续与离散是可以转换的</li><li>机器学习的重点不是提取特征，而是假设在<strong>已经提取好特征</strong>的前提下，如何构造算法获得更好的性能</li><li>提取特征很重要，不同媒质不同任务，提取特征的方式千变万化</li><li>维度与标准决定了我们要用机器学习，维度：人对超过二维的数据难以想象，标准：对某些区域的划分是不一样的</li><li>机器学习是典型的最优化问题，数学在现代化机器学习中占有重要的作用</li></ul><h1 id="机器学习定义"><a href="#机器学习定义" class="headerlink" title="机器学习定义"></a>机器学习定义</h1><h2 id="ARCHUR-SAMUEL"><a href="#ARCHUR-SAMUEL" class="headerlink" title="ARCHUR SAMUEL"></a>ARCHUR SAMUEL</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">ARCHUR SAMUEL：<br>​Machine Learning <span class="hljs-keyword">is</span> Fields <span class="hljs-keyword">of</span> study <span class="hljs-keyword">that</span> gives computers <span class="hljs-keyword">the</span> ability <span class="hljs-keyword">to</span> learn <span class="hljs-keyword">without</span> being explicitly programmed.<br>​机器学习是这样的领域，它土语计算机学习的能力，（这种学习能力）不是通过显著式编程获得的。<br></code></pre></td></tr></table></figure><h3 id="显著式编程"><a href="#显著式编程" class="headerlink" title="显著式编程"></a>显著式编程</h3><ul><li>通过人为预先定义出规律，告诉计算机实现一一对照区别。</li><li>劣势：<strong>人为</strong>帮计算机<strong>规划</strong>所处的环境，将环境、规律调查得一清二楚</li></ul><h3 id="非显著式编程"><a href="#非显著式编程" class="headerlink" title="非显著式编程"></a>非显著式编程</h3><ul><li>事先并不约束计算机总结出什么规律，只给大量数据，编写程序让计算机自己挑出能分辨事物的规律，总结不同事物的区别</li><li>规定在特定环境下，做一些行为带来的收益，将收益称为<strong>收益函数</strong></li><li>规定了收益函数后，让计算机去自己<strong>找最大化收益函数</strong>的行为</li><li>优势：<strong>通过数据、经验自动学习</strong></li></ul><h2 id="TOM-MITSHELL"><a href="#TOM-MITSHELL" class="headerlink" title="TOM MITSHELL"></a>TOM MITSHELL</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">TOM MITSHELL:<br>​A computer program <span class="hljs-keyword">is</span> said <span class="hljs-keyword">to</span> learn <span class="hljs-keyword">from</span> experience E <span class="hljs-keyword">with</span> respect <span class="hljs-keyword">to</span> <span class="hljs-keyword">some</span> task T <span class="hljs-keyword">and</span> <span class="hljs-keyword">some</span> performance measure P, <span class="hljs-keyword">if</span> <span class="hljs-keyword">its</span> performance <span class="hljs-keyword">on</span> T, <span class="hljs-keyword">as</span> measured <span class="hljs-keyword">by</span> P, improves <span class="hljs-keyword">with</span> experience E.<br>​一个计算机程序被称为可以学习，是指它能够针对某个任务T和某个性能指标P，从经验E中学习。这种学习的特点是，它在T上的被P所衡量的性能，会随着经验E的增加而提高。<br>​任务 T：编写计算机程序识别菊花和玫瑰<br>经验 E：一大堆菊花和玫瑰的图片<br>性能指标 P：不同的机器学习算法会有不同，如把识别的正确率简称为识别率，将其作为性能指标<br></code></pre></td></tr></table></figure><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>Experience越来越多，Performance Measure也会越来越高</li><li>更数学化，典型的最优化问题</li></ul><h3 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h3><ul><li>数学在现代化机器学习中占有重要的作用</li></ul><h1 id="机器学习分类"><a href="#机器学习分类" class="headerlink" title="机器学习分类"></a>机器学习分类</h1><p>现在的强化学习利用到了监督学习，如ALPHAGO，先通过监督学习获得初试围棋程序，再将初试围棋程序进行强化学习</p><h2 id="监督学习"><a href="#监督学习" class="headerlink" title="监督学习"></a>监督学习</h2><ul><li>经验E是完全由人搜集起来输入进计算机</li><li>为训练数据打标签，此时经验E为：<strong>训练样本</strong>和<strong>标签</strong>的集合<ul><li>垃圾邮件识别，教计算机自动识别某个邮件识别是垃圾邮件</li><li>人脸识别，教计算机通过人脸的图像识别这个人是谁</li></ul></li></ul><h3 id="传统监督学习"><a href="#传统监督学习" class="headerlink" title="传统监督学习"></a>传统监督学习</h3><p>每一个训练数据都有对应的标签</p><ul><li>支持向量机</li><li>人工神经网络</li><li>深度神经网络</li></ul><h3 id="非监督学习"><a href="#非监督学习" class="headerlink" title="非监督学习"></a>非监督学习</h3><p>所有训练数据都没有对应的标签</p><ul><li>聚类</li><li>EM算法</li><li>主成分分析</li></ul><h3 id="半监督学习"><a href="#半监督学习" class="headerlink" title="半监督学习"></a>半监督学习</h3><p>训练数据中一部分有标签，一部分没有标签（如何用少量标注数据与大量未标注数据，获得更好的机器学习算法）</p><h2 id="强化学习"><a href="#强化学习" class="headerlink" title="强化学习"></a>强化学习</h2><ul><li>经验E是由计算机与环境互动获得的</li><li>产生<strong>行为</strong>，定义这些行为的收益函数(Reward function)，改变自己行为模式去<strong>最大化收益函数</strong></li><li>计算机通过与环境的互动，逐渐强化自己的行为模式<ul><li>教计算机下棋</li><li>无人驾驶，教计算机自动驾驶汽车，从一个指定地点到另一个指定地点</li></ul></li></ul><h1 id="机器学习算法过程"><a href="#机器学习算法过程" class="headerlink" title="机器学习算法过程"></a>机器学习算法过程</h1><p>识别尿沉中的红白细胞</p><p><style>.ofmwqvwgfrju{zoom:50%;}</style><img src="/2024/05/19/20240519_MachineLearning_Introduction/image-20240520000512315.png" class="ofmwqvwgfrju" alt="image-20240520000512315"></p><p>可能被观察到的区别</p><ul><li>平均来说，白细胞面积比红细胞大</li><li>白细胞没有红细胞圆</li><li>白细胞内部纹理比红细胞粗糙</li></ul><h2 id="第一步：提取特征"><a href="#第一步：提取特征" class="headerlink" title="第一步：提取特征"></a>第一步：提取特征</h2><p>通过训练样本获得的，对机器学习任务有帮助的多维度的特征数据</p><p>很重要，提取了好的特征，（即使算法不是很好）也能获得不错的性能</p><p>提取了差的特征，不可能获得好的性能</p><p><strong>细胞的面积</strong>    <strong>圆形度</strong>    <strong>表面粗糙程度</strong></p><h3 id="提取面积特征方法"><a href="#提取面积特征方法" class="headerlink" title="提取面积特征方法"></a>提取面积特征方法</h3><p><style>.jrwrpdvwctcr{zoom:50%;}</style><img src="/2024/05/19/20240519_MachineLearning_Introduction/image-20240520001815389.png" class="jrwrpdvwctcr" alt="image-20240520001815389"></p><h2 id="第二步：特征选择"><a href="#第二步：特征选择" class="headerlink" title="第二步：特征选择"></a>第二步：特征选择</h2><p>只选择面积与周长作为区分，来构建机器学习系统，后面归一化一下</p><p><style>.decjofhwpncj{zoom:50%;}</style><img src="/2024/05/19/20240519_MachineLearning_Introduction/image-20240520002610676.png" class="decjofhwpncj" alt="image-20240520002610676"></p><p><style>.nlnggiqlvmjz{zoom: 50%;}</style><img src="/2024/05/19/20240519_MachineLearning_Introduction/image-20240520002746171.png" class="nlnggiqlvmjz" alt="image-20240520002746171"></p><h2 id="第三步：设计算法"><a href="#第三步：设计算法" class="headerlink" title="第三步：设计算法"></a>第三步：设计算法</h2><h3 id="支持向量机"><a href="#支持向量机" class="headerlink" title="支持向量机"></a>支持向量机</h3><ul><li>线性内核</li><li>多项式内核</li><li>高斯径向基函数核</li></ul><p><style>.eqqvaglphims{zoom: 50%;}</style><img src="/2024/05/19/20240519_MachineLearning_Introduction/image-20240520003916270.png" class="eqqvaglphims" alt="image-20240520003916270"></p><h2 id="第四步：训练结果"><a href="#第四步：训练结果" class="headerlink" title="第四步：训练结果"></a>第四步：训练结果</h2><p>获得训练库准确率</p><p><style>.kysriyqhydqg{zoom:67%;}</style><img src="/2024/05/19/20240519_MachineLearning_Introduction/image-20240520003934456.png" class="kysriyqhydqg" alt="image-20240520003934456"></p><h1 id="机器学习算法比较"><a href="#机器学习算法比较" class="headerlink" title="机器学习算法比较"></a>机器学习算法比较</h1><h2 id="没有免费午餐定理"><a href="#没有免费午餐定理" class="headerlink" title="没有免费午餐定理"></a>没有免费午餐定理</h2><p>​    任何一个预测函数，如果在一些训练样本上表现好，那么必然在另一些训练样本上表现不好，如果不对数据在特征空间的先验分布有一定假设，那么表现好于表现不好的情况一样多。</p><p>​    在设计机器学习算法的时候有一个假设：在特征空间上距离接近的样本，他们属于同一个类别的概率会更高。</p><p>​    道理是从以前的事实中来的。通过类比推广到对未来的预测。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>​    不对特征空间的先验分布有假设，所有算法的表现都一样。</p><p>​    机器学习的本质：从有限的已知数据，在复杂的高维特征空间中预测未知样本的属性和类别。<strong>然而</strong>，我们不知道未知样本在哪里、性质如何，因此，再好的算法也存在犯错误的风险。</p><h1 id="机器学习作业"><a href="#机器学习作业" class="headerlink" title="机器学习作业"></a>机器学习作业</h1><p>编程大作业</p><ul><li>人脸识别</li></ul><ul><li>人脸性别年龄估计</li></ul><ul><li>五子棋对战程序</li></ul><ul><li>水果识别</li></ul><ul><li>人脸特征点检测</li></ul><ul><li>语种识别</li></ul><ul><li>视频行为识别</li></ul>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>机器学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>机器学习</tag>
      
      <tag>AI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pandas库入门</title>
    <link href="/2024/05/17/20240517_Pandas/"/>
    <url>/2024/05/17/20240517_Pandas/</url>
    
    <content type="html"><![CDATA[<h1 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h1><p>提供高性能易用数据类型和分析工具</p><p><a href="http://pandas.pydata.org">http://pandas.pydata.org</a></p><p>Pandas基于NumPy实现，常与NumPy和Matplotlib一同使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>    d = pd.Serier(<span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>))<br>    d<br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">1</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span><span class="hljs-number">2</span><br><span class="hljs-number">3</span><span class="hljs-number">3</span><br><span class="hljs-number">4</span><span class="hljs-number">4</span><br>...<br><span class="hljs-number">19</span><span class="hljs-number">19</span><br>dtype: int32<br><br>In :d.cumsum()<span class="hljs-comment">#计算前N项累加和</span><br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">1</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span><span class="hljs-number">3</span><br><span class="hljs-number">3</span><span class="hljs-number">6</span><br><span class="hljs-number">4</span><span class="hljs-number">10</span><br>...<br><span class="hljs-number">18</span><span class="hljs-number">171</span><br><span class="hljs-number">19</span><span class="hljs-number">190</span><br>dtype: int32<br></code></pre></td></tr></table></figure><h2 id="Series，DataFrame"><a href="#Series，DataFrame" class="headerlink" title="Series，DataFrame"></a>Series，DataFrame</h2><p>像对待单一数据一样对待</p><p>基于这两种数据类型有各类操作：<strong>基本操作、运算操作、特征类操作、关联类操作</strong></p><h2 id="对比NumPy与Pandas"><a href="#对比NumPy与Pandas" class="headerlink" title="对比NumPy与Pandas"></a>对比NumPy与Pandas</h2><h3 id="基础数据类型与扩展数据类型"><a href="#基础数据类型与扩展数据类型" class="headerlink" title="基础数据类型与扩展数据类型"></a>基础数据类型与扩展数据类型</h3><p>NumPy的基础数据类型ndarray可以表达n维数组，Pandas提供两种基于ndarray的扩展数据类型</p><h3 id="数据结构表达与数据应用表达"><a href="#数据结构表达与数据应用表达" class="headerlink" title="数据结构表达与数据应用表达"></a>数据结构表达与数据应用表达</h3><p>NumPy关注数据的结构表达，数据的结构表达即数据构成的维度，即你给我一些数据，我关注要用什么维度将数据存储起来并表示出来，数据通过n维方式存储至一个变量中</p><p>Pandas关注数据的应用表达，使用数据的时候，怎么更有效地提取数据，以及对这些数据进行运算</p><p>我们把数据维度简历好，可以将数据结构表达清楚，但是在使用数据的时候，过于紧密的维度关系并不利于数据的实际应用，因此Pandas并没过分关注数据的结构表达，而是关注数据的应用表达，应用表达体现在数据与索引的关系</p><h3 id="维度-数据间关系-、数据与索引间关系"><a href="#维度-数据间关系-、数据与索引间关系" class="headerlink" title="维度(数据间关系)、数据与索引间关系"></a>维度(数据间关系)、数据与索引间关系</h3><p>Series与DataFrame都非常明确有效的索引，通过索引可以对数据进行相关分析与提取，通过数据与索引的关系可以使得数据的应用非常方便</p><h1 id="Series类型"><a href="#Series类型" class="headerlink" title="Series类型"></a>Series类型</h1><ul><li>Series是一维带“标签”数组</li><li>Pandas的一维数据类型</li><li>Series基本操作类似ndarray和字典，根据索引对齐，不根据维度</li><li>由一组数据及与之相关的数据索引组成</li></ul><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-function"><span class="hljs-title">index_0</span>--&gt;</span> data_a<br><span class="hljs-function"><span class="hljs-title">index_1</span> --&gt;</span> data_b<br><span class="hljs-function"><span class="hljs-title">index_2</span> --&gt;</span> data_c<br><span class="hljs-function"><span class="hljs-title">index_3</span> --&gt;</span> data_d<br>索引  数据<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>a = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>])<br>a<br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">9</span><span class="hljs-comment"># 自动索引</span><br><span class="hljs-number">1</span><span class="hljs-number">8</span><br><span class="hljs-number">2</span><span class="hljs-number">7</span><br><span class="hljs-number">3</span><span class="hljs-number">6</span><br>dtype: int64 <span class="hljs-comment"># &lt;--NumPy中数据类型</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],index=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<span class="hljs-comment"># 作为第二个参数，可以省略index=</span><br>b<br><br>Out:<br>a<span class="hljs-number">9</span><span class="hljs-comment"># 自定义索引</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>d<span class="hljs-number">6</span><br>dtype: int64<br></code></pre></td></tr></table></figure><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><p>可以由如下类型创建</p><p><strong>Python列表    标量值    Python字典    ndarray    其他函数</strong></p><h3 id="标量类型创建"><a href="#标量类型创建" class="headerlink" title="标量类型创建"></a>标量类型创建</h3><p>index表达Series类型的尺寸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>s = pd.Series(<span class="hljs-number">25</span>,index=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>])<span class="hljs-comment"># 此处不能省略index=</span><br>s<br><br>Out:<br>a<span class="hljs-number">25</span><br>b<span class="hljs-number">25</span><br>c<span class="hljs-number">25</span><br>dtype: int64<br></code></pre></td></tr></table></figure><h3 id="字典类型创建"><a href="#字典类型创建" class="headerlink" title="字典类型创建"></a>字典类型创建</h3><p>键值对中“键”是索引，index从字典中进行选择操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>d = pd.Series(&#123;<span class="hljs-string">&#x27;a&#x27;</span>:<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;b&#x27;</span>:<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;c&#x27;</span>:<span class="hljs-number">7</span>&#125;)<br>d<br><br>Out:<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>dtype: int64<br>    <br>In :e = pd.Series(&#123;<span class="hljs-string">&#x27;a&#x27;</span>:<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;b&#x27;</span>:<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;c&#x27;</span>:<span class="hljs-number">7</span>&#125;,index=[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>    e<br>    <br>Out:<br>c<span class="hljs-number">7.0</span><br>a<span class="hljs-number">9.0</span><br>b<span class="hljs-number">8.0</span><br>dNaN<br>dtype: float64<br></code></pre></td></tr></table></figure><h3 id="ndarray创建"><a href="#ndarray创建" class="headerlink" title="ndarray创建"></a>ndarray创建</h3><p>Python列表的话index与列表元素个数一致</p><p>ndarray中索引和数据都可以通过ndarray类型创建</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>n = pd.Series(np.arange(<span class="hljs-number">5</span>))<br>n<br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">0</span><br><span class="hljs-number">1</span><span class="hljs-number">1</span><br><span class="hljs-number">2</span><span class="hljs-number">2</span><br><span class="hljs-number">3</span><span class="hljs-number">3</span><br><span class="hljs-number">4</span><span class="hljs-number">4</span><br>dtype: int32<br>    <br>    <br>In :m = pd.Series(np.arange(<span class="hljs-number">5</span>),index=np.arange(<span class="hljs-number">9</span>,<span class="hljs-number">4</span>,-<span class="hljs-number">1</span>))<br>    m<br>    <br>Out:<br><span class="hljs-number">9</span><span class="hljs-number">0</span><br><span class="hljs-number">8</span><span class="hljs-number">1</span><br><span class="hljs-number">7</span><span class="hljs-number">2</span><br><span class="hljs-number">6</span><span class="hljs-number">3</span><br><span class="hljs-number">5</span><span class="hljs-number">4</span><br>dtype: int32<br></code></pre></td></tr></table></figure><h3 id="其他函数创建"><a href="#其他函数创建" class="headerlink" title="其他函数创建"></a>其他函数创建</h3><p>range()函数等</p><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>Series类型包括index和values两部分，操作类似ndarray类型与Python字典类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]:<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>In [<span class="hljs-number">2</span>]:b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>In [<span class="hljs-number">3</span>]:b<br>Out[<span class="hljs-number">3</span>]:<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>d<span class="hljs-number">6</span><br>dtype: int64<br><br>In [<span class="hljs-number">4</span>]:b.index<span class="hljs-comment"># 获得索引</span><br>Out[<span class="hljs-number">4</span>]:<br>Index([<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b,&#x27;</span>c<span class="hljs-string">&#x27;,&#x27;</span>d<span class="hljs-string">&#x27;],dtype=&#x27;</span><span class="hljs-built_in">object</span><span class="hljs-string">&#x27;)</span><br><span class="hljs-string"></span><br><span class="hljs-string">In [5]:b.values# 获得数据</span><br><span class="hljs-string">Out[5]:array([9,8,7,6],dtype=int64)</span><br><span class="hljs-string">       </span><br><span class="hljs-string">In [6]:b[&#x27;</span><span class="hljs-string">b&#x27;]# 自定义索引</span><br><span class="hljs-string">Out[6]:8</span><br><span class="hljs-string"></span><br><span class="hljs-string">In [7]:b[1]# 自动索引并存</span><br><span class="hljs-string">Out[7]:8</span><br><span class="hljs-string"></span><br><span class="hljs-string">In [8]:b[[&#x27;</span>c<span class="hljs-string">&#x27;,&#x27;</span>d<span class="hljs-string">&#x27;,0]]</span><br><span class="hljs-string">Out[8]:</span><br><span class="hljs-string">c7.0</span><br><span class="hljs-string">d6.0</span><br><span class="hljs-string">0NaN# 两套索引并存，但不能混用</span><br><span class="hljs-string">dtype: float64</span><br><span class="hljs-string"></span><br><span class="hljs-string">In [9]:b[[&#x27;</span>c<span class="hljs-string">&#x27;,&#x27;</span>d<span class="hljs-string">&#x27;,&#x27;</span>a<span class="hljs-string">&#x27;]]</span><br><span class="hljs-string">Out[9]:</span><br><span class="hljs-string">c7</span><br><span class="hljs-string">d6</span><br><span class="hljs-string">a9</span><br><span class="hljs-string">dtype: int64</span><br></code></pre></td></tr></table></figure><h3 id="ndarray类似方法"><a href="#ndarray类似方法" class="headerlink" title="ndarray类似方法"></a>ndarray类似方法</h3><ul><li>索引方法相同，采用[]</li><li>NumPy中运算和操作可用于Series类型</li><li>可以通过自定义索引的列表进行切片</li><li>可以通过自动索引进行切片，如果存在自定义索引，则一同被切片</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]:<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>In [<span class="hljs-number">2</span>]:b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>In [<span class="hljs-number">3</span>]:b<br>Out[<span class="hljs-number">3</span>]:<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>d<span class="hljs-number">6</span><br>dtype: int64<br><br>In [<span class="hljs-number">4</span>]:b[<span class="hljs-number">3</span>]<span class="hljs-comment"># 一个值</span><br>Out[<span class="hljs-number">4</span>]:<span class="hljs-number">6</span><br><br>In [<span class="hljs-number">5</span>]:b[:<span class="hljs-number">3</span>]<span class="hljs-comment"># series类型</span><br>Out[<span class="hljs-number">5</span>]:<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>dtype: int64<br><br>In [<span class="hljs-number">6</span>]:b[b&gt;b.median()]<br>Out[<span class="hljs-number">6</span>]:<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>dtype: int64<br><br>In [<span class="hljs-number">7</span>]:np.exp(b)<br>Out[<span class="hljs-number">7</span>]:<br>a<span class="hljs-number">8103.0839288</span><br>b<span class="hljs-number">2980.957987</span><br>c<span class="hljs-number">1096.633158</span><br>d <span class="hljs-number">403.428793</span><br>dtype: float64<br></code></pre></td></tr></table></figure><h3 id="Python字典类似方法"><a href="#Python字典类似方法" class="headerlink" title="Python字典类似方法"></a>Python字典类似方法</h3><ul><li>通过自定义索引访问</li><li>保留字in操作</li><li>使用.get()方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]:<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br>In [<span class="hljs-number">2</span>]:b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br><br>In [<span class="hljs-number">3</span>]:b[<span class="hljs-string">&#x27;b&#x27;</span>]<br>Out[<span class="hljs-number">3</span>]:<span class="hljs-number">8</span><br><br>In [<span class="hljs-number">4</span>]:<span class="hljs-string">&#x27;c&#x27;</span> <span class="hljs-keyword">in</span> b<br>Out[<span class="hljs-number">4</span>]:<span class="hljs-literal">True</span><br><br>In [<span class="hljs-number">5</span>]:<span class="hljs-number">0</span> <span class="hljs-keyword">in</span> b<span class="hljs-comment"># 不会判断自动索引</span><br>Out[<span class="hljs-number">5</span>]:<span class="hljs-literal">False</span><br><br>In [<span class="hljs-number">6</span>]:b.get(<span class="hljs-string">&#x27;f&#x27;</span>,<span class="hljs-number">100</span>)<br>Out[<span class="hljs-number">6</span>]:<span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><h2 id="对齐操作"><a href="#对齐操作" class="headerlink" title="对齐操作"></a>对齐操作</h2><p>Series类型在运算中会自动对齐不同索引的数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]:<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br>In [<span class="hljs-number">2</span>]:a = pd.Series([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;e&#x27;</span>])<br><br>In [<span class="hljs-number">3</span>]:b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br><br>In [<span class="hljs-number">4</span>]:a+b<br>Out[<span class="hljs-number">4</span>]:<br>aNaN<br>bNaN<br>c<span class="hljs-number">8.0</span><br>d<span class="hljs-number">8.0</span><br>eNaN<br>dtype: float64<br></code></pre></td></tr></table></figure><h2 id="Name属性"><a href="#Name属性" class="headerlink" title="Name属性"></a>Name属性</h2><p>Series对象和索引都可以有一个名字，存储在属性.name中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>b.name<br>b.name = <span class="hljs-string">&#x27;Series对象&#x27;</span><br>b.index.name = <span class="hljs-string">&#x27;索引列&#x27;</span><br>b<br><br>Out:<br>索引列<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>d<span class="hljs-number">6</span><br>Name: Series对象,dtype: int64<br></code></pre></td></tr></table></figure><h2 id="类型修改"><a href="#类型修改" class="headerlink" title="类型修改"></a>类型修改</h2><p>Series对象可以随时修改并即刻生效</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>b = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>b[<span class="hljs-string">&#x27;a&#x27;</span>] = <span class="hljs-number">15</span><br>b.name = <span class="hljs-string">&quot;Series&quot;</span><br>b<br><br>Out:<br>a<span class="hljs-number">15</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>d<span class="hljs-number">6</span><br>Name: Series,dtype: int64<br><br>In :<br>b.name = <span class="hljs-string">&quot;New Series&quot;</span><br>b[<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>] = <span class="hljs-number">20</span><br>b<br><br>Out:<br>a<span class="hljs-number">15</span><br>b<span class="hljs-number">20</span><br>c<span class="hljs-number">20</span><br>d<span class="hljs-number">6</span><br>Name: New Series,dtype: int64<br></code></pre></td></tr></table></figure><h1 id="DataFrame类型"><a href="#DataFrame类型" class="headerlink" title="DataFrame类型"></a>DataFrame类型</h1><ul><li>Data是二维带”标签”数组</li><li>Pandas的二维数据类型，由共用相同索引的一组列组成</li><li>DataFrame是一个表格型的数据类型，每列值类型可以不同</li><li>DataFrame既有行索引、也有列索引，基本操作类似Series</li><li>DataFrame常用于表达二维数据，但可以表达多维数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">index_0 --&gt; data_adata_1data_w(column)(axis=<span class="hljs-number">1</span>)<br>index_1 --&gt; data_bdata_2data_x<br>index_2 --&gt; data_cdata_3......   data_y<br>index_3 --&gt; data_ddata_4data_z<br>索引(index)多列数据<br>(axis=<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><h2 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h2><p>可以由如下类型创建</p><ul><li>二维ndarray对象</li><li>由一维ndarray、列表、字典、元组或Series构成的字典</li><li>Series类型</li><li>其他的DataFrame类型</li></ul><h3 id="二维ndarry对象创建"><a href="#二维ndarry对象创建" class="headerlink" title="二维ndarry对象创建"></a>二维ndarry对象创建</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>d = pd.DataFrame(np.arange(<span class="hljs-number">10</span>).reshape(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>))<br>d<br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">4</span><span class="hljs-comment"># 自动列索引</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">4</span><br><span class="hljs-number">1</span><span class="hljs-number">5</span><span class="hljs-number">6</span><span class="hljs-number">7</span><span class="hljs-number">8</span><span class="hljs-number">9</span><br><span class="hljs-comment"># 自动行索引</span><br></code></pre></td></tr></table></figure><h3 id="一维ndarray对象字典创建"><a href="#一维ndarray对象字典创建" class="headerlink" title="一维ndarray对象字典创建"></a>一维ndarray对象字典创建</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>dt = &#123;<span class="hljs-string">&#x27;one&#x27;</span>:pd.Series([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],index=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>]),<br>  <span class="hljs-string">&#x27;two&#x27;</span>:pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],index=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])&#125;<br>d = pd.DataFrame(dt)<br>d<br><br>Out:<br>onetwo<span class="hljs-comment"># 自动列索引</span><br>a<span class="hljs-number">1.0</span>  <span class="hljs-number">9</span><br>b<span class="hljs-number">2.0</span>  <span class="hljs-number">8</span><br>c<span class="hljs-number">3.0</span>  <span class="hljs-number">7</span><br>dNaN  <span class="hljs-number">6</span><br><span class="hljs-comment"># 自动行索引</span><br><br>In :<br>pd.DataFrame(dt,index=[<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>],columns=[<span class="hljs-string">&#x27;two&#x27;</span>,<span class="hljs-string">&#x27;three&#x27;</span>])<br><br>Out:<br>twothree<br>b<span class="hljs-number">8</span> NaN<br>c<span class="hljs-number">7</span> NaN<br>d<span class="hljs-number">6</span> NaN<br></code></pre></td></tr></table></figure><h3 id="列表类型的字典创建"><a href="#列表类型的字典创建" class="headerlink" title="列表类型的字典创建"></a>列表类型的字典创建</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>dl = &#123;<span class="hljs-string">&#x27;one&#x27;</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],<span class="hljs-string">&#x27;two&#x27;</span>:[<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>]&#125;<br>d = pd.DataFrame(dl,index=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>d<br><br>Out:<br>onetwo<br>a<span class="hljs-number">1</span><span class="hljs-number">9</span><br>b<span class="hljs-number">2</span><span class="hljs-number">8</span><br>c<span class="hljs-number">3</span><span class="hljs-number">7</span><br>d<span class="hljs-number">4</span><span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h2 id="举例-查询索引等"><a href="#举例-查询索引等" class="headerlink" title="举例(查询索引等)"></a>举例(查询索引等)</h2><p><style>.ujksymuxiqkw{zoom:67%;}</style><img src="/2024/05/17/20240517_Pandas/image-20240517183052878.png" class="ujksymuxiqkw" alt="image-20240517183052878"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>dl = &#123;<span class="hljs-string">&#x27;城市&#x27;</span>:[<span class="hljs-string">&#x27;北京&#x27;</span>,<span class="hljs-string">&#x27;上海&#x27;</span>,<span class="hljs-string">&#x27;广州&#x27;</span>,<span class="hljs-string">&#x27;深圳&#x27;</span>,<span class="hljs-string">&#x27;沈阳&#x27;</span>]，<br>  <span class="hljs-string">&#x27;环比&#x27;</span>:[<span class="hljs-number">101.5</span>, <span class="hljs-number">101.2</span>, <span class="hljs-number">101.3</span>, <span class="hljs-number">102.0</span>, <span class="hljs-number">100.1</span>],<br>  <span class="hljs-string">&#x27;同比&#x27;</span>:[<span class="hljs-number">120.7</span>, <span class="hljs-number">127.3</span>, <span class="hljs-number">119.4</span>, <span class="hljs-number">140.9</span>, <span class="hljs-number">101.4</span>],<br>  <span class="hljs-string">&#x27;定基&#x27;</span>:[<span class="hljs-number">121.4</span>, <span class="hljs-number">127.8</span>, <span class="hljs-number">120.0</span>, <span class="hljs-number">145.5</span>, <span class="hljs-number">101.6</span>]&#125;<br>d = pd.DataFrame(dl,index=[<span class="hljs-string">&#x27;c1&#x27;</span>,<span class="hljs-string">&#x27;c2&#x27;</span>,<span class="hljs-string">&#x27;c3&#x27;</span>,<span class="hljs-string">&#x27;c4&#x27;</span>,<span class="hljs-string">&#x27;c5&#x27;</span>])<br>d<br><br>Out:<br>同比城市定基环比<br>c1<span class="hljs-number">120.7</span> 北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br>c2  <span class="hljs-number">127.3</span> 上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c3  <span class="hljs-number">119.4</span> 广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c4  <span class="hljs-number">140.9</span> 深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c5  <span class="hljs-number">101.4</span> 沈阳  <span class="hljs-number">101.6</span> <span class="hljs-number">100.1</span><br><br>In :d.index<br>Out:Index([<span class="hljs-string">&#x27;c1&#x27;</span>,<span class="hljs-string">&#x27;c2&#x27;</span>,<span class="hljs-string">&#x27;c3&#x27;</span>,<span class="hljs-string">&#x27;c4&#x27;</span>,<span class="hljs-string">&#x27;c5&#x27;</span>],dtype=<span class="hljs-string">&#x27;object&#x27;</span>)<br>    <br>In :d.colums<br>Out:Index([<span class="hljs-string">&#x27;同比&#x27;</span>,<span class="hljs-string">&#x27;城市&#x27;</span>,<span class="hljs-string">&#x27;定基&#x27;</span>,<span class="hljs-string">&#x27;环比&#x27;</span>],dtype=<span class="hljs-string">&#x27;object&#x27;</span>)<br><br>In :d.values<br>Out:<br>array([[<span class="hljs-number">120.7</span>,北京,<span class="hljs-number">121.4</span>,<span class="hljs-number">101.5</span>],<br>       [<span class="hljs-number">127.3</span>,上海,<span class="hljs-number">127.8</span>,<span class="hljs-number">101.2</span>],<br>       [<span class="hljs-number">119.4</span>,广州,<span class="hljs-number">120.0</span>,<span class="hljs-number">101.3</span>],<br>       [<span class="hljs-number">140.9</span>,深圳,<span class="hljs-number">145.5</span>,<span class="hljs-number">102.0</span>],<br>       [<span class="hljs-number">101.4</span>,沈阳,<span class="hljs-number">101.6</span>,<span class="hljs-number">100.1</span>]],dtype=<span class="hljs-built_in">object</span>)<br><br><span class="hljs-comment">###字典之间各元素是无序的，因此生成d中列顺序不一定和字典中相同</span><br><br>In :d[<span class="hljs-string">&#x27;同比&#x27;</span>]<br>Out:<br>c1<span class="hljs-number">120.7</span><br>c2  <span class="hljs-number">127.3</span><br>c3  <span class="hljs-number">119.4</span><br>c4  <span class="hljs-number">140.9</span><br>c5  <span class="hljs-number">101.4</span><br>Name:同比,dtype: float64<br>        <br>In :d.ix[<span class="hljs-string">&#x27;c2&#x27;</span>]<br>Out:<br>同比<span class="hljs-number">127.8</span><br>城市上海<br>定基<span class="hljs-number">127.8</span><br>环比<span class="hljs-number">101.2</span><br>Name:c2,dtype:<span class="hljs-built_in">object</span><br><br>In :d[<span class="hljs-string">&#x27;同比&#x27;</span>][<span class="hljs-string">&#x27;c2&#x27;</span>]<br>Out:<span class="hljs-number">127.3</span><br></code></pre></td></tr></table></figure><h1 id="数据类型操作"><a href="#数据类型操作" class="headerlink" title="数据类型操作"></a>数据类型操作</h1><h2 id="如何改变Series和DataFrame对象"><a href="#如何改变Series和DataFrame对象" class="headerlink" title="如何改变Series和DataFrame对象"></a>如何改变Series和DataFrame对象</h2><p>改变指的是增加或重排Series或DataFrame的索引，或者删掉其中的部分值</p><h3 id="索引类型及其常用方法"><a href="#索引类型及其常用方法" class="headerlink" title="索引类型及其常用方法"></a>索引类型及其常用方法</h3><p>Series和DataFrame的索引是Index类型</p><p>Index对象是不可修改类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">In :d.index<br>Out:Index([<span class="hljs-string">&#x27;c5&#x27;</span>,<span class="hljs-string">&#x27;c4&#x27;</span>,<span class="hljs-string">&#x27;c3&#x27;</span>,<span class="hljs-string">&#x27;c2&#x27;</span>,<span class="hljs-string">&#x27;c1&#x27;</span>],dtype=<span class="hljs-string">&#x27;object&#x27;</span>)<br><br>In :d.columns<br>Out:Index([<span class="hljs-string">&#x27;城市&#x27;</span>,<span class="hljs-string">&#x27;同比&#x27;</span>,<span class="hljs-string">&#x27;环比&#x27;</span>,<span class="hljs-string">&#x27;定基&#x27;</span>],dtype=<span class="hljs-string">&#x27;object&#x27;</span>)<br></code></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.append(idx)</td><td>连接另一个Index对象，产生新的Index对象</td></tr><tr><td>.diff(idx)</td><td>计算差集，产生新的Index对象</td></tr><tr><td>.intersection(idx)</td><td>计算交集</td></tr><tr><td>.union(idx)</td><td>计算并集</td></tr><tr><td>.delete(loc)</td><td>删除loc位置处的元素</td></tr><tr><td>.insert(loc,e)</td><td>在loc位置增加一个元素e</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python">In :d<br>Out:<br>同比城市定基环比<br>c1<span class="hljs-number">120.7</span> 北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br>c2  <span class="hljs-number">127.3</span> 上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c3  <span class="hljs-number">119.4</span> 广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c4  <span class="hljs-number">140.9</span> 深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c5  <span class="hljs-number">101.4</span> 沈阳  <span class="hljs-number">101.6</span> <span class="hljs-number">100.1</span><br><br>In :<br>nc = d.columns.delete(<span class="hljs-number">2</span>)<br>ni = d.index.insert(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;c6&#x27;</span>)<br>nd = d.reindex(index=ni,columns=nc,method=<span class="hljs-string">&#x27;ffill&#x27;</span>)<br>nd<br><br>Out:<br>同比城市环比<br>c1<span class="hljs-number">120.7</span> 北京 <span class="hljs-number">101.5</span><br>c2  <span class="hljs-number">127.3</span> 上海 <span class="hljs-number">101.2</span><br>c3  <span class="hljs-number">119.4</span> 广州 <span class="hljs-number">101.3</span><br>c4  <span class="hljs-number">140.9</span> 深圳 <span class="hljs-number">102.0</span><br>c5  <span class="hljs-number">101.4</span> 沈阳 <span class="hljs-number">100.1</span><br>c6  <span class="hljs-number">101.4</span> 沈阳 <span class="hljs-number">100.1</span>  <br></code></pre></td></tr></table></figure><h3 id="增加或重排：重新索引"><a href="#增加或重排：重新索引" class="headerlink" title="增加或重排：重新索引"></a>增加或重排：重新索引</h3><p>.reindex()能够改变或重排Series和DataFrame索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>dl = &#123;<span class="hljs-string">&#x27;城市&#x27;</span>:[<span class="hljs-string">&#x27;北京&#x27;</span>,<span class="hljs-string">&#x27;上海&#x27;</span>,<span class="hljs-string">&#x27;广州&#x27;</span>,<span class="hljs-string">&#x27;深圳&#x27;</span>,<span class="hljs-string">&#x27;沈阳&#x27;</span>]，<br>  <span class="hljs-string">&#x27;环比&#x27;</span>:[<span class="hljs-number">101.5</span>, <span class="hljs-number">101.2</span>, <span class="hljs-number">101.3</span>, <span class="hljs-number">102.0</span>, <span class="hljs-number">100.1</span>],<br>  <span class="hljs-string">&#x27;同比&#x27;</span>:[<span class="hljs-number">120.7</span>, <span class="hljs-number">127.3</span>, <span class="hljs-number">119.4</span>, <span class="hljs-number">140.9</span>, <span class="hljs-number">101.4</span>],<br>  <span class="hljs-string">&#x27;定基&#x27;</span>:[<span class="hljs-number">121.4</span>, <span class="hljs-number">127.8</span>, <span class="hljs-number">120.0</span>, <span class="hljs-number">145.5</span>, <span class="hljs-number">101.6</span>]&#125;<br>d = pd.DataFrame(dl,index=[<span class="hljs-string">&#x27;c1&#x27;</span>,<span class="hljs-string">&#x27;c2&#x27;</span>,<span class="hljs-string">&#x27;c3&#x27;</span>,<span class="hljs-string">&#x27;c4&#x27;</span>,<span class="hljs-string">&#x27;c5&#x27;</span>])<br>d<br><br>Out:<br>同比城市定基环比<br>c1<span class="hljs-number">120.7</span> 北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br>c2  <span class="hljs-number">127.3</span> 上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c3  <span class="hljs-number">119.4</span> 广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c4  <span class="hljs-number">140.9</span> 深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c5  <span class="hljs-number">101.4</span> 沈阳  <span class="hljs-number">101.6</span> <span class="hljs-number">100.1</span><br><br>In :<br>d = d.reindex(index=[<span class="hljs-string">&#x27;c5&#x27;</span>,<span class="hljs-string">&#x27;c4&#x27;</span>,<span class="hljs-string">&#x27;c3&#x27;</span>,<span class="hljs-string">&#x27;c2&#x27;</span>,<span class="hljs-string">&#x27;c1&#x27;</span>])<br>d<br><br>Out:<br>同比城市定基环比<br>c5  <span class="hljs-number">101.4</span> 沈阳  <span class="hljs-number">101.6</span> <span class="hljs-number">100.1</span><br>c4  <span class="hljs-number">140.9</span> 深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c3  <span class="hljs-number">119.4</span> 广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c2  <span class="hljs-number">127.3</span> 上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c1<span class="hljs-number">120.7</span> 北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br><br>In :<br>d = d.reindex(colums=[<span class="hljs-string">&#x27;城市&#x27;</span>,<span class="hljs-string">&#x27;同比&#x27;</span>,<span class="hljs-string">&#x27;环比&#x27;</span>,<span class="hljs-string">&#x27;定基&#x27;</span>])<br>d<br><br>Out:<br>城市同比环比定基<br>c5沈阳  <span class="hljs-number">101.4</span> <span class="hljs-number">100.1</span> <span class="hljs-number">101.6</span><br>...<br>c1北京  <span class="hljs-number">120.7</span> <span class="hljs-number">101.5</span> <span class="hljs-number">121.4</span><br></code></pre></td></tr></table></figure><p>.reindex(index=None,columns=None,…)的参数</p><div class="table-container"><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>index,columns</td><td>新的行列自定义索引</td></tr><tr><td>fill_value</td><td>重新索引中，用于填充缺失位置的值</td></tr><tr><td>method</td><td>填充方法，ffill当前值向前填充，bfill向后填充</td></tr><tr><td>limit</td><td>最大填充量</td></tr><tr><td>copy</td><td>默认True，生成新的对象，False时，新旧相等不复制</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br>newc = d.columns.insert(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;新增&#x27;</span>)<br>newd = d.reindex(colums=newc,fill_value=<span class="hljs-number">200</span>)<br>newd<br><br>Out:<br>城市同比环比定基新增<br>c5沈阳  <span class="hljs-number">101.4</span> <span class="hljs-number">100.1</span> <span class="hljs-number">101.6</span> <span class="hljs-number">200</span><br>...<br>c1北京  <span class="hljs-number">120.7</span> <span class="hljs-number">101.5</span> <span class="hljs-number">121.4</span> <span class="hljs-number">200</span><br></code></pre></td></tr></table></figure><h3 id="删除：drop"><a href="#删除：drop" class="headerlink" title="删除：drop"></a>删除：drop</h3><p>.drop()能够删除Series和DataFrame指定行或列索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]:<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>In [<span class="hljs-number">2</span>]:a = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>In [<span class="hljs-number">3</span>]:a<br>Out[<span class="hljs-number">3</span>]:<br>a<span class="hljs-number">9</span><br>b<span class="hljs-number">8</span><br>c<span class="hljs-number">7</span><br>d<span class="hljs-number">6</span><br>dtype: int64<br><br>In :a.drop([<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>])<br>Out:<br>a<span class="hljs-number">9</span><br>d<span class="hljs-number">6</span><br>dtype:int64<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In :d<br>Out:<br>同比城市定基环比<br>c5  <span class="hljs-number">101.4</span> 沈阳  <span class="hljs-number">101.6</span> <span class="hljs-number">100.1</span><br>c4  <span class="hljs-number">140.9</span> 深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c3  <span class="hljs-number">119.4</span> 广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c2  <span class="hljs-number">127.3</span> 上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c1<span class="hljs-number">120.7</span> 北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br><br>In :d.drop(<span class="hljs-string">&#x27;c5&#x27;</span>)<span class="hljs-comment"># 默认0轴</span><br>Out:<br>同比城市定基环比<br>c4  <span class="hljs-number">140.9</span> 深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c3  <span class="hljs-number">119.4</span> 广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c2  <span class="hljs-number">127.3</span> 上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c1<span class="hljs-number">120.7</span> 北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br><br>In :d.drop(<span class="hljs-string">&#x27;同比&#x27;</span>,axis=<span class="hljs-number">1</span>)<br>Out:<br>城市定基环比<br>c4  深圳  <span class="hljs-number">145.5</span> <span class="hljs-number">102.0</span><br>c3  广州  <span class="hljs-number">120.0</span> <span class="hljs-number">101.3</span><br>c2  上海  <span class="hljs-number">127.8</span> <span class="hljs-number">101.2</span><br>c1北京  <span class="hljs-number">121.4</span> <span class="hljs-number">101.5</span><br></code></pre></td></tr></table></figure><h1 id="数据类型运算"><a href="#数据类型运算" class="headerlink" title="数据类型运算"></a>数据类型运算</h1><h2 id="算数运算法则"><a href="#算数运算法则" class="headerlink" title="算数运算法则"></a>算数运算法则</h2><ul><li>算数运算根据行列索引，补齐后运算，运算默认产生浮点数</li><li>补齐时缺项填充NaN(空值)</li><li>二维和一维、一维和零维间为广播运算</li><li>采用+-*/符号进行的二元运算产生新的对象</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>a = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br>a<br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><br><span class="hljs-number">1</span><span class="hljs-number">4</span><span class="hljs-number">5</span><span class="hljs-number">6</span><span class="hljs-number">7</span><br><span class="hljs-number">2</span><span class="hljs-number">8</span><span class="hljs-number">9</span><span class="hljs-number">10</span><span class="hljs-number">11</span><br><br>In :<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>))<br>b<br><br>Out:<br><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">4</span><br><span class="hljs-number">0</span><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span><span class="hljs-number">4</span><br><span class="hljs-number">1</span><span class="hljs-number">5</span><span class="hljs-number">6</span><span class="hljs-number">7</span><span class="hljs-number">8</span><span class="hljs-number">9</span><br><span class="hljs-number">2</span><span class="hljs-number">10</span><span class="hljs-number">11</span><span class="hljs-number">12</span><span class="hljs-number">13</span><span class="hljs-number">14</span><br><span class="hljs-number">3</span><span class="hljs-number">15</span><span class="hljs-number">16</span><span class="hljs-number">17</span><span class="hljs-number">18</span><span class="hljs-number">19</span><br><br>In :a+b<br>Out:<br><span class="hljs-number">0</span> <span class="hljs-number">1</span>  <span class="hljs-number">2</span>   <span class="hljs-number">3</span><span class="hljs-number">4</span><br><span class="hljs-number">0</span><span class="hljs-number">0.0</span> <span class="hljs-number">2.0</span>  <span class="hljs-number">4.0</span>  <span class="hljs-number">6.0</span>  NaN<br><span class="hljs-number">1</span><span class="hljs-number">9.0</span> <span class="hljs-number">11.0</span>  <span class="hljs-number">13.0</span> <span class="hljs-number">15.0</span>NaN<br><span class="hljs-number">2</span><span class="hljs-number">18.0</span> <span class="hljs-number">20.0</span> <span class="hljs-number">22.0</span> <span class="hljs-number">24.0</span>NaN<br><span class="hljs-number">3</span>NaN NaN  NaN  NaNNaN<br><br>In :a*b<br>Out:<span class="hljs-comment"># 自动补齐，缺项补NaN</span><br><span class="hljs-number">0</span> <span class="hljs-number">1</span>  <span class="hljs-number">2</span>    <span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-number">0</span><span class="hljs-number">0.0</span> <span class="hljs-number">1.0</span>  <span class="hljs-number">4.0</span>   <span class="hljs-number">9.0</span>   NaN<br><span class="hljs-number">1</span><span class="hljs-number">20.0</span> <span class="hljs-number">30.0</span> <span class="hljs-number">42.0</span>  <span class="hljs-number">56.0</span>  NaN<br><span class="hljs-number">2</span>   <span class="hljs-number">80.0</span> <span class="hljs-number">99.0</span> <span class="hljs-number">120.0</span> <span class="hljs-number">143.0</span>  NaN<br><span class="hljs-number">3</span>NaN NaN  NaN   NaN  NaN<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 不同维度间运算为广播运算，一维Series默认在轴1参与运算</span><br>In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>))<br><span class="hljs-built_in">print</span>(b)<br>c = pd.Series(np.arange(<span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(c)<br><span class="hljs-built_in">print</span>(c-<span class="hljs-number">10</span>)<br><span class="hljs-built_in">print</span>(b-c)<br><br>Out:<br>   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br><span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br><span class="hljs-number">1</span>   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br><span class="hljs-number">2</span>  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br><span class="hljs-number">3</span>  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br><br><span class="hljs-number">0</span>    <span class="hljs-number">0</span><br><span class="hljs-number">1</span>    <span class="hljs-number">1</span><br><span class="hljs-number">2</span>    <span class="hljs-number">2</span><br><span class="hljs-number">3</span>    <span class="hljs-number">3</span><br>dtype: int32<br><br><span class="hljs-number">0</span>   -<span class="hljs-number">10</span><br><span class="hljs-number">1</span>    -<span class="hljs-number">9</span><br><span class="hljs-number">2</span>    -<span class="hljs-number">8</span><br><span class="hljs-number">3</span>    -<span class="hljs-number">7</span><br>dtype: int32<br><br>      <span class="hljs-number">0</span>     <span class="hljs-number">1</span>     <span class="hljs-number">2</span>     <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br><span class="hljs-number">0</span>   <span class="hljs-number">0.0</span>   <span class="hljs-number">0.0</span>   <span class="hljs-number">0.0</span>   <span class="hljs-number">0.0</span> NaN<br><span class="hljs-number">1</span>   <span class="hljs-number">5.0</span>   <span class="hljs-number">5.0</span>   <span class="hljs-number">5.0</span>   <span class="hljs-number">5.0</span> NaN<br><span class="hljs-number">2</span>  <span class="hljs-number">10.0</span>  <span class="hljs-number">10.0</span>  <span class="hljs-number">10.0</span>  <span class="hljs-number">10.0</span> NaN<br><span class="hljs-number">3</span>  <span class="hljs-number">15.0</span>  <span class="hljs-number">15.0</span>  <span class="hljs-number">15.0</span>  <span class="hljs-number">15.0</span> NaN<br></code></pre></td></tr></table></figure><p><strong>方法形式运算</strong></p><p>好处：增加可选参数</p><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.add(d,**argws)</td><td>类型间加法运算，可选参数</td></tr><tr><td>.sub(d,**argws)</td><td>类型间减法运算，可选参数</td></tr><tr><td>.mul(d,**argws)</td><td>类型间乘法运算，可选参数</td></tr><tr><td>.div(d,**argws)</td><td>类型间除法运算，可选参数</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">In :b.add(a,fill_value = <span class="hljs-number">100</span>)<br>Out:<br><span class="hljs-number">0</span> <span class="hljs-number">1</span>  <span class="hljs-number">2</span>   <span class="hljs-number">3</span><span class="hljs-number">4</span><br><span class="hljs-number">0</span><span class="hljs-number">0.0</span> <span class="hljs-number">2.0</span>  <span class="hljs-number">4.0</span>  <span class="hljs-number">6.0</span>  <span class="hljs-number">104.0</span><br><span class="hljs-number">1</span><span class="hljs-number">9.0</span> <span class="hljs-number">11.0</span>  <span class="hljs-number">13.0</span> <span class="hljs-number">15.0</span><span class="hljs-number">109.0</span><br><span class="hljs-number">2</span><span class="hljs-number">18.0</span> <span class="hljs-number">20.0</span> <span class="hljs-number">22.0</span> <span class="hljs-number">24.0</span><span class="hljs-number">114.0</span><br><span class="hljs-number">3</span><span class="hljs-number">115.0</span> <span class="hljs-number">116.0</span> <span class="hljs-number">117.0</span> <span class="hljs-number">118.0</span> <span class="hljs-number">119.0</span><br><br>In :a.mul(b,fill_value = <span class="hljs-number">0</span>)<br>Out:<br><span class="hljs-number">0</span> <span class="hljs-number">1</span>  <span class="hljs-number">2</span>    <span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-number">0</span><span class="hljs-number">0.0</span> <span class="hljs-number">1.0</span>  <span class="hljs-number">4.0</span>   <span class="hljs-number">9.0</span>   <span class="hljs-number">0</span><br><span class="hljs-number">1</span><span class="hljs-number">20.0</span> <span class="hljs-number">30.0</span> <span class="hljs-number">42.0</span>  <span class="hljs-number">56.0</span>  <span class="hljs-number">0</span><br><span class="hljs-number">2</span>   <span class="hljs-number">80.0</span> <span class="hljs-number">99.0</span> <span class="hljs-number">120.0</span> <span class="hljs-number">143.0</span>  <span class="hljs-number">0</span><br><span class="hljs-number">3</span><span class="hljs-number">0</span> <span class="hljs-number">0</span>   <span class="hljs-number">0</span>     <span class="hljs-number">0</span>     <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 使用运算方法可以令一维Series参与轴0运算</span><br>In :b.sub(c,axis=<span class="hljs-number">0</span>)<br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br><span class="hljs-number">0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br><span class="hljs-number">1</span>   <span class="hljs-number">4</span>   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span><br><span class="hljs-number">2</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span>  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span><br><span class="hljs-number">3</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span>  <span class="hljs-number">15</span>  <span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h2 id="比较运算法则"><a href="#比较运算法则" class="headerlink" title="比较运算法则"></a>比较运算法则</h2><ul><li>比较运算只能比较相同索引的元素，不进行补齐</li><li>二维和一维、一维和零维间为广播运算</li><li>采用&gt; &lt; &gt;= &lt;= == !=等符号进行的二元运算产生布尔对象</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 同纬度运算，尺寸一致</span><br>In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>a = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(a)<br>d = pd.DataFrame(np.arange(<span class="hljs-number">12</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>).reshape(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(d)<br><span class="hljs-built_in">print</span>(a&gt;d)<br><span class="hljs-built_in">print</span>(a==d)<br><br>Out:<br>   <span class="hljs-number">0</span>  <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br><span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br><span class="hljs-number">1</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span><br><span class="hljs-number">2</span>  <span class="hljs-number">8</span>  <span class="hljs-number">9</span>  <span class="hljs-number">10</span>  <span class="hljs-number">11</span><br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>  <span class="hljs-number">3</span><br><span class="hljs-number">0</span>  <span class="hljs-number">12</span>  <span class="hljs-number">11</span>  <span class="hljs-number">10</span>  <span class="hljs-number">9</span><br><span class="hljs-number">1</span>   <span class="hljs-number">8</span>   <span class="hljs-number">7</span>   <span class="hljs-number">6</span>  <span class="hljs-number">5</span><br><span class="hljs-number">2</span>   <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>  <span class="hljs-number">1</span><br>       <span class="hljs-number">0</span>      <span class="hljs-number">1</span>      <span class="hljs-number">2</span>      <span class="hljs-number">3</span><br><span class="hljs-number">0</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span><br><span class="hljs-number">1</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>   <span class="hljs-literal">True</span><br><span class="hljs-number">2</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span><br>       <span class="hljs-number">0</span>      <span class="hljs-number">1</span>      <span class="hljs-number">2</span>      <span class="hljs-number">3</span><br><span class="hljs-number">0</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span><br><span class="hljs-number">1</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>   <span class="hljs-literal">True</span>  <span class="hljs-literal">False</span><br><span class="hljs-number">2</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 不同维度，广播运算，默认在1轴</span><br>In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>a = pd.DataFrame(np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(a)<br>c = pd.Series(np.arange(<span class="hljs-number">4</span>))<br><span class="hljs-built_in">print</span>(c)<br><span class="hljs-built_in">print</span>(a&gt;c)<br><span class="hljs-built_in">print</span>(c&gt;<span class="hljs-number">0</span>)<br><br>Out:<br>   <span class="hljs-number">0</span>  <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br><span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br><span class="hljs-number">1</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span><br><span class="hljs-number">2</span>  <span class="hljs-number">8</span>  <span class="hljs-number">9</span>  <span class="hljs-number">10</span>  <span class="hljs-number">11</span><br><br><span class="hljs-number">0</span>    <span class="hljs-number">0</span><br><span class="hljs-number">1</span>    <span class="hljs-number">1</span><br><span class="hljs-number">2</span>    <span class="hljs-number">2</span><br><span class="hljs-number">3</span>    <span class="hljs-number">3</span><br>dtype: int32<br>    <br>       <span class="hljs-number">0</span>      <span class="hljs-number">1</span>      <span class="hljs-number">2</span>      <span class="hljs-number">3</span><br><span class="hljs-number">0</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span>  <span class="hljs-literal">False</span><br><span class="hljs-number">1</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span><br><span class="hljs-number">2</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span>   <span class="hljs-literal">True</span><br><br><span class="hljs-number">0</span>    <span class="hljs-literal">False</span><br><span class="hljs-number">1</span>     <span class="hljs-literal">True</span><br><span class="hljs-number">2</span>     <span class="hljs-literal">True</span><br><span class="hljs-number">3</span>     <span class="hljs-literal">True</span><br>dtype: <span class="hljs-built_in">bool</span><br></code></pre></td></tr></table></figure><h1 id="数据的排序"><a href="#数据的排序" class="headerlink" title="数据的排序"></a>数据的排序</h1><p>一组数据表达一个或多个含义，通过<strong>摘要</strong>，我们<strong>有损地提取数据特征</strong>，获得：</p><ul><li><p>基本统计（含排序）</p></li><li><p>分布/累计统计</p></li><li><p>数据特征</p><p>相关性、周期性等</p></li><li><p>数据挖掘（形成知识）</p></li></ul><h2 id="sort-index"><a href="#sort-index" class="headerlink" title=".sort_index()"></a>.sort_index()</h2><p>在指定轴上根据<strong>索引</strong>进行排序，默认升序</p><ul><li>.sort_index(axis=0,ascending=True)</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),index=[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>])<br>b<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br><br>In :<br>b.sort_index()<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br><br>In :<br>b.sort_index(ascending=<span class="hljs-literal">False</span>)<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br><br>In :<br>c = b.sort_index(axis=<span class="hljs-number">1</span>,ascending = <span class="hljs-literal">False</span>)<br>c<br><br>Out:<br>    <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">0</span><br>c   <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">0</span><br>a   <span class="hljs-number">9</span>   <span class="hljs-number">8</span>   <span class="hljs-number">7</span>   <span class="hljs-number">6</span>   <span class="hljs-number">5</span><br>d  <span class="hljs-number">14</span>  <span class="hljs-number">13</span>  <span class="hljs-number">12</span>  <span class="hljs-number">11</span>  <span class="hljs-number">10</span><br>b  <span class="hljs-number">19</span>  <span class="hljs-number">18</span>  <span class="hljs-number">17</span>  <span class="hljs-number">16</span>  <span class="hljs-number">15</span><br><br>In :<br>c = c.sort_index()<br>c<br><br>Out:<br>    <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">0</span><br>a   <span class="hljs-number">9</span>   <span class="hljs-number">8</span>   <span class="hljs-number">7</span>   <span class="hljs-number">6</span>   <span class="hljs-number">5</span><br>b  <span class="hljs-number">19</span>  <span class="hljs-number">18</span>  <span class="hljs-number">17</span>  <span class="hljs-number">16</span>  <span class="hljs-number">15</span><br>c   <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">0</span><br>d  <span class="hljs-number">14</span>  <span class="hljs-number">13</span>  <span class="hljs-number">12</span>  <span class="hljs-number">11</span>  <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h2 id="sort-values"><a href="#sort-values" class="headerlink" title=".sort_values()"></a>.sort_values()</h2><p>在指定轴上根据<strong>数值</strong>进行排序，默认升序</p><ul><li>.sort_values(axis=0,ascendinng=True)</li><li>DataFrame.sort_values(by,axis=0,ascending=True)    #by:axis轴上的某个索引或索引列表</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),index=[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>])<br>b<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br><br>In :<br>c = b.sort_values(<span class="hljs-number">2</span>,ascending=<span class="hljs-literal">False</span>)<br>c<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br><br>In :<br>c = c.sort_values(<span class="hljs-string">&#x27;a&#x27;</span>,axis=<span class="hljs-number">1</span>,ascending=<span class="hljs-literal">False</span>)<br>c<br><br>Out:<br>    <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">0</span><br>b  <span class="hljs-number">19</span>  <span class="hljs-number">18</span>  <span class="hljs-number">17</span>  <span class="hljs-number">16</span>  <span class="hljs-number">15</span><br>d  <span class="hljs-number">14</span>  <span class="hljs-number">13</span>  <span class="hljs-number">12</span>  <span class="hljs-number">11</span>  <span class="hljs-number">10</span><br>a   <span class="hljs-number">9</span>   <span class="hljs-number">8</span>   <span class="hljs-number">7</span>   <span class="hljs-number">6</span>   <span class="hljs-number">5</span><br>c   <span class="hljs-number">4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h2 id="NaN统一放到排序末尾"><a href="#NaN统一放到排序末尾" class="headerlink" title="NaN统一放到排序末尾"></a>NaN统一放到排序末尾</h2><img src="/2024/05/17/20240517_Pandas/image-20240518113034686.png" class="" title="image-20240518113034686"><h1 id="数据的基本统计分析"><a href="#数据的基本统计分析" class="headerlink" title="数据的基本统计分析"></a>数据的基本统计分析</h1><h2 id="适用于Series和DataFrame类型"><a href="#适用于Series和DataFrame类型" class="headerlink" title="适用于Series和DataFrame类型"></a>适用于Series和DataFrame类型</h2><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.sum()</td><td>计算数据的总和，<strong>按0轴计算</strong>，下同</td></tr><tr><td>.count()</td><td>非NaN值的数量</td></tr><tr><td>.mean() .median()</td><td>计算数据的算数平均值、算数中位值</td></tr><tr><td>.var() .std()</td><td>计算数据的方差、标准差</td></tr><tr><td>.min() .max()</td><td>计算数据的最小值、最大值</td></tr><tr><td>.describe()</td><td>针对0轴(各列)的统计汇总</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>a = pd.Series([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>],index=[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>])<br>a<br><br>Out:<br>a    <span class="hljs-number">9</span><br>b    <span class="hljs-number">8</span><br>c    <span class="hljs-number">7</span><br>d    <span class="hljs-number">6</span><br>dtype: int64<br><br>In :<br>a.describe()<br><br>Out:<br>count    <span class="hljs-number">4.000000</span><br>mean     <span class="hljs-number">7.500000</span><br>std      <span class="hljs-number">1.290994</span><br><span class="hljs-built_in">min</span>      <span class="hljs-number">6.000000</span><br><span class="hljs-number">25</span>%      <span class="hljs-number">6.750000</span><br><span class="hljs-number">50</span>%      <span class="hljs-number">7.500000</span><br><span class="hljs-number">75</span>%      <span class="hljs-number">8.250000</span><br><span class="hljs-built_in">max</span>      <span class="hljs-number">9.000000</span><br>dtype: float64<br><br>In :<br><span class="hljs-built_in">type</span>(a.describe())<br><br>Out:<br>pandas.core.series.Series<br><br>In :<br>a,describe()[<span class="hljs-string">&#x27;count&#x27;</span>]<br><br>Out:<br><span class="hljs-number">4.0</span><br><br>In :<br>a.describe()[<span class="hljs-string">&#x27;max&#x27;</span>]<br><br>Out:<br><span class="hljs-number">9.0</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),index=[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>])<br>b.describe()<br><br>Out:<br>               <span class="hljs-number">0</span>          <span class="hljs-number">1</span>          <span class="hljs-number">2</span>          <span class="hljs-number">3</span>          <span class="hljs-number">4</span><br>count   <span class="hljs-number">4.000000</span>   <span class="hljs-number">4.000000</span>   <span class="hljs-number">4.000000</span>   <span class="hljs-number">4.000000</span>   <span class="hljs-number">4.000000</span><br>mean    <span class="hljs-number">7.500000</span>   <span class="hljs-number">8.500000</span>   <span class="hljs-number">9.500000</span>  <span class="hljs-number">10.500000</span>  <span class="hljs-number">11.500000</span><br>std     <span class="hljs-number">6.454972</span>   <span class="hljs-number">6.454972</span>   <span class="hljs-number">6.454972</span>   <span class="hljs-number">6.454972</span>   <span class="hljs-number">6.454972</span><br><span class="hljs-built_in">min</span>     <span class="hljs-number">0.000000</span>   <span class="hljs-number">1.000000</span>   <span class="hljs-number">2.000000</span>   <span class="hljs-number">3.000000</span>   <span class="hljs-number">4.000000</span><br><span class="hljs-number">25</span>%     <span class="hljs-number">3.750000</span>   <span class="hljs-number">4.750000</span>   <span class="hljs-number">5.750000</span>   <span class="hljs-number">6.750000</span>   <span class="hljs-number">7.750000</span><br><span class="hljs-number">50</span>%     <span class="hljs-number">7.500000</span>   <span class="hljs-number">8.500000</span>   <span class="hljs-number">9.500000</span>  <span class="hljs-number">10.500000</span>  <span class="hljs-number">11.500000</span><br><span class="hljs-number">75</span>%    <span class="hljs-number">11.250000</span>  <span class="hljs-number">12.250000</span>  <span class="hljs-number">13.250000</span>  <span class="hljs-number">14.250000</span>  <span class="hljs-number">15.250000</span><br><span class="hljs-built_in">max</span>    <span class="hljs-number">15.000000</span>  <span class="hljs-number">16.000000</span>  <span class="hljs-number">17.000000</span>  <span class="hljs-number">18.000000</span>  <span class="hljs-number">19.000000</span><br><br>In :<br><span class="hljs-built_in">type</span>(b.describe())<br><br>Out:<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;pandas.core.frame.DataFrame&#x27;</span>&gt;<br><br>In :<br>b.describe().ix[<span class="hljs-string">&#x27;max&#x27;</span>] <span class="hljs-comment"># 在pandas版本0.20.0及其以后版本中，ix已经不被推荐使用，使用loc</span><br><br>Out:<br><span class="hljs-number">0</span>    <span class="hljs-number">15.0</span><br><span class="hljs-number">1</span>    <span class="hljs-number">16.0</span><br><span class="hljs-number">2</span>    <span class="hljs-number">17.0</span><br><span class="hljs-number">3</span>    <span class="hljs-number">18.0</span><br><span class="hljs-number">4</span>    <span class="hljs-number">19.0</span><br>Name: <span class="hljs-built_in">max</span>, dtype: float64<br><br>In :<br>b.describe()[<span class="hljs-number">2</span>]<br><br>Out:<br>count     <span class="hljs-number">4.000000</span>     <br>mean      <span class="hljs-number">9.500000</span>     <br>std       <span class="hljs-number">6.454972</span>     <br><span class="hljs-built_in">min</span>       <span class="hljs-number">2.000000</span>     <br><span class="hljs-number">25</span>%       <span class="hljs-number">5.750000</span>     <br><span class="hljs-number">50</span>%       <span class="hljs-number">9.500000</span>     <br><span class="hljs-number">75</span>%      <span class="hljs-number">13.250000</span>     <br><span class="hljs-built_in">max</span>      <span class="hljs-number">17.000000</span>     <br>Name: <span class="hljs-number">2</span>, dtype: float64<br></code></pre></td></tr></table></figure><h2 id="适用于Series类型"><a href="#适用于Series类型" class="headerlink" title="适用于Series类型"></a>适用于Series类型</h2><p>自动索引容易获得元素区间部分(做切片)，自定义索引很难得到一个序列，不易做切片</p><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.argmin() .argmax()</td><td>计算数据最大值、最小值所在位置的索引位置(自动索引)</td></tr><tr><td>.idxmin() .idxmax()</td><td>计算数据最大值、最小值所在位置的索引(自定义索引)</td></tr></tbody></table></div><h1 id="数据的累计统计分析"><a href="#数据的累计统计分析" class="headerlink" title="数据的累计统计分析"></a>数据的累计统计分析</h1><ul><li>减少for循环使用，数据运算更加灵活</li><li>适用于Series和DataFrame类型</li></ul><h2 id="普通计算"><a href="#普通计算" class="headerlink" title="普通计算"></a>普通计算</h2><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.cumsum()</td><td>依次给出前1、2、…、n个数的和</td></tr><tr><td>.cumprod()</td><td>依次给出前1、2、…、n个数的积</td></tr><tr><td>.cummax()</td><td>依次给出前1、2、…、n个数的最大值</td></tr><tr><td>.cummin()</td><td>依次给出前1、2、…、n个数的最小值</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),index=[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>])<br>b<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br><br>In :<br>b.cumsum()<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">7</span>   <span class="hljs-number">9</span>  <span class="hljs-number">11</span>  <span class="hljs-number">13</span><br>d  <span class="hljs-number">15</span>  <span class="hljs-number">18</span>  <span class="hljs-number">21</span>  <span class="hljs-number">24</span>  <span class="hljs-number">27</span><br>b  <span class="hljs-number">30</span>  <span class="hljs-number">34</span>  <span class="hljs-number">38</span>  <span class="hljs-number">42</span>  <span class="hljs-number">46</span><br><br>In :<br>b.cumprod()<br><br>Out:<br>   <span class="hljs-number">0</span>     <span class="hljs-number">1</span>     <span class="hljs-number">2</span>     <span class="hljs-number">3</span>     <span class="hljs-number">4</span><br>c  <span class="hljs-number">0</span>     <span class="hljs-number">1</span>     <span class="hljs-number">2</span>     <span class="hljs-number">3</span>     <span class="hljs-number">4</span><br>a  <span class="hljs-number">0</span>     <span class="hljs-number">6</span>    <span class="hljs-number">14</span>    <span class="hljs-number">24</span>    <span class="hljs-number">36</span><br>d  <span class="hljs-number">0</span>    <span class="hljs-number">66</span>   <span class="hljs-number">168</span>   <span class="hljs-number">312</span>   <span class="hljs-number">504</span><br>b  <span class="hljs-number">0</span>  <span class="hljs-number">1056</span>  <span class="hljs-number">2856</span>  <span class="hljs-number">5616</span>  <span class="hljs-number">9576</span><br><br>In :<br>b.cummin()<br><br>Out:<br>   <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br>c  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br>a  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br>d  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br>b  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span><br><br>In :<br>b.cummax()<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br></code></pre></td></tr></table></figure><h2 id="滚动计算-窗口计算"><a href="#滚动计算-窗口计算" class="headerlink" title="滚动计算(窗口计算)"></a>滚动计算(窗口计算)</h2><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.rolling(w).sum()</td><td>依次计算相邻w个元素的和</td></tr><tr><td>.rolling(w).mean()</td><td>依次计算相邻w个元素的算术平均值</td></tr><tr><td>.rolling(w).var()</td><td>依次计算相邻w个元素的方差</td></tr><tr><td>.rolling(w).std()</td><td>依次计算相邻w个元素的标准差</td></tr><tr><td>.rolling(w).min() .max()</td><td>依次计算相邻w个元素的最小值和最大值</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>b = pd.DataFrame(np.arange(<span class="hljs-number">20</span>).reshape(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),index=[<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>])<br>b<br><br>Out:<br>    <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>c   <span class="hljs-number">0</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span><br>a   <span class="hljs-number">5</span>   <span class="hljs-number">6</span>   <span class="hljs-number">7</span>   <span class="hljs-number">8</span>   <span class="hljs-number">9</span><br>d  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>  <span class="hljs-number">12</span>  <span class="hljs-number">13</span>  <span class="hljs-number">14</span><br>b  <span class="hljs-number">15</span>  <span class="hljs-number">16</span>  <span class="hljs-number">17</span>  <span class="hljs-number">18</span>  <span class="hljs-number">19</span><br><br>In :<br>b.rolling(<span class="hljs-number">2</span>).<span class="hljs-built_in">sum</span>()<br><br>Out:<br>      <span class="hljs-number">0</span>     <span class="hljs-number">1</span>     <span class="hljs-number">2</span>     <span class="hljs-number">3</span>     <span class="hljs-number">4</span><br>c   NaN   NaN   NaN   NaN   NaN<br>a   <span class="hljs-number">5.0</span>   <span class="hljs-number">7.0</span>   <span class="hljs-number">9.0</span>  <span class="hljs-number">11.0</span>  <span class="hljs-number">13.0</span><br>d  <span class="hljs-number">15.0</span>  <span class="hljs-number">17.0</span>  <span class="hljs-number">19.0</span>  <span class="hljs-number">21.0</span>  <span class="hljs-number">23.0</span><br>b  <span class="hljs-number">25.0</span>  <span class="hljs-number">27.0</span>  <span class="hljs-number">29.0</span>  <span class="hljs-number">31.0</span>  <span class="hljs-number">33.0</span><br><br>In :<br>b.rolling(<span class="hljs-number">3</span>).<span class="hljs-built_in">sum</span>()<br><br>Out:<br>      <span class="hljs-number">0</span>     <span class="hljs-number">1</span>     <span class="hljs-number">2</span>     <span class="hljs-number">3</span>     <span class="hljs-number">4</span><br>c   NaN   NaN   NaN   NaN   NaN<br>a   NaN   NaN   NaN   NaN   NaN<br>d  <span class="hljs-number">15.0</span>  <span class="hljs-number">18.0</span>  <span class="hljs-number">21.0</span>  <span class="hljs-number">24.0</span>  <span class="hljs-number">27.0</span><br>b  <span class="hljs-number">30.0</span>  <span class="hljs-number">33.0</span>  <span class="hljs-number">36.0</span>  <span class="hljs-number">39.0</span>  <span class="hljs-number">42.0</span><br></code></pre></td></tr></table></figure><h1 id="数据的相关分析"><a href="#数据的相关分析" class="headerlink" title="数据的相关分析"></a>数据的相关分析</h1><p>两个事物，表示为X和Y，如何判断他们之间的存在相关性？</p><ul><li>X增大，Y增大，两个变量<strong>正相关</strong></li><li>X增大，Y减小，两个变量<strong>负相关</strong></li><li>X增大，Y无视，两个变量<strong>不相关</strong></li></ul><h2 id="协方差"><a href="#协方差" class="headerlink" title="协方差"></a>协方差</h2> $$cov(X,Y)={{\textstyle \sum_{i=1}^{n}(X_i-\bar{X})(Y_i-\bar{Y})}\over{n-1}}$$ <ul><li>协方差&gt;0，X和Y正相关</li><li>协方差&lt;0，X和Y负相关</li><li>协方差=0，X和Y独立无关</li></ul><h2 id="Pearson相关系数"><a href="#Pearson相关系数" class="headerlink" title="Pearson相关系数"></a>Pearson相关系数</h2> $$r = {{{\textstyle \sum_{i=1}^{n}}(x_i-\bar{x})(y_i-\bar{y})}\over{\sqrt{\textstyle\sum_{i=1}^{n}(x_i-\bar{x})^2}}{\sqrt{\textstyle\sum_{i=1}^{n}(y_i-\bar{y})^2}}}$$ <ul><li>r的取值范围[-1,1]</li><li>0.8-1.0 极强相关</li><li>0.6-0.8 强相关</li><li>0.4-0.6 中等程度相关</li><li>0.2-0.4 弱相关</li><li>0.0-0.2 极弱相关或无相关</li></ul><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.cov()</td><td>计算协方差矩阵</td></tr><tr><td>.corr()</td><td>计算相关系数矩阵，Pearson、Spearman、Kendall等系数</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">In :<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br>hprice = pd.Series([<span class="hljs-number">3.03</span>,<span class="hljs-number">22.93</span>,<span class="hljs-number">12.75</span>,<span class="hljs-number">22.6</span>,<span class="hljs-number">12.33</span>],index=[<span class="hljs-string">&#x27;2008&#x27;</span>,<span class="hljs-string">&#x27;2009&#x27;</span>,<span class="hljs-string">&#x27;2010&#x27;</span>,<span class="hljs-string">&#x27;2011&#x27;</span>,<span class="hljs-string">&#x27;2012&#x27;</span>])<br>m2 = pd.Series([<span class="hljs-number">8.18</span>,<span class="hljs-number">18.18</span>,<span class="hljs-number">9.13</span>,<span class="hljs-number">7.82</span>,<span class="hljs-number">6.69</span>],index=[<span class="hljs-string">&#x27;2008&#x27;</span>,<span class="hljs-string">&#x27;2009&#x27;</span>,<span class="hljs-string">&#x27;2010&#x27;</span>,<span class="hljs-string">&#x27;2011&#x27;</span>,<span class="hljs-string">&#x27;2012&#x27;</span>])<br>hprice.corr(m2)<br><br>Out:<br><span class="hljs-number">0.5231190329758817</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>数据分析与展示</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据分析</tag>
      
      <tag>分析工具</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Matplotlib库入门</title>
    <link href="/2024/05/14/20240514_Matplotlib/"/>
    <url>/2024/05/14/20240514_Matplotlib/</url>
    
    <content type="html"><![CDATA[<h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><p>关键是如何根据数据特点找到合适的图形来呈现（<strong>图形的绘制以及具体参数设计需要经验</strong>）</p><p><a href="http://matplotlib.org/gallery.html">Matplotlib库的效果</a></p><p>数据可视化第三方库，由各种可视化类构成，内部结构复杂，受Matlab启发</p><p>mtaplotlib.pyplot是绘制各类可视化图形的命令子库，相当于快捷方式</p><h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>plt.plot([<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>])<span class="hljs-comment">#对于只有一个参数，则横坐标默认为其数组下标</span><br>plt.ylabel(<span class="hljs-string">&quot;Grade&quot;</span>)<br>plt.savefig(<span class="hljs-string">&#x27;test&#x27;</span>,dpi=<span class="hljs-number">600</span>)<span class="hljs-comment">#PNG文件</span><br>plt.show()<br></code></pre></td></tr></table></figure><p>plt.savefig()将输出图形存储为文件，默认PNG格式，可以通过dpi修改输出质量（每一英寸中包含点的数量）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>plt.plot([<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>])<span class="hljs-comment">#两个以上参数时，按照x轴和y轴顺序绘制数据点</span><br>plt.ylabel(<span class="hljs-string">&quot;Grade&quot;</span>)<br>plt.axis([-<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>])<span class="hljs-comment">#设置横纵坐标尺度的函数，参数为有四个变量的列表，如-1，10，表明x轴起始于-1，终止于10</span><br>plt.show()<br></code></pre></td></tr></table></figure><h2 id="绘图区域"><a href="#绘图区域" class="headerlink" title="绘图区域"></a>绘图区域</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.subplot(nrows,ncols,plot_number)<span class="hljs-comment">#横轴数量，纵轴数量，当前在绘图区的哪个区域</span><br>plt.subplot(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)<br>plt.subplot(<span class="hljs-number">324</span>)<br><span class="hljs-comment">###在全局绘图区域中创建一个分区体系，并定位到一个子绘图区域</span><br></code></pre></td></tr></table></figure><p><style>.mwihgltrwsox{zoom:50%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515120854321.png" class="mwihgltrwsox" alt="image-20240515120854321"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">t</span>):<br><span class="hljs-keyword">return</span> np.exp(-t)*np.cos(<span class="hljs-number">2</span>*np.pi*t)<br><br>a = np.arange(<span class="hljs-number">0.0</span>,<span class="hljs-number">5.0</span>,<span class="hljs-number">0.02</span>)<br><br>plt.subplot(<span class="hljs-number">211</span>)<br>plt.plot(a,f(a))<br><br>plt.subplot(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br>plt.plot(a,np.cos(<span class="hljs-number">2</span>*np.pi*a),<span class="hljs-string">&#x27;r--&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><h1 id="Pyplot的plot-函数"><a href="#Pyplot的plot-函数" class="headerlink" title="Pyplot的plot()函数"></a>Pyplot的plot()函数</h1><p>plt.plot(x,y,format_string,**kwargs)</p><ul><li>x：X轴数据，列表或数组，可选。</li><li>y：Y轴数据，列表或数组。</li><li>format_string：控制曲线的格式字符串，可选。</li><li>**kwargs：第二组或更多(x,y,format_string)<ul><li>color：控制颜色，color=’green’</li><li>linestyle：线条风格，linestyle=’dashed’</li><li>marker：标记风格，marker=’o’</li><li>markerfacecolor：标记颜色，markerfacecolor=’blue’</li><li>markersize：标记尺寸，markersize=20</li></ul></li></ul><h2 id="format-string"><a href="#format-string" class="headerlink" title="format_string"></a>format_string</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#尝试绘制四条曲线</span><br>a = np.arange(<span class="hljs-number">10</span>)<br>plt.plot(a,a*<span class="hljs-number">1.5</span>,<span class="hljs-string">&#x27;go-&#x27;</span>,a*<span class="hljs-number">2.5</span>,<span class="hljs-string">&#x27;rx&#x27;</span>,a,a*<span class="hljs-number">3.5</span>,<span class="hljs-string">&#x27;*&#x27;</span>,a,a*<span class="hljs-number">4.5</span>,<span class="hljs-string">&#x27;b-.&#x27;</span>)<br></code></pre></td></tr></table></figure><p><style>.ssvzpicsxljh{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515222115859.png" class="ssvzpicsxljh" alt="image-20240515222115859"></p><p>控制曲线的格式字符串，可选由颜色字符、风格字符和标记字符组成</p><h3 id="颜色字符"><a href="#颜色字符" class="headerlink" title="颜色字符"></a>颜色字符</h3><div class="table-container"><table><thead><tr><th>颜色字符</th><th>说明</th><th>颜色字符</th><th>说明</th></tr></thead><tbody><tr><td>‘b’</td><td>蓝色</td><td>‘m’</td><td>洋红色 magenta</td></tr><tr><td>‘g’</td><td>绿色</td><td>‘y’</td><td>黄色</td></tr><tr><td>‘r’</td><td>红色</td><td>‘k’</td><td>黑色</td></tr><tr><td>‘c’</td><td>青绿色</td><td>‘w’</td><td>白色</td></tr><tr><td>‘#008000’</td><td>RGB某颜色</td><td>‘0.8’</td><td>灰度值字符串</td></tr></tbody></table></div><h3 id="风格字符"><a href="#风格字符" class="headerlink" title="风格字符"></a>风格字符</h3><div class="table-container"><table><thead><tr><th>风格字符</th><th>说明</th></tr></thead><tbody><tr><td>‘-‘</td><td>实线</td></tr><tr><td>‘—‘</td><td>破折线</td></tr><tr><td>‘-.’</td><td>点划线</td></tr><tr><td>‘:’</td><td>虚线</td></tr><tr><td>‘ ‘  ‘ ‘</td><td>无线条</td></tr></tbody></table></div><h3 id="标记字符"><a href="#标记字符" class="headerlink" title="标记字符"></a>标记字符</h3><div class="table-container"><table><thead><tr><th>标记字符</th><th>说明</th><th>标记字符</th><th>说明</th><th>标记字符</th><th>说明</th></tr></thead><tbody><tr><td>‘.’</td><td>点标记</td><td>‘1’</td><td>下花三角标记</td><td>‘h’</td><td>竖六边形标记</td></tr><tr><td>‘,’</td><td>像素标记(极小点)</td><td>‘2’</td><td>上花三角标记</td><td>‘H’</td><td>横六边形标记</td></tr><tr><td>‘o’</td><td>实心圈标记</td><td>‘3’</td><td>左花三角标记</td><td>‘+’</td><td>十字标记</td></tr><tr><td>‘v’</td><td>倒三角标记</td><td>‘4’</td><td>右花三角标记</td><td>‘x’</td><td>x标记</td></tr><tr><td>‘^’</td><td>上三角标记</td><td>‘s’</td><td>实心方形标记</td><td>‘D’</td><td>菱形标记</td></tr><tr><td>‘&gt;’</td><td>右三角标记</td><td>‘p’</td><td>实心五角标记</td><td>‘d’</td><td>瘦菱形标记</td></tr><tr><td>‘&lt;’</td><td>左三角标记</td><td>‘*’</td><td>星形标记</td><td>‘\</td><td>‘</td><td>垂直线标记</td></tr></tbody></table></div><h1 id="Pyplot的中文显示"><a href="#Pyplot的中文显示" class="headerlink" title="Pyplot的中文显示"></a>Pyplot的中文显示</h1><p>pyplot并不默认支持中文显示</p><h2 id="rcParams"><a href="#rcParams" class="headerlink" title="rcParams"></a>rcParams</h2><p>rcParams修改字体实现</p><div class="table-container"><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>‘font.family’</td><td>用于显示字体的名字</td></tr><tr><td>‘font.style’</td><td>字体风格，正常’normal’或斜体’italic’</td></tr><tr><td>‘font.size’</td><td>字体大小，整数字号或者’large’、’x-small’</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib<br><br>matplotlib.rcParams[<span class="hljs-string">&#x27;font.family&#x27;</span>]=<span class="hljs-string">&#x27;SimHei&#x27;</span><br><span class="hljs-comment">#&#x27;SimHei&#x27; 中文黑体&#x27;Kaiti&#x27; 中文楷体&#x27;Lisu&#x27; 中文隶书</span><br><span class="hljs-comment">#&#x27;FangSong&#x27; 中文仿宋&#x27;YouYuan&#x27; 中文幼圆&#x27;STSong&#x27; 华文宋体</span><br>plt.plot([<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>])<br>plt.ylabel(<span class="hljs-string">&quot;纵轴(值)&quot;</span>)<br>plt.savefig(<span class="hljs-string">&#x27;test&#x27;</span>,dpi=<span class="hljs-number">600</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.wyizlqmmqgvr{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515223858518.png" class="wyizlqmmqgvr" alt="image-20240515223858518"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib<br><br>matplotlib.rcParams[<span class="hljs-string">&#x27;font.family&#x27;</span>]=<span class="hljs-string">&#x27;STSong&#x27;</span><br>matplotlib.rcParams[<span class="hljs-string">&#x27;font,.size&#x27;</span>]=<span class="hljs-number">20</span><br><br>a = np.arange(<span class="hljs-number">0.0</span>,<span class="hljs-number">5.0</span>,<span class="hljs-number">0.02</span>)<br><br>plt.xlabel(<span class="hljs-string">&#x27;横轴：时间&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;纵轴：振幅&#x27;</span>)<br>plt.plot(a,np.cos(<span class="hljs-number">2</span>*np.pi*a),<span class="hljs-string">&#x27;r--&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.jlziotuxpmwo{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515225245367.png" class="jlziotuxpmwo" alt="image-20240515225245367"></p><h2 id="fontproperties"><a href="#fontproperties" class="headerlink" title="fontproperties"></a>fontproperties</h2><p>在有中文输出的地方，增加一个属性：fontproperties</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>a = np.arange(<span class="hljs-number">0.0</span>,<span class="hljs-number">5.0</span>,<span class="hljs-number">0.02</span>)<br><br>plt.xlabel(<span class="hljs-string">&#x27;横轴：时间&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">20</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;纵轴：振幅&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">20</span>)<br>plt.plot(a,np.cos(<span class="hljs-number">2</span>*np.pi*a),<span class="hljs-string">&#x27;r--&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><h1 id="Pyplot的文本显示"><a href="#Pyplot的文本显示" class="headerlink" title="Pyplot的文本显示"></a>Pyplot的文本显示</h1><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>plt.xlabel()</td><td>对x轴增加文本标签</td></tr><tr><td>plt.ylabel()</td><td>对y轴增加文本标签</td></tr><tr><td>plt.title()</td><td>对图形整体增加文本标签</td></tr><tr><td>plt.text()</td><td>在任意位置增加文本</td></tr><tr><td>plt.annotate()</td><td>在图形中增加带箭头的注解</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>a = np.arange(<span class="hljs-number">0.0</span>,<span class="hljs-number">5.0</span>,<span class="hljs-number">0.02</span>)<br>plt.plot(a,np.cos(<span class="hljs-number">2</span>*np.pi*a),<span class="hljs-string">&#x27;r--&#x27;</span>)<br><br>plt.xlabel(<span class="hljs-string">&#x27;横轴：时间&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">15</span>,color=<span class="hljs-string">&#x27;green&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;纵轴：振幅&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">15</span>)<br>plt.title(<span class="hljs-string">r&#x27;正弦波实例 $y=cos(2\pi x)$&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">25</span>)<br>plt.text(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">r&#x27;$\mu=100$&#x27;</span>,fontsize=<span class="hljs-number">15</span>)<br><br>plt.axis([-<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,-<span class="hljs-number">2</span>,<span class="hljs-number">2</span>])<br>plt.grid(<span class="hljs-literal">True</span>)<span class="hljs-comment">#网格</span><br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.qezsgtmivimx{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515231710356.png" class="qezsgtmivimx" alt="image-20240515231710356"></p><h2 id="plt-annotate"><a href="#plt-annotate" class="headerlink" title="plt.annotate()"></a>plt.annotate()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.annotate(s,xy=arrow_crd,xytext=text_crd,arrowprops=<span class="hljs-built_in">dict</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>a = np.arange(<span class="hljs-number">0.0</span>,<span class="hljs-number">5.0</span>,<span class="hljs-number">0.02</span>)<br>plt.plot(a,np.cos(<span class="hljs-number">2</span>*np.pi*a),<span class="hljs-string">&#x27;r--&#x27;</span>)<br><br>plt.xlabel(<span class="hljs-string">&#x27;横轴：时间&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">15</span>,color=<span class="hljs-string">&#x27;green&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;纵轴：振幅&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">15</span>)<br>plt.title(<span class="hljs-string">r&#x27;正弦波实例 $y=cos(2\pi x)$&#x27;</span>,fontproperties=<span class="hljs-string">&#x27;SimHei&#x27;</span>,fontsize=<span class="hljs-number">25</span>)<br>plt.annotate(<span class="hljs-string">r&#x27;$\mu=100$&#x27;</span>,xy=(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),xytext=(<span class="hljs-number">3</span>,<span class="hljs-number">1.5</span>),<br>arrowprops=<span class="hljs-built_in">dict</span>(facecolor=<span class="hljs-string">&#x27;black&#x27;</span>,shrink=<span class="hljs-number">0.1</span>,width=<span class="hljs-number">2</span>))<br><br>plt.axis([-<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,-<span class="hljs-number">2</span>,<span class="hljs-number">2</span>])<br>plt.grid(<span class="hljs-literal">True</span>)<span class="hljs-comment">#网格</span><br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.dyikicqljhsw{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515232559993.png" class="dyikicqljhsw" alt="image-20240515232559993"></p><h1 id="PyPlot子绘图区域"><a href="#PyPlot子绘图区域" class="headerlink" title="PyPlot子绘图区域"></a>PyPlot子绘图区域</h1><h2 id="subplot2grid"><a href="#subplot2grid" class="headerlink" title="subplot2grid"></a>subplot2grid</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.subplot2grid(GridSpec,CurSPec,colspan=<span class="hljs-number">1</span>,rowspan=<span class="hljs-number">1</span>)<br><span class="hljs-comment">#理念：设定网格，选中网格，确定选中行列区域数量，编号从0开始</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),colspan=<span class="hljs-number">3</span>)<br>...<br>plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),colspan=<span class="hljs-number">2</span>) <span class="hljs-comment">#(3,3)三行三列九块(1,0)表示第一行第零列colspan表示列的延申</span><br>...<br>plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),rowspan=<span class="hljs-number">2</span>)<br>...<br>plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">0</span>))<br>...<br>plt.subplot2grid((<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>))<br>...<br></code></pre></td></tr></table></figure><p><style>.jdftekezupvp{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240515235038838.png" class="jdftekezupvp" alt="image-20240515235038838"></p><h2 id="GridSpec类"><a href="#GridSpec类" class="headerlink" title="GridSpec类"></a>GridSpec类</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.gridspec <span class="hljs-keyword">as</span> gridspec<br><br>gs = gridspec.GridSpec(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)<br><br>ax1 = plt.subplot(gs[<span class="hljs-number">0</span>,:])<br>ax2 = plt.subplot(gs[<span class="hljs-number">1</span>,:-<span class="hljs-number">1</span>])<br>ax3 = plt.subplot(gs[<span class="hljs-number">1</span>:,-<span class="hljs-number">1</span>])<br>ax4 = plt.subplot(gs[<span class="hljs-number">2</span>,<span class="hljs-number">0</span>])<br>ax5 = plt.subplot(gs[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h1 id="Pyplot基础图标函数"><a href="#Pyplot基础图标函数" class="headerlink" title="Pyplot基础图标函数"></a>Pyplot基础图标函数</h1><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>plt.plot(x,y,fmt,…)</td><td>绘制一个坐标图</td><td>plt.psd(x,NFFT=256,pad_to,Fs)</td><td>绘制功率密度图</td></tr><tr><td>plt.boxplot(data,notch,position)</td><td>绘制一个箱型图</td><td>plt.specgram(x,NFFT=256,pad_to,F)</td><td>绘制谱图</td></tr><tr><td>plt.bar(left,height,width,bottom)</td><td>绘制一个条形图</td><td>pltcohere(x,y,NFFT=256,Fs)</td><td>绘制X-Y的相关性函数</td></tr><tr><td>plt.barh(width,bottom,left,height)</td><td>绘制一个横向条形图</td><td>plt.scatter(x,y)</td><td>绘制散点图，其中，x和y长度相同</td></tr><tr><td>plt.polar(theta,r)</td><td>绘制极坐标图</td><td>plt.step(x,y,where)</td><td>绘制步阶图</td></tr><tr><td>plt.pie(data,explode)</td><td>绘制饼图</td><td>plt.hist(x,bins,normed)</td><td>绘制直方图</td></tr><tr><td>plt.contour(X,Y,Z,N)</td><td>绘制等值图</td><td>plt.stem(x,y,linefmt,markerfmt)</td><td>绘制柴火图</td></tr><tr><td>plt.vlines()</td><td>绘制垂直图</td><td>plt.plot_date()</td><td>绘制数据日期</td></tr></tbody></table></div><h2 id="Pyplot的饼图绘制"><a href="#Pyplot的饼图绘制" class="headerlink" title="Pyplot的饼图绘制"></a>Pyplot的饼图绘制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>labels = <span class="hljs-string">&#x27;Forgs&#x27;</span>,<span class="hljs-string">&#x27;Hogs&#x27;</span>,<span class="hljs-string">&#x27;Dogs&#x27;</span>,<span class="hljs-string">&#x27;Logs&#x27;</span><br>sizes = [<span class="hljs-number">15</span>,<span class="hljs-number">30</span>,<span class="hljs-number">45</span>,<span class="hljs-number">10</span>]<br>explode = (<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br><br>plt.pie(sizes,explode=explode,labels=labels,autopct=<span class="hljs-string">&#x27;%1.1f%%&#x27;</span>,<br>    shadow=<span class="hljs-literal">False</span>,startangle=<span class="hljs-number">90</span>)<br><span class="hljs-comment">#explode：哪一块应该突出出来 label：标签autoopct：中间显示百分号的方式</span><br><span class="hljs-comment">#shadow：饼图是否带有阴影效果startangle：饼图起始角度</span><br>plt.axis(<span class="hljs-string">&#x27;equal&#x27;</span>)<br><span class="hljs-comment">#饼图变成标准圆饼图</span><br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.xqlrvwwhsesg{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240516121839567.png" class="xqlrvwwhsesg" alt="image-20240516121839567"></p><h2 id="Pyplot的直方图绘制"><a href="#Pyplot的直方图绘制" class="headerlink" title="Pyplot的直方图绘制"></a>Pyplot的直方图绘制</h2><p>直方图，看数据分布</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>np.random.seed(<span class="hljs-number">0</span>)<br>mu,sigma = <span class="hljs-number">100</span>,<span class="hljs-number">20</span><br>a = np.random.normal(mu,sigma,size=<span class="hljs-number">100</span>)<br><br>plt.hist(a,<span class="hljs-number">20</span>,normed=<span class="hljs-number">1</span>,histtype=<span class="hljs-string">&#x27;stepfilled&#x27;</span>,facecolor=<span class="hljs-string">&#x27;b&#x27;</span>,alpha=<span class="hljs-number">0.75</span>)<br><span class="hljs-comment">#bin：最小值和最大值之间均分，分割的直方图的个数</span><br><span class="hljs-comment">#normed=1时，将每一个区间数出现的个数归一化为出现的概率</span><br>plt.title(<span class="hljs-string">&#x27;Histogram&#x27;</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.vclsxrjuthmf{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240516122227339.png" class="vclsxrjuthmf" alt="image-20240516122227339"></p><h2 id="Pyplot极坐标绘制"><a href="#Pyplot极坐标绘制" class="headerlink" title="Pyplot极坐标绘制"></a>Pyplot极坐标绘制</h2><p>面向对象绘制极坐标（体会即可）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>N = <span class="hljs-number">20</span><br>theta = np.linspace(<span class="hljs-number">0.0</span>,<span class="hljs-number">2</span>*np.pi,N,edpoint=<span class="hljs-literal">False</span>)<br><span class="hljs-comment">#从0到2pi等分出N个不同角度</span><br>radii = <span class="hljs-number">10</span>*np.random.rand(N)<br><span class="hljs-comment">#生成每个角度对应的值</span><br>width = np.pi / <span class="hljs-number">4</span> * np.random.rand(N)<br><br>ax = plt.subplot(<span class="hljs-number">111</span>,projection=<span class="hljs-string">&#x27;ploar&#x27;</span>)<br><span class="hljs-comment">#子绘图区域形成的对象，projection作出绘制极坐标指示</span><br>bars = ax.bar(theta,radii,wiidth=width,bottom=<span class="hljs-number">0.0</span>)<br><span class="hljs-comment">#theta:leftradii:height</span><br><span class="hljs-keyword">for</span> r,bar <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(radii,bars):<br>bar.set_facecolor(plt.cm.viridis(r/<span class="hljs-number">10.</span>))<br>bar.set_alpha(<span class="hljs-number">0.5</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.mgjhsaltkdaf{zoom:67%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240516165312870.png" class="mgjhsaltkdaf" alt="image-20240516165312870"></p><h2 id="Pyplot散点图绘制"><a href="#Pyplot散点图绘制" class="headerlink" title="Pyplot散点图绘制"></a>Pyplot散点图绘制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>fig,ax = plt.subplots()<br><span class="hljs-comment">#ax为绘图区域对象，这里没参数则默认为111</span><br>ax.plot(<span class="hljs-number">10</span>*np.random.randn(<span class="hljs-number">100</span>),<span class="hljs-number">10</span>*np.random.randn(<span class="hljs-number">100</span>),<span class="hljs-string">&#x27;o&#x27;</span>)<br><span class="hljs-comment">#正态产生的点搞分散些</span><br>ax.set_title(<span class="hljs-string">&#x27;Simple Scatter&#x27;</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p><style>.illsdqhshevg{zoom: 80%;}</style><img src="/2024/05/14/20240514_Matplotlib/image-20240516210019547.png" class="illsdqhshevg" alt="image-20240516210019547"></p><h1 id="引力波的绘制示例"><a href="#引力波的绘制示例" class="headerlink" title="引力波的绘制示例"></a>引力波的绘制示例</h1><p>物理学中，引力波是因为时空弯曲对外以辐射形式传播的能量</p><p>爱因斯坦基于广义相对论预言了引力波的存在</p><img src="/2024/05/14/20240514_Matplotlib/image-20240516211005225.png" class="" title="image-20240516211005225"><p>绘制最原始的引力波和理想引力波</p><p><a href="[Draw of Gravitational Waves (python123.io">下载三个文件</a>](<a href="https://python123.io/dv/grawave.html">https://python123.io/dv/grawave.html</a>))</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> scipy.io <span class="hljs-keyword">import</span> wavfile<br><br>rate_h,hstrain = wavfile.read(<span class="hljs-string">r&quot;H1_Strain.wav&quot;</span>,<span class="hljs-string">&quot;rb&quot;</span>)<br>rate_l,lstrain = wavfile.read(<span class="hljs-string">r&quot;L1_Strain.wav&quot;</span>,<span class="hljs-string">&quot;rb&quot;</span>)<br>reftime,ref_H1 = np.genfromtxt(<span class="hljs-string">&#x27;wf_template.txt&#x27;</span>).transpose()<br><span class="hljs-comment">#np.genfromtxt中有两个循环，第一个循环将文件每一行都转化为字符串序列，第二个循环将每一个字符串序列转化成相应数据类型</span><br><span class="hljs-comment">#这样生成一个两行的矩阵，不便于拆分，因此用transpose进行转置</span><br>htime_interval = <span class="hljs-number">1</span>/rate_h<br>ltime_interval = <span class="hljs-number">1</span>/rate_l<br><span class="hljs-comment">#速率求导数获得波形的时间间隔</span><br>htime_len = hstrain.shape[<span class="hljs-number">0</span>]/rate_h<br><span class="hljs-comment">#strain是一个数据矩阵，shape[0]指的是获取第一维度的长度，即数据点的个数，数据个数乘上时间间隔得坐标轴总长度</span><br>htime = np.arange(-htime_len/<span class="hljs-number">2</span>,htime_len/<span class="hljs-number">2</span>,htime_interval)<br>ltime_len = lstrain.shape[<span class="hljs-number">0</span>]/rate_l<br>ltime = np.arange(-ltime_len/<span class="hljs-number">2</span>,ltime_len/<span class="hljs-number">2</span>,ltime_interval)<br><br><span class="hljs-comment">###绘制H1 Strain###</span><br>fig = plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">6</span>))<span class="hljs-comment">#创建一个大小为12*6的绘图空间</span><br><br>plth = fig.add_subplot(<span class="hljs-number">221</span>)<br>plth.plot(htime,hstrain,<span class="hljs-string">&#x27;y&#x27;</span>)<br>plth.set_xlabel(<span class="hljs-string">&#x27;Time(seconds)&#x27;</span>)<br>plth.set_ylabel(<span class="hljs-string">&#x27;H1 Strain&#x27;</span>)<br>plth.set_title(<span class="hljs-string">&#x27;H1 Strain&#x27;</span>)<br><br>pltl = fig.add_subplot(<span class="hljs-number">222</span>)<br>pltl.plot(ltime,lstrain,<span class="hljs-string">&#x27;g&#x27;</span>)<br>pltl.set_xlabel(<span class="hljs-string">&#x27;Time(seconds)&#x27;</span>)<br>pltl.set_ylabel(<span class="hljs-string">&#x27;L1 Strain&#x27;</span>)<br>pltl.set_title(<span class="hljs-string">&#x27;L1 Strain&#x27;</span>)<br><br>pltref = fig.add_subplot(<span class="hljs-number">212</span>)<br>pltref.plot(reftime,ref_H1)<br>pltref.set_xlabel(<span class="hljs-string">&#x27;Time(seconds)&#x27;</span>)<br>pltref.set_ylabel(<span class="hljs-string">&#x27;Template Strain&#x27;</span>)<br>pltref.set_title(<span class="hljs-string">&#x27;Template&#x27;</span>)<br>fig.tight_layout()<span class="hljs-comment">#自动调整图像外围间距</span><br><br>plt.savefig(<span class="hljs-string">&quot;Gravitational_waves_Original.png&quot;</span>)<br>plt.show()<br>plt.close(fig)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>数据分析与展示</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据分析</tag>
      
      <tag>分析工具</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python虚拟环境</title>
    <link href="/2024/05/08/20240508_virtualEnv/"/>
    <url>/2024/05/08/20240508_virtualEnv/</url>
    
    <content type="html"><![CDATA[<h1 id="系统解释器"><a href="#系统解释器" class="headerlink" title="系统解释器"></a>系统解释器</h1><ol><li><p>在<a href="https://www.python.org/">python官网</a>下载了python解释器(实际上就是一个软件)</p></li><li><p>将下载好的python解释器安装在<code>D:\Python39</code>目录下</p></li><li><p>那么，在这个目录下就会生成一系列的文件，下面我们了解一下最主要的几个内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cobol">D:\Python39<br>    - python.exe#python解释器<br>    - Scripts#目录：存放可执行文件<br>        - pip.exe<br>        - pip3.exe<br>        - pip3.9.exe<br>    - Lib#目录：存放python内置的模块<br>        - random.py<br>        - re.py<br>        - json.py<br>        - site-packages#目录：存放通过pip安装的第三方模块<br>            - requests.py<br></code></pre></td></tr></table></figure></li></ol><p>在我们的电脑上，同时可以安装多个版本的系统解释器(如：python3.8，python3.9，python3.10)</p><h1 id="环境变量的配置"><a href="#环境变量的配置" class="headerlink" title="环境变量的配置"></a>环境变量的配置</h1><ol><li><p>我们的电脑可以安装多个版本的解释器</p></li><li><p>但是，我们在日常开发中会选择一个系统解释器作为主运用的解释器</p></li><li><p>我们就会将这个版本的解释器的目录添加到环境变量中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cobol">D:\Python39<br>D:\Python39\Scripts\<br></code></pre></td></tr></table></figure></li><li><p>那么，我们就可以在cmd终端中直接用python来调用解释器</p></li><li><p>实际就是通过环境变量中的D:\Python39路径来找到 python.exe</p></li><li><p>在cmd中运行pip install安装第三方模块</p></li><li><p>实际就是通过环境变量中的 D:\Python39\Scripts\ 路径来找到 pip.exe</p></li></ol><h1 id="如何使用虚拟环境"><a href="#如何使用虚拟环境" class="headerlink" title="如何使用虚拟环境"></a>如何使用虚拟环境</h1><h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">conda create –n py311 python=<span class="hljs-number">3.11</span><br><span class="hljs-comment"># -n : 虚拟环境的名称</span><br><span class="hljs-comment"># python= : 下载的版本号</span><br><span class="hljs-comment"># 如果下载的不是python3.7版本，将python=()改成相应的版本</span><br></code></pre></td></tr></table></figure><h2 id="进入虚拟环境"><a href="#进入虚拟环境" class="headerlink" title="进入虚拟环境"></a>进入虚拟环境</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda activate py311<br></code></pre></td></tr></table></figure><h2 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda deactivate<br></code></pre></td></tr></table></figure><h2 id="删除自定义环境"><a href="#删除自定义环境" class="headerlink" title="删除自定义环境"></a>删除自定义环境</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda remove --name py311 --<span class="hljs-built_in">all</span><br></code></pre></td></tr></table></figure><h2 id="查看虚拟环境"><a href="#查看虚拟环境" class="headerlink" title="查看虚拟环境"></a>查看虚拟环境</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda env <span class="hljs-built_in">list</span><br></code></pre></td></tr></table></figure><h2 id="查看环境中的包"><a href="#查看环境中的包" class="headerlink" title="查看环境中的包"></a>查看环境中的包</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda <span class="hljs-built_in">list</span><br></code></pre></td></tr></table></figure><h2 id="在虚拟环境中安装、卸载、更新包"><a href="#在虚拟环境中安装、卸载、更新包" class="headerlink" title="在虚拟环境中安装、卸载、更新包"></a>在虚拟环境中安装、卸载、更新包</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">conda install python=<span class="hljs-number">3.6</span>  激活虚拟环境后安装包 (可以指定版本)<br>conda remove packname 激活虚拟环境后移除包<br>conda update packname 激活虚拟环境后更新包<br></code></pre></td></tr></table></figure><h1 id="在miniconda3安装spyter"><a href="#在miniconda3安装spyter" class="headerlink" title="在miniconda3安装spyter"></a>在miniconda3安装spyter</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install sip <span class="hljs-comment">##下载太慢了自己用vpn或者换源</span><br>pip.exe install --pre pyqt5-tools~=<span class="hljs-number">5.11</span> <span class="hljs-comment">##这里记得切换环境到3.11</span><br>pip install spyder<br>spyder<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>环境配置</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NumPy库入门</title>
    <link href="/2024/04/30/20240430_numPy/"/>
    <url>/2024/04/30/20240430_numPy/</url>
    
    <content type="html"><![CDATA[<p>掌握表示、清洗、统计和展示数据的能力</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>NumPy是一个开源的Python科学计算基础库，底层实现是用C语言实现，实现数组时底层提供高效运算性能。</p><ul><li>一个强大的N维数组对象ndarray</li><li>广播功能函数</li><li>整合C/C++/Fortran代码的工具</li><li>线性代数、傅里叶变换、随机数生成等功能</li></ul><p>Numpy是SciPy、Pandas等数据处理或科学计算库的基础。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#引用</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br></code></pre></td></tr></table></figure><h1 id="数据表示"><a href="#数据表示" class="headerlink" title="数据表示"></a>数据表示</h1><h2 id="数据的维度"><a href="#数据的维度" class="headerlink" title="数据的维度"></a>数据的维度</h2><p>从一个数据到一组数据，一个数据表达一个含义，一组数据表达一个或多个含义。维度是一组数据的组织形式。数据之间的关系。</p><h3 id="一维数据"><a href="#一维数据" class="headerlink" title="一维数据"></a>一维数据</h3><p>由对等关系的有序或无序数据构成，采用线性方式组织。（对应<strong>列表</strong>、数组和<strong>集合</strong>等概念）</p><h4 id="列表和数组"><a href="#列表和数组" class="headerlink" title="列表和数组"></a>列表和数组</h4><p>一组数据的有序结构，区别：</p><p>列表：数据类型可以不同。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">3.14</span>,<span class="hljs-string">&#x27;pi&#x27;</span>,<span class="hljs-number">3.1404</span>,[<span class="hljs-number">3.1401</span>,<span class="hljs-number">3.1349</span>],<span class="hljs-string">&#x27;3.1376&#x27;</span><br></code></pre></td></tr></table></figure><p>数组：数据型相同</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">3.1413</span>，<span class="hljs-number">3.1313</span>，<span class="hljs-number">3.1234</span>，<span class="hljs-number">3.1451</span>，<span class="hljs-number">3.5161</span><br></code></pre></td></tr></table></figure><h3 id="二维数据"><a href="#二维数据" class="headerlink" title="二维数据"></a>二维数据</h3><p>二维数据由多个一维数据构成,是一维数据的组合形式。</p><div class="table-container"><table><thead><tr><th>排名</th><th>学校</th><th>总分</th></tr></thead><tbody><tr><td>1</td><td>清华</td><td>100.0</td></tr><tr><td>2</td><td>北大</td><td>99.8</td></tr><tr><td>3</td><td>浙大</td><td>98.8</td></tr></tbody></table></div><h3 id="多维数据"><a href="#多维数据" class="headerlink" title="多维数据"></a>多维数据</h3><p>多维数据由一维或二维数据在新维度扩展形成。<strong>2023-&gt;2024，时间维度</strong>。</p><div class="table-container"><table><thead><tr><th>排名</th><th>学校</th><th>总分</th></tr></thead><tbody><tr><td>1</td><td>清华</td><td>100.0</td></tr><tr><td>2</td><td>北大</td><td>99.8</td></tr><tr><td>3</td><td>浙大</td><td>98.8</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>排名</th><th>学校</th><th>总分</th></tr></thead><tbody><tr><td>1</td><td>清华</td><td>100.0</td></tr><tr><td>2</td><td>北大</td><td>99.6</td></tr><tr><td>3</td><td>浙大</td><td>98.7</td></tr></tbody></table></div><h3 id="高维数据"><a href="#高维数据" class="headerlink" title="高维数据"></a>高维数据</h3><p>高维数据仅仅利用最基本的二元关系展示数据间的复杂结构。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">&#123;<br><span class="hljs-string">&quot;firstName&quot;</span>:<span class="hljs-string">&quot;Tian&quot;</span>,<br><span class="hljs-string">&quot;lastName&quot;</span>:<span class="hljs-string">&quot;Song&quot;</span>,<br><span class="hljs-string">&quot;address&quot;</span>:&#123;<br><span class="hljs-string">&quot;streetAddr&quot;</span>:<span class="hljs-string">&quot;中关村南大街5号&quot;</span>,<br><span class="hljs-string">&quot;city&quot;</span>:<span class="hljs-string">&quot;北京市&quot;</span>,<br><span class="hljs-string">&quot;zipcode&quot;</span>:<span class="hljs-string">&quot;1000081&quot;</span><br>&#125;,<br><span class="hljs-string">&quot;prof&quot;</span>:[<span class="hljs-string">&quot;Computer System&quot;</span>,<span class="hljs-string">&quot;Security&quot;</span>]<br>&#125;<br><span class="hljs-comment">#键值对组织</span><br><span class="hljs-comment">#没有数据规整的组织方式，却有数据间的包含关系、数据间的并列关系以及数据间的属性关系等，形成了数据的组织方式</span><br></code></pre></td></tr></table></figure><h3 id="如何表示"><a href="#如何表示" class="headerlink" title="如何表示"></a>如何表示</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#一维数据</span><br>[<span class="hljs-number">3.1413</span>，<span class="hljs-number">3.1313</span>，<span class="hljs-number">3.1234</span>，<span class="hljs-number">3.1451</span>，<span class="hljs-number">3.5161</span>]有序、列表<br>&#123;<span class="hljs-number">3.1413</span>，<span class="hljs-number">3.1313</span>，<span class="hljs-number">3.1234</span>，<span class="hljs-number">3.1451</span>，<span class="hljs-number">3.5161</span>&#125;无序、集合<br><br><span class="hljs-comment">#二维数据</span><br>[[<span class="hljs-number">3.1413</span>，<span class="hljs-number">3.1313</span>，<span class="hljs-number">3.1234</span>],<br> [<span class="hljs-number">3.1234</span>，<span class="hljs-number">3.1451</span>，<span class="hljs-number">3.5161</span>]]列表<br><br><span class="hljs-comment">#多维数据</span><br>列表<br><br><span class="hljs-comment">#高维数据</span><br>字典类型或数据表示格式(JSON、XML和YAML格式)<br><span class="hljs-built_in">dict</span> = &#123;<br>    <span class="hljs-string">&quot;firstName&quot;</span>:<span class="hljs-string">&quot;Tian&quot;</span>,<br>    <span class="hljs-string">&quot;lastName&quot;</span>:<span class="hljs-string">&quot;Song&quot;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="数组对象-ndarray"><a href="#数组对象-ndarray" class="headerlink" title="数组对象:ndarray"></a>数组对象:ndarray</h2><ul><li><p>数组对象可以去掉元素间运算间运算所需的循环，使一维向量更像单个数据。</p></li><li><p>设置专门的数组对象，经过优化，可以提升这类应用的运算速度。</p></li><li><p>观察：科学计算中，一个维度所有数据的类型往往相同。</p></li><li><p>数组对象采用相同的数据类型，有助于节省运算和存储空间。</p></li><li><p>ndarray是一个多维数组对象，由两部分构成：</p><ul><li>实际的数据</li><li>描述这些数据的元素据（数据维度、数据类型等）</li></ul><p>ndarray数组一般要求所有元素类型相同（同质），数组下标从0开始。</p></li></ul><p>例：计算$A^2+B^3$，其中，A和B是一维数组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">pySum</span>():<br>a = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<br>b = [<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>]<br>c = []<br>    <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(a)):<br>c.append(a[i]**<span class="hljs-number">2</span> + b[i]**<span class="hljs-number">3</span>)<br><br><span class="hljs-keyword">return</span> c<br><br><span class="hljs-built_in">print</span>(pySum())<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">npSum</span>():<br>a = np.array([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>])<br>b = np.array([<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>])<br><br>c = a**<span class="hljs-number">2</span> + b**<span class="hljs-number">3</span><br><br><span class="hljs-keyword">return</span> c<br><br><span class="hljs-built_in">print</span>(npSum())<br><br><span class="hljs-comment">#np.array()生成一个ndarray数组</span><br><span class="hljs-comment">#ndarray在程序中的别名是：array</span><br><span class="hljs-comment">#np.array()输出成[]形式，元素由空格分割</span><br><span class="hljs-comment">#轴(axis):保存数据的维度秩(rank):轴的数量</span><br></code></pre></td></tr></table></figure><h3 id="ndarray对象的属性"><a href="#ndarray对象的属性" class="headerlink" title="ndarray对象的属性"></a>ndarray对象的属性</h3><div class="table-container"><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>.ndim</td><td>秩，即轴数量或维度的数量</td></tr><tr><td>.shape</td><td>ndarray对象的尺度，对于矩阵，n行m列</td></tr><tr><td>.size</td><td>ndarray对象元素的个数，相当于.shape中n*m的值</td></tr><tr><td>.dtype</td><td>ndarray对象的元素类型</td></tr><tr><td>.itemsize</td><td>ndarray对象中每个元素的大小，以字节为单位</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">22</span>]: a = np.array([[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<br>[<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>]])<br>    <br>In [<span class="hljs-number">23</span>]: a.ndim<br>Out[<span class="hljs-number">23</span>]: <span class="hljs-number">2</span><br>    <br>In [<span class="hljs-number">24</span>]: a.shape<br>Out[<span class="hljs-number">24</span>]: (<span class="hljs-number">2</span>,<span class="hljs-number">5</span>)<br>    <br>In [<span class="hljs-number">25</span>]: a.size<br>Out[<span class="hljs-number">25</span>]: <span class="hljs-number">10</span><br>    <br>In [<span class="hljs-number">26</span>]: a.dtype<br>Out[<span class="hljs-number">26</span>]: dtype(<span class="hljs-string">&#x27;int32&#x27;</span>)<br>    <br>In [<span class="hljs-number">27</span>]: a.itemsize<br>Out[<span class="hljs-number">27</span>]: <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td>intc</td><td>与C语言中的int类型一直，一般是int32或int64</td></tr><tr><td>intp</td><td>用于索引的整数，与C语言中ssize_t一致，int32或int64</td></tr><tr><td>int8</td><td>字节长度整数，取值：[-128,127]</td></tr><tr><td>int16</td><td>16位长度整数，取值：[-32768,32767]</td></tr><tr><td>int32</td><td>32位长度整数，取值：[$-2^31,2^31-1$]</td></tr><tr><td>int64</td><td>64位长度整数，取值：[-2^63,2^63-1]</td></tr><tr><td>uint64</td><td>64位无符号整数，取值：[0,2^64-1]</td></tr><tr><td>float64</td><td>64位半精度浮点数：1位符号位，11位指数，52位尾数</td></tr><tr><td>complex64</td><td>复数类型，实部和虚部都是32位浮点数，实部(.real)+j虚部(.imag)</td></tr><tr><td>…</td><td>…</td></tr></tbody></table></div><p><strong>对比</strong>：Python语法仅支持整数、浮点数和复数3种类型，且其中整数类型是没有取值范围划分的，浮点数和复数仅有一种。</p><h3 id="支持那么多种数据类型？"><a href="#支持那么多种数据类型？" class="headerlink" title="支持那么多种数据类型？"></a>支持那么多种数据类型？</h3><ol><li>科学计算涉及数据较多，对存储和性能都有比较高要求。</li><li>对元素类型精细定义，有助于NumPy合理使用存储空间并进行优化性能。</li><li>对元素类型精细定义，有助于程序员对程序规模有合理的评估。</li></ol><h3 id="可由非同质对象构成"><a href="#可由非同质对象构成" class="headerlink" title="可由非同质对象构成"></a>可由非同质对象构成</h3><p>非同质ndarray对象无法发挥NumPy优势，尽量避免使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">61</span>]: x = np.array([[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],<br> [<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>]])<br><br>In [<span class="hljs-number">62</span>]: x.shape<br>Out[<span class="hljs-number">63</span>]: (<span class="hljs-number">2</span>,)<br><br>In [<span class="hljs-number">63</span>]: x.dtype<br>Out[<span class="hljs-number">63</span>]: dtype(<span class="hljs-string">&#x27;O&#x27;</span>)  <span class="hljs-comment">#非同质ndarray元素为对象类型。</span><br><br>In [<span class="hljs-number">64</span>]: x<br>Out[<span class="hljs-number">64</span>]: array([[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">9</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>]],dtype=<span class="hljs-built_in">object</span>)<br><br>In [<span class="hljs-number">65</span>]: x.itemsize<br>Out[<span class="hljs-number">65</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">66</span>]: x.size<br>Out[<span class="hljs-number">66</span>]: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h2 id="ndarray数组的创建和变换"><a href="#ndarray数组的创建和变换" class="headerlink" title="ndarray数组的创建和变换"></a>ndarray数组的创建和变换</h2><h3 id="ndarray数组的创建方法"><a href="#ndarray数组的创建方法" class="headerlink" title="ndarray数组的创建方法"></a>ndarray数组的创建方法</h3><ol><li><p>从Python中的列表，元组等类型创建ndarray数组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">x = np.array(<span class="hljs-built_in">list</span>/<span class="hljs-built_in">tuple</span>)<br>x = np.array(<span class="hljs-built_in">list</span>/<span class="hljs-built_in">tuple</span>,dtype=np.float32)<br><span class="hljs-comment"># 当np.array()不指定dtype时，NumPy将根据数据情况关联一个dtype类型</span><br><br>In [<span class="hljs-number">32</span>]: x = np.array([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])<span class="hljs-comment">#从列表类型创建</span><br><br>In [<span class="hljs-number">33</span>]: <span class="hljs-built_in">print</span>(x)<br>[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<br><br>In [<span class="hljs-number">34</span>]: x = np.array((<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>)<span class="hljs-comment">#从元组类型创建</span><br><br>In [<span class="hljs-number">35</span>]: <span class="hljs-built_in">print</span>(x)<br>[<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span>]<br><br>In [<span class="hljs-number">36</span>]: x = np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">9</span>,<span class="hljs-number">8</span>],(<span class="hljs-number">0.1</span>,<span class="hljs-number">0.2</span>)])<span class="hljs-comment">#从列表和元组混合类型创建</span><br><br>In [<span class="hljs-number">37</span>]: <span class="hljs-built_in">print</span>(x)<br>[[ <span class="hljs-number">1.</span> <span class="hljs-number">2.</span>]<br> [ <span class="hljs-number">9.</span> <span class="hljs-number">8.</span>]<br> [<span class="hljs-number">0.1</span> <span class="hljs-number">0.2</span>]]<br></code></pre></td></tr></table></figure></li><li><p>使用NumPy中函数创建ndarray数组，如：arange,ones,zeros等。</p><p>| 函数               | 说明                                           |<br>| ————————— | ——————————————————————— |<br>| np.arange(n)       | 类似range()函数，返回ndarray类型，元素从0到n-1 |<br>| np.ones(shape)     | 根据shape生成一个全1数组，shape是元组类型      |<br>| np.zeros(shape)    | 根据shape生成一个全0数组，shape是元组类型      |<br>| np.full(shape.val) | 根据shape生成一个数组，每个元素值都是val       |<br>| np.eye(n)          | 创建一个正方的n*n得矩阵，对角线为1，其余为0    |</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">73</span>]: np.arange(<span class="hljs-number">10</span>)<br>Out[<span class="hljs-number">73</span>]: array([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>])<br><br>In [<span class="hljs-number">74</span>]: np.ones((<span class="hljs-number">3</span>,<span class="hljs-number">6</span>))<br>Out[<span class="hljs-number">74</span>]: array([[<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>]<br>   [<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>],<br>   [<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>]])<br><br>In [<span class="hljs-number">75</span>]: np.zeros((<span class="hljs-number">3</span>,<span class="hljs-number">6</span>),dtype=np.int32)<br>Out[<span class="hljs-number">75</span>]: array([[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>   [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>   [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]])<br><br>In [<span class="hljs-number">76</span>]: np.eye(<span class="hljs-number">5</span>)<br>Out[<span class="hljs-number">76</span>]: array([[<span class="hljs-number">1.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>],<br>   [<span class="hljs-number">0.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>],<br>   [<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>],<br>   [<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">0.</span>],<br>   [<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">0.</span>,<span class="hljs-number">1.</span>]])<br>   <br>In [<span class="hljs-number">81</span>]: x = np.ones((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><br>In [<span class="hljs-number">82</span>]: <span class="hljs-built_in">print</span>(x)<br>[[[<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]<br>  [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]<br>  [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]]<br>  <br>  [[<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]<br>   [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]<br>   [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]]]<br>   <br>In [<span class="hljs-number">83</span>]: x.shape<br>Out[<span class="hljs-number">83</span>]: (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure><p>| 函数                | 说明                                           |<br>| —————————- | ——————————————————————— |<br>| np.ones_like(a)     | 根据数组a的形状生成一个全1数组                 |<br>| np.zeros_like(a)    | 根据数组a的形状生成一个全0数组                 |<br>| np.full_like(a,val) | 根据数组a的形状生成一个数组，每个元素值都是val |</p></li><li><p>使用NumPy中其他函数创建ndarray数组</p><p>| 函数             | 说明                                   |<br>| ———————— | ——————————————————— |<br>| np.linspace()    | 根据起止数据等间距地填充数据，形成数组 |<br>| np.concatenate() | 将两个或多个数组合并成一个新的数组     |</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">51</span>]: a = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">4</span>) <span class="hljs-comment">#起始位置，终止位置，希望生成几个元素</span><br><br>In [<span class="hljs-number">52</span>]: a<br>Out[<span class="hljs-number">52</span>]: array([<span class="hljs-number">1.</span>, <span class="hljs-number">4.</span>, <span class="hljs-number">7.</span>, <span class="hljs-number">10.</span>]) <span class="hljs-comment">#1到10中间等间距分成3份</span><br><br>In [<span class="hljs-number">53</span>]: b = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">4</span>, endpoint = <span class="hljs-literal">False</span>) <span class="hljs-comment">#最后一个元素是否为生成元素中的一个</span><br><br>In [<span class="hljs-number">54</span>]: b<br>Out[<span class="hljs-number">54</span>]: array([ <span class="hljs-number">1.</span>, <span class="hljs-number">3.25</span>, <span class="hljs-number">5.5</span>, <span class="hljs-number">7.75</span>]) <span class="hljs-comment">#1到10中间等间距分成4份</span><br><br>In [<span class="hljs-number">55</span>]: c = np.concatenate((a,b))<br><br>In [<span class="hljs-number">56</span>]: c<br>Out[<span class="hljs-number">56</span>]: array([ <span class="hljs-number">1.</span>, <span class="hljs-number">4.</span>, <span class="hljs-number">7.</span>, <span class="hljs-number">10.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">3.25</span>, <span class="hljs-number">5.5</span>, <span class="hljs-number">7.75</span>])<br></code></pre></td></tr></table></figure></li><li><p>从字节流(raw bytes)中创建ndarry数组。</p></li></ol><h3 id="ndarray数组的变换"><a href="#ndarray数组的变换" class="headerlink" title="ndarray数组的变换"></a>ndarray数组的变换</h3><h4 id="维度变换"><a href="#维度变换" class="headerlink" title="维度变换"></a>维度变换</h4><p>对于创建后的ndarray数组，可以对其进行维度变换和元素类型变换。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.ones((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>) , dtype = np.int32)<br></code></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>.reshape(shape)</td><td>不改变数组元素，返回一个shape形状的数组，<strong>原数组不变</strong></td></tr><tr><td>.resize(shape)</td><td>与.reshape()功能一致，但修改原数组</td></tr><tr><td>.swapaxes(ax1,ax2)</td><td>将数组n个维度中两个维度进行调换</td></tr><tr><td>.flatten()</td><td>对数组进行降维，放回折叠后的一维数组，<strong>原数组不变</strong></td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">105</span>]: a.reshape((<span class="hljs-number">3</span>,<span class="hljs-number">8</span>))<span class="hljs-comment">###a.reshape</span><br>Out[<span class="hljs-number">105</span>]:<br>array([[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>   [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>   [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]])<br>   <br>In [<span class="hljs-number">106</span>]: a<br>Out[<span class="hljs-number">106</span>]:<br>array([[[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]],<br>    <br>   [[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]]])<br>    <br>In [<span class="hljs-number">107</span>]: a.resize((<span class="hljs-number">3</span>,<span class="hljs-number">8</span>))<span class="hljs-comment">###a.resize</span><br><br>In [<span class="hljs-number">108</span>]: a<br>Out[<span class="hljs-number">108</span>]:<br>array([[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>   [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>   [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]])<br><br>In [<span class="hljs-number">109</span>]: a.flatten()<span class="hljs-comment">###a.flatten</span><br>Out[<span class="hljs-number">109</span>]: array([<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,...,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>])<br><br>In [<span class="hljs-number">110</span>]: a<br>Out[<span class="hljs-number">110</span>]:<br>array([[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,...,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>   [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,...,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>   [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,...,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]])<br>   <br>In [<span class="hljs-number">111</span>]: b = a.flatten()<br><br>In [<span class="hljs-number">112</span>]: b<br>Out[<span class="hljs-number">112</span>]: array([<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,...,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h4 id="类型变换"><a href="#类型变换" class="headerlink" title="类型变换"></a>类型变换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">new_a = a.astype(new_type)<br></code></pre></td></tr></table></figure><p>astype()方法一定会创建新的数组(原始数据的一个拷贝)，即使两个类型一致。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">119</span>]: a = np.ones((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),dtype = np.<span class="hljs-built_in">int</span>)<br><br>In [<span class="hljs-number">120</span>]: a<br>Out[<span class="hljs-number">120</span>]:<br>array([[[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]],<br>    <br>   [[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]]])<br>    <br>In [<span class="hljs-number">121</span>]: b = a.astype(np.<span class="hljs-built_in">float</span>)<span class="hljs-comment">###a.astype，可以改变类型</span><br><br>In [<span class="hljs-number">122</span>]: b<br>Out[<span class="hljs-number">122</span>]:<br>array([[[<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>],<br>    [<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>],<br>    [<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>]],<br>    <br>   [[<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>],<br>    [<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>],<br>    [<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>,<span class="hljs-number">1.</span>]]])<br></code></pre></td></tr></table></figure><h4 id="向列表的转换"><a href="#向列表的转换" class="headerlink" title="向列表的转换"></a>向列表的转换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">Ls = a.tolist()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">128</span>]: a = np.full((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),<span class="hljs-number">25</span>,dtype=np.int32)<br><br>In [<span class="hljs-number">129</span>]: a<br>Out[<span class="hljs-number">129</span>]:([[[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],<br>   [<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],<br>   [<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>]],<br>  [[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],<br>   [<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],<br>   [<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>]]])<br>   <br>In [<span class="hljs-number">130</span>]: a.tolist()<span class="hljs-comment">###a.tolist</span><br>Out[<span class="hljs-number">130</span>]:<br>[[[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>]],<br> [[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>],[<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>,<span class="hljs-number">25</span>]]]<br></code></pre></td></tr></table></figure><h2 id="ndarray数组的操作"><a href="#ndarray数组的操作" class="headerlink" title="ndarray数组的操作"></a>ndarray数组的操作</h2><h3 id="数组的索引和切片"><a href="#数组的索引和切片" class="headerlink" title="数组的索引和切片"></a>数组的索引和切片</h3><p>索引：获取数组中特定位置元素的过程</p><p>切片：获取数组元素子集的过程</p><h3 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h3><p>与python的列表类似</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">In <span class="hljs-selector-attr">[131]</span>: <span class="hljs-selector-tag">a</span> = np<span class="hljs-selector-class">.array</span>(<span class="hljs-selector-attr">[9,8,7,6,5]</span>)<br><br>In <span class="hljs-selector-attr">[132]</span>: <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[2]</span><br>Out<span class="hljs-selector-attr">[132]</span>: <span class="hljs-number">7</span><br><br>In <span class="hljs-selector-attr">[133]</span>: <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[ 1 : 4 : 2]</span>###起始编号：终止编号(不含)：步长<br>Out<span class="hljs-selector-attr">[133]</span>: <span class="hljs-built_in">array</span>(<span class="hljs-selector-attr">[8,6]</span>)<br></code></pre></td></tr></table></figure><h3 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h3><p><strong>索引</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">146</span>]: a = np.arrange(<span class="hljs-number">24</span>).reshape((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><br>In [<span class="hljs-number">147</span>]: a<br>Out[<span class="hljs-number">147</span>]:<br>array([[[<span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>],<br>    [<span class="hljs-number">4</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>],<br>    [<span class="hljs-number">8</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]],<br>    <br>   [[<span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>],<br>    [<span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>],<br>    [<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>]]])<br><br>In [<span class="hljs-number">148</span>]: a[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>Out[<span class="hljs-number">148</span>]: <span class="hljs-number">23</span><br><br>In [<span class="hljs-number">149</span>]: a[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br>Out[<span class="hljs-number">149</span>]: <span class="hljs-number">6</span><br><br>In [<span class="hljs-number">150</span>]: a[-<span class="hljs-number">1</span>,-<span class="hljs-number">2</span>,-<span class="hljs-number">3</span>]<br>Out[<span class="hljs-number">150</span>]: <span class="hljs-number">17</span><br></code></pre></td></tr></table></figure><p><strong>切片</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">146</span>]: a = np.arrange(<span class="hljs-number">24</span>).reshape((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><br>In [<span class="hljs-number">147</span>]: a<br>Out[<span class="hljs-number">147</span>]:<br>array([[[<span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>],<br>    [<span class="hljs-number">4</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>],<br>    [<span class="hljs-number">8</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]],<br>    <br>   [[<span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>],<br>    [<span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>],<br>    [<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>]]])<br>    <br>In [<span class="hljs-number">158</span>]: a[:,<span class="hljs-number">1</span>,-<span class="hljs-number">3</span>]<span class="hljs-comment">###a[第一个维度的要求，第二个维度的要求，第三个维度的要求]</span><br>Out[<span class="hljs-number">158</span>]: array([<span class="hljs-number">5</span>,<span class="hljs-number">17</span>])<span class="hljs-comment">###选取一个维度用：</span><br><br>In [<span class="hljs-number">159</span>]: a[:,<span class="hljs-number">1</span>:<span class="hljs-number">3</span>,:]<br>Out[<span class="hljs-number">159</span>]:<br>array([[[<span class="hljs-number">4</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>],<br>    [<span class="hljs-number">8</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]],<br>    <br>   [[<span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>],<br>    [<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>]]])<br>    <br>In [<span class="hljs-number">160</span>]: a[:,:,::<span class="hljs-number">2</span>]<span class="hljs-comment">###每个维度可以使用步长跳跃切片</span><br>Out[<span class="hljs-number">160</span>]:<br>array([[[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>],<br>    [<span class="hljs-number">4</span>,<span class="hljs-number">6</span>],<br>    [<span class="hljs-number">8</span>,<span class="hljs-number">10</span>]],<br>    <br>   [[<span class="hljs-number">12</span>,<span class="hljs-number">14</span>],<br>    [<span class="hljs-number">16</span>,<span class="hljs-number">18</span>],<br>    [<span class="hljs-number">20</span>,<span class="hljs-number">22</span>]]])<br></code></pre></td></tr></table></figure><h2 id="ndarry数组的运算"><a href="#ndarry数组的运算" class="headerlink" title="ndarry数组的运算"></a>ndarry数组的运算</h2><h3 id="数组与标量之间的运算"><a href="#数组与标量之间的运算" class="headerlink" title="数组与标量之间的运算"></a>数组与标量之间的运算</h3><p>数组与标量之间的运算作用域数组的每一个元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">###实例：计算a与元素平均值的商</span><br><br>In [<span class="hljs-number">146</span>]: a = np.arrange(<span class="hljs-number">24</span>).reshape((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))<br><br>In [<span class="hljs-number">147</span>]: a<br>Out[<span class="hljs-number">147</span>]:<br>array([[[<span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>],<br>    [<span class="hljs-number">4</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>],<br>    [<span class="hljs-number">8</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]],<br>    <br>   [[<span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>],<br>    [<span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>],<br>    [<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>]]])<br>    <br>In [<span class="hljs-number">169</span>]: a.mean()<br>Out[<span class="hljs-number">169</span>]: <span class="hljs-number">11.5</span><br><br>In [<span class="hljs-number">170</span>]: a = a / a.mean()<br><br>In [<span class="hljs-number">171</span>]: a<br>Out[<span class="hljs-number">171</span>]:<br>array([[[<span class="hljs-number">0.</span>   ,<span class="hljs-number">0.08695652</span>,<span class="hljs-number">0.17391304</span>,<span class="hljs-number">0.26086957</span>],<br>    [<span class="hljs-number">0.34782609</span>,<span class="hljs-number">0.43478261</span>,<span class="hljs-number">0.52173913</span>,<span class="hljs-number">0.60869565</span>],<br>    [<span class="hljs-number">0.69565217</span>,<span class="hljs-number">0.7826087</span> ,<span class="hljs-number">0.86956522</span>,<span class="hljs-number">0.95652174</span>]],<br>    <br>   [[<span class="hljs-number">1.04347826</span>,<span class="hljs-number">1.13043478</span>,<span class="hljs-number">1.2173913</span> ,<span class="hljs-number">1.30434783</span>],<br>    [<span class="hljs-number">1.39130435</span>,<span class="hljs-number">1.47826087</span>,<span class="hljs-number">1.56521739</span>,<span class="hljs-number">1.65217391</span>],<br>    [<span class="hljs-number">1.73913043</span>,<span class="hljs-number">1.82608696</span>,<span class="hljs-number">1.91304348</span>,<span class="hljs-number">2.</span>    ]]])<br></code></pre></td></tr></table></figure><h3 id="NumPy一元函数"><a href="#NumPy一元函数" class="headerlink" title="NumPy一元函数"></a>NumPy一元函数</h3><p>对ndarray中的数据执行元素级运算的函数</p><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>np.abs(x)    np.fabs(x)</td><td>计算数组各元素的绝对值</td></tr><tr><td>np.sqrt(x)</td><td>计算数组个元素的平方根</td></tr><tr><td>np.square(x)</td><td>计算数组各元素的平方</td></tr><tr><td>np.log(x) np.log10(x) np.log2(x)</td><td>计算数组各元素的自然对数、10底对数和2底对数</td></tr><tr><td>np.ceil(x) np.floor(x)</td><td>计算数组各元素的ceiling值或floor值</td></tr><tr><td>np.rint(x)</td><td>计算数组各元素的四舍五入值</td></tr><tr><td>np.modf(x)</td><td>将数组各元素的小数和整数部分以两个独立数组形式返回</td></tr><tr><td>np.cos(x) np.cosh(x)<br />np.sin(x) np.sinh(x)<br />np.tan(x) np.tanh(x)</td><td>计算数组各元素的普通型和双曲型三角函数</td></tr><tr><td>np.exp(x)</td><td>计算数组各元素的指数值</td></tr><tr><td>np.sign(x)</td><td>计算数组各元素的符号值，1(+),0,-1(-)</td></tr></tbody></table></div><p><strong>注意数组是否被真实改变</strong></p><img src="/2024/04/30/20240430_numPy/image-20240509213311585.png" class="" title="image-20240509213311585"><h3 id="NumPy二元函数"><a href="#NumPy二元函数" class="headerlink" title="NumPy二元函数"></a>NumPy二元函数</h3><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>+ - <em> / *</em></td><td>两个数组各元素进行对应运算</td></tr><tr><td>np.maximum(x,y) np.fmax()<br />np.minimum(x,y) np.fmin()</td><td>元素级的最大值、最小值计算</td></tr><tr><td>np.mod(x,y)</td><td>元素级的模运算</td></tr><tr><td>np.copysign(x,y)</td><td>将数组y中各元素的符号赋值给数组x对应元素</td></tr><tr><td>&gt; &lt; &gt;= &lt;= == !=</td><td>算数比较，产生布尔型数组</td></tr></tbody></table></div><img src="/2024/04/30/20240430_numPy/image-20240509213328557.png" class="" title="image-20240509213328557"><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><img src="/2024/04/30/20240430_numPy/image-20240509213349887.png" class="" title="image-20240509213349887"><h1 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h1><h2 id="一维：CSV文件存取"><a href="#一维：CSV文件存取" class="headerlink" title="一维：CSV文件存取"></a>一维：CSV文件存取</h2><p>CSV是一种常见的文件格式，用来存储批量数据</p><p>局限性：只能有效存储一维和二维数组</p><img src="/2024/04/30/20240430_numPy/image-20240509220524222.png" class="" title="image-20240509220524222"><h3 id="savetxt"><a href="#savetxt" class="headerlink" title="savetxt"></a>savetxt</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">np.savetxt(frame,array,fmt=<span class="hljs-string">&#x27;%.18e&#x27;</span>,delimiter=<span class="hljs-literal">None</span>)<br><span class="hljs-comment">#frame: 文件、字符串或产生器，可以是.gz或.bz2的压缩文件</span><br><span class="hljs-comment">#array：存入文件的数组</span><br><span class="hljs-comment">#fmt: 写入文件的格式，例如：%d %.2f %.18e</span><br><span class="hljs-comment">#delimiter: 分割字符串，默认是任何空格</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">a = np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>,<span class="hljs-number">20</span>)<br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240509222102454.png" class="" title="image-20240509222102454"><h3 id="loadtxt"><a href="#loadtxt" class="headerlink" title="loadtxt"></a>loadtxt</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">np.loadtxt(frame,dtype=np.<span class="hljs-built_in">float</span>,delimiter=<span class="hljs-literal">None</span>,unpack=<span class="hljs-literal">False</span>)<br><span class="hljs-comment">#frame: 文件、字符串或产生器，可以是.gz或.bz2的压缩文件</span><br><span class="hljs-comment">#dtype：数据类型，可选</span><br><span class="hljs-comment">#delimiter：分割字符串，默认是任何空格</span><br><span class="hljs-comment">#unpack：如果True，读入属性将分别写入不同变量</span><br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240509223340872.png" class="" title="image-20240509223340872"><h2 id="多维数据存取"><a href="#多维数据存取" class="headerlink" title="多维数据存取"></a>多维数据存取</h2><h3 id="tofile"><a href="#tofile" class="headerlink" title="tofile"></a>tofile</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">a.tofile(frame,sep=<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">&#x27;%s&#x27;</span>)<br><br><span class="hljs-comment"># frame : 文件、字符串</span><br><span class="hljs-comment"># sep   ：数据分割字符串，如果是空串，写入文件为二进制</span><br><span class="hljs-comment"># format：写入数据的格式</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">125</span>]: a = np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>In [<span class="hljs-number">126</span>]: a.tofile(<span class="hljs-string">&quot;b.dat&quot;</span>,sep=<span class="hljs-string">&quot;,&quot;</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;%d&quot;</span>)<br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240510113434901.png" class="" title="image-20240510113434901"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">127</span>]: a = np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>In [<span class="hljs-number">128</span>]: a.tofile(<span class="hljs-string">&quot;b.dat&quot;</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;%d&quot;</span>)<br><span class="hljs-comment">#如果不知道分割符，则生成二进制文件，二进制文件占用更小的空间</span><br><span class="hljs-comment">#看不到内容，只能作为数据备份的一种方式</span><br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240510113721159.png" class="" title="image-20240510113721159"><h3 id="fromfile"><a href="#fromfile" class="headerlink" title="fromfile"></a>fromfile</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">np.fromfile<span class="hljs-params">(frame,<span class="hljs-attr">dtype</span>=float,<span class="hljs-attr">cont</span>=-1,<span class="hljs-attr">sep</span>=&#x27;&#x27;)</span><br><span class="hljs-comment"># frame:文件、字符串</span><br><span class="hljs-comment"># dtype:读取的数据类型</span><br><span class="hljs-comment"># count:读入元素个数，-1表示读入整个文件</span><br><span class="hljs-comment"># sep:数据分割字符串，如果是空串，写入文件为二进制</span><br></code></pre></td></tr></table></figure><h4 id="文本文件"><a href="#文本文件" class="headerlink" title="文本文件"></a>文本文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">129</span>]: a = np.arange(<span class="hljs-number">100</span>).reshape(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>In [<span class="hljs-number">130</span>]: a.tofile(<span class="hljs-string">&quot;b.dat&quot;</span>,sep=<span class="hljs-string">&quot;,&quot;</span>,<span class="hljs-built_in">format</span>=<span class="hljs-string">&#x27;%d&#x27;</span>)<br>In [<span class="hljs-number">131</span>]: c = np.fromfile(<span class="hljs-string">&quot;b.dat&quot;</span>,dtype=np.<span class="hljs-built_in">int</span>,sep=<span class="hljs-string">&quot;,&quot;</span>)<br>In [<span class="hljs-number">132</span>]: c<br>Out[<span class="hljs-number">132</span>]: array([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,...,<span class="hljs-number">97</span>,<span class="hljs-number">98</span>,<span class="hljs-number">99</span>])<br>In [<span class="hljs-number">133</span>]: c = np.fromfile(<span class="hljs-string">&quot;b.dat&quot;</span>,dtype=np.<span class="hljs-built_in">int</span>,sep=<span class="hljs-string">&quot;,&quot;</span>).reshape(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>In [<span class="hljs-number">134</span>]: c<br>Out[<span class="hljs-number">134</span>]:<br>array([[[<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],<br>    [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],<br>    [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],<br>    ...,<br>    [<span class="hljs-number">14</span>,<span class="hljs-number">15</span>],<br>    [<span class="hljs-number">16</span>,<span class="hljs-number">17</span>],<br>    [<span class="hljs-number">18</span>,<span class="hljs-number">19</span>]],<br></code></pre></td></tr></table></figure><h4 id="二进制文件"><a href="#二进制文件" class="headerlink" title="二进制文件"></a>二进制文件</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">In <span class="hljs-selector-attr">[125]</span>: <span class="hljs-selector-tag">a</span> = np<span class="hljs-selector-class">.arange</span>(<span class="hljs-number">100</span>)<span class="hljs-selector-class">.reshape</span>(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>In <span class="hljs-selector-attr">[136]</span>: <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.tofile</span>(<span class="hljs-string">&quot;b.dat&quot;</span>,format=<span class="hljs-string">&#x27;%d&#x27;</span>)<br>In <span class="hljs-selector-attr">[137]</span>: c = np<span class="hljs-selector-class">.fromfile</span>(<span class="hljs-string">&quot;b.dat&quot;</span>,dtype=np.int)<span class="hljs-selector-class">.reshape</span>(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>In <span class="hljs-selector-attr">[138]</span>: c<br>Out<span class="hljs-selector-attr">[138]</span>:<br><span class="hljs-built_in">array</span>(<span class="hljs-selector-attr">[[[0,1]</span>,<br>    <span class="hljs-selector-attr">[2,3]</span>,<br>    <span class="hljs-selector-attr">[4,5]</span>,<br>    ...,<br>    <span class="hljs-selector-attr">[14,15]</span>,<br>    <span class="hljs-selector-attr">[16,17]</span>,<br>    <span class="hljs-selector-attr">[18,19]</span>],<br></code></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul><li>该方法需要读取时知道存入文件时数组的维度和元素类型</li><li>a.tofile()和np.fromfile()需要配合使用</li><li>可以通过元素据文件来存储额外信息</li></ul><h2 id="NumPy的便捷文件存取"><a href="#NumPy的便捷文件存取" class="headerlink" title="NumPy的便捷文件存取"></a>NumPy的便捷文件存取</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">np.save(fname,array)或np.savez(fname,array)<br><span class="hljs-comment"># frame:文件名，以.npy为扩展名，压缩扩展名为.npz</span><br><span class="hljs-comment"># array:数组变量</span><br>np.load(fname)<br><span class="hljs-comment"># fname:文件名，以.npy为扩展名，压缩扩展名为.npz</span><br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240510120735787.png" class="" title="image-20240510120735787"><h1 id="NumPy函数"><a href="#NumPy函数" class="headerlink" title="NumPy函数"></a>NumPy函数</h1><h2 id="随机数函数子库"><a href="#随机数函数子库" class="headerlink" title="随机数函数子库"></a>随机数函数子库</h2><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>rand(d0,d1,..,dn)</td><td>根据d0-dn创建随机数数组，浮点数，[0,1)，均匀分布</td></tr><tr><td>randn(d0,d1,..,dn)</td><td>根据d0-d  n创建随机数数组，标准正态分布</td></tr><tr><td>randint(low[,high,shape])</td><td>根据shape创建随机整数或整数数组，范围时[low,high)</td></tr><tr><td>seed(s)</td><td>随机数种子，s时给定的种子值</td></tr></tbody></table></div><img src="/2024/04/30/20240430_numPy/image-20240510154944785.png" class="" title="image-20240510154944785"><img src="/2024/04/30/20240430_numPy/image-20240510155229646.png" class="" title="image-20240510155229646"><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>shuffle(a)</td><td>根据数组a的第1轴进行随排列，改变数组x</td></tr><tr><td>permutation(a)</td><td>根据数组a的第一轴产生一个新的乱序数组，不改变数组x</td></tr><tr><td>choice(a[,size,replace,p])</td><td>从一维数组中以概率p抽取元素，形成size形状新数组<br />replace表示是否可以重用元素，默认为False</td></tr></tbody></table></div><img src="/2024/04/30/20240430_numPy/image-20240513213509000.png" class="" title="image-20240513213509000"><img src="/2024/04/30/20240430_numPy/image-20240513213522365.png" class="" title="image-20240513213522365"><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>uniform(low,high,size)</td><td>产生具有均匀分布的数组，low起始值，high结束值，size形状</td></tr><tr><td>normal(loc,scale,size)</td><td>产生具有正态分布的数组，loc均值，scale标准差，size形状</td></tr><tr><td>poisson(lam,size)</td><td>产生具有泊松分布的数组，lam随机事件发生率，size形状</td></tr></tbody></table></div><img src="/2024/04/30/20240430_numPy/image-20240513214549045.png" class="" title="image-20240513214549045"><h2 id="统计函数"><a href="#统计函数" class="headerlink" title="统计函数"></a>统计函数</h2><p>NumPy直接提供的统计累函数，可以直接np.*使用</p><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>sum(a,axis=None)</td><td>根据给定轴axis计算数组a相关元素之和，axis整数或元组</td></tr><tr><td>mean(a,axis=None)</td><td>根据给定轴axis计算数组相关元素的期望，axis整数或元组</td></tr><tr><td>average(a,axis=None,weights=None)</td><td>根据给定轴axis计算数组a相关元素的加权平均值</td></tr><tr><td>std(a,axis=None)</td><td>根据给定轴axis计算数组a相关元素的标准差</td></tr><tr><td>var(a,axis=None)</td><td>根据给定轴axis计算数组a相关元素的方差</td></tr></tbody></table></div><img src="/2024/04/30/20240430_numPy/image-20240513220237680.png" class="" title="image-20240513220237680"><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>min(a) max(a)</td><td>计算数组a中元素的最小值、最大值</td></tr><tr><td>argmin(a) argmax(a)</td><td>计算数组a中元素最小值、最大值的降一维后下标</td></tr><tr><td>unravel_index(index,shape)</td><td>根据shape将一维下标index转换成多维下标</td></tr><tr><td>ptp(a)</td><td>计算数组a中元素最大值与最小值的差</td></tr><tr><td>median(a)</td><td>计算数组a中元素的中位数(中值)</td></tr></tbody></table></div> <img src="/2024/04/30/20240430_numPy/image-20240513221333288.png" class="" title="image-20240513221333288"><h2 id="梯度函数"><a href="#梯度函数" class="headerlink" title="梯度函数"></a>梯度函数</h2><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>np.gradient(f)</td><td>计算数组f中元素的梯度，当f为多维时，返回每个维度梯度</td></tr></tbody></table></div><p>梯度：连续值之间的变化率，即斜率</p><p>XY坐标轴连续三个X坐标对应的Y轴值：a,b,c，其中，b的梯度是：(c-a)/2</p><img src="/2024/04/30/20240430_numPy/image-20240513222346917.png" class="" title="image-20240513222346917"><p>如果数组是n维，的那么gradient生成n个数组</p><img src="/2024/04/30/20240430_numPy/image-20240513222627439.png" class="" title="image-20240513222627439"><h1 id="图像的手绘效果"><a href="#图像的手绘效果" class="headerlink" title="图像的手绘效果"></a>图像的手绘效果</h1><h2 id="图像的数组表示"><a href="#图像的数组表示" class="headerlink" title="图像的数组表示"></a>图像的数组表示</h2><p>图像一般使用RGB色彩模式，即每个像素点的颜色由红(R)、绿(G)、蓝(B)组成，其中每个通道的取值范围均为0-255，叠加起来色彩空间为255^3。RGB形成的颜色包括了人类视力所能感知的所有颜色。</p><h3 id="PIL库"><a href="#PIL库" class="headerlink" title="PIL库"></a>PIL库</h3><p>一个具有强大图像处理能力的第三方库。</p><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs capnproto">pip install pillow<span class="hljs-comment">#安装</span><br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image <span class="hljs-comment">#Image是PIL库代表一个图像的类（对象）</span><br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240514210910331.png" class="" title="image-20240514210910331"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">64</span>]:<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br>In [<span class="hljs-number">65</span>]:<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>In [<span class="hljs-number">66</span>]:im = np.array(Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;D:/pycodes/demo.jpg&quot;</span>))<br>In [<span class="hljs-number">67</span>]:<span class="hljs-built_in">print</span>(im.shape,im.dtype)<br>(<span class="hljs-number">669</span>,<span class="hljs-number">1012</span>,<span class="hljs-number">3</span>)uint8<br><span class="hljs-comment">###图像是一个三维数组，维度分别是高度、宽度和像素RGB值</span><br></code></pre></td></tr></table></figure><h2 id="图像的变换"><a href="#图像的变换" class="headerlink" title="图像的变换"></a>图像的变换</h2><p>读入图像后，获得像素RGB值，修改后保存为新的文件。</p><img src="/2024/04/30/20240430_numPy/image-20240514212717293.png" class="" title="image-20240514212717293"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">81</span>]:<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br>In [<span class="hljs-number">82</span>]:<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>In [<span class="hljs-number">83</span>]:a = np.array(Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;D:/demo.jpg&quot;</span>))<br>In [<span class="hljs-number">84</span>]:<span class="hljs-built_in">print</span>(a.shape,a.dtype)<br>(<span class="hljs-number">669</span>,<span class="hljs-number">1012</span>,<span class="hljs-number">3</span>)uint8<br>In [<span class="hljs-number">85</span>]:b = [<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>]-a<br>In [<span class="hljs-number">86</span>]:im = Image.fromarray(b.astype(<span class="hljs-string">&#x27;uint8&#x27;</span>))<br>In [<span class="hljs-number">87</span>]:im.save(<span class="hljs-string">&quot;D:/demo1.jpg&quot;</span>)<br></code></pre></td></tr></table></figure><img src="/2024/04/30/20240430_numPy/image-20240514214108604.png" class="" title="image-20240514214108604"><img src="/2024/04/30/20240430_numPy/image-20240514214252567.png" class="" title="image-20240514214252567"><img src="/2024/04/30/20240430_numPy/image-20240514214352038.png" class="" title="image-20240514214352038"><h2 id="“图像手绘效果”实例分析"><a href="#“图像手绘效果”实例分析" class="headerlink" title="“图像手绘效果”实例分析"></a>“图像手绘效果”实例分析</h2><p>手绘效果几个特征：黑白灰色，线条比较重，相同或相近色彩趋于白色，略有光源效果</p><p>利用像素之间的梯度值和虚拟深度值对图像进行重构</p><p>根据灰度变化来模拟人类视觉明暗程度</p><img src="/2024/04/30/20240430_numPy/image-20240514220453292.png" class="" title="image-20240514220453292"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>a = np.asarray(Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;G:/1.jpg&#x27;</span>).convert(<span class="hljs-string">&#x27;L&#x27;</span>)).astype(<span class="hljs-string">&#x27;float&#x27;</span>)<br><br>depth = <span class="hljs-number">10.</span><span class="hljs-comment">#预设深度值为10，取值范围(0-100)</span><br>grad = np.gradient(a) <span class="hljs-comment">#取图像灰度的梯度值，表示灰度的变化率</span><br>grad_x,grad_y = grad <span class="hljs-comment">#分别取横纵图像梯度值</span><br>grad_x = grad_x*depth/<span class="hljs-number">100.</span><br>grad_y = grad_y*depth/<span class="hljs-number">100.</span> <span class="hljs-comment">#根据深度调整x和y方向的梯度值</span><br><br>A = np.sqrt(grad_x**<span class="hljs-number">2</span> + grad_y**<span class="hljs-number">2</span> + <span class="hljs-number">1.</span>)  <span class="hljs-comment">#构造x和y轴梯度的三维归一单位坐标系</span><br><br>uni_x = grad_x/A<br>uni_y = grad_y/A<br>uni_z = <span class="hljs-number">1.</span>/A<br><br>vec_el = np.pi/<span class="hljs-number">2.2</span> <span class="hljs-comment">#光源的俯视角度，弧度值</span><br>vec_az = np.pi/<span class="hljs-number">4.</span> <span class="hljs-comment">#光源的方位角度，弧度值</span><br>dx = np.cos(vec_el)*np.cos(vec_az)   <span class="hljs-comment">#光源对x轴的影响，np.cos(vec_el)为单位光线在地平面的投影长度</span><br>dy = np.cos(vec_el)*np.sin(vec_az)   <span class="hljs-comment">#光源对y轴的影响</span><br>dz = np.sin(vec_el)  <span class="hljs-comment">#光源对z轴的影响</span><br><br>b = <span class="hljs-number">255</span>*(dx*uni_x +dy*uni_y +dz*uni_z)   <span class="hljs-comment">#光源归一化，梯度与光源相互作用，将梯度转化为灰度？？？？</span><br>b = b.clip(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>) <span class="hljs-comment">#为避免数据越界，将生成的灰度值裁剪至0-255区间</span><br><br>im = Image.fromarray(b.astype(<span class="hljs-string">&#x27;uint8&#x27;</span>))<span class="hljs-comment">#重构图像</span><br>im.save(<span class="hljs-string">&#x27;G:\\1hd.jpg&#x27;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>数据分析与展示</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据分析</tag>
      
      <tag>分析工具</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计划</title>
    <link href="/2024/04/29/20240429_daliylogs/"/>
    <url>/2024/04/29/20240429_daliylogs/</url>
    
    <content type="html"><![CDATA[<ul><li><p>Python及爬虫</p><ul><li>Python面向对象编程五部曲(上、中、下)</li></ul></li><li>数据分析与展示<ul><li>慕课北理工np，pandas…<ul><li><strong>240513 NumPu数据存储与函数</strong> <strong>240513</strong></li><li><strong>240514 图像的手绘效果</strong> <strong>240514</strong></li><li><strong>240516 Matplotlib入门</strong> <strong>240515</strong></li><li><strong>240518 Matploylib基础绘图函数示例 240516</strong></li><li><strong>240520 引力波的绘制 240516</strong></li><li><strong>240522 Pandas库入门 240518</strong></li><li><strong>240524 Pandas数据特征分析 240518</strong></li></ul></li></ul></li><li>光纤类课程<br>- </li><li>机器学习<ul><li>吴恩达Deeplearning.ai<ul><li>六月中下</li></ul></li><li>浙大胡浩基老师机器学习<ul><li><strong>240519 引言 240521</strong></li><li>240520 支持向量机</li><li>240525 人工神经网络</li><li>240530 深度学习</li><li>240605 强化学习</li><li>240610 传统机器学习</li></ul></li></ul></li><li>统计学习方法-李航+白板推导教程<ul><li>七月</li></ul></li><li>深度学习工具<ul><li>龙曲良TensorFlow2与Pytorch(多些)<ul><li>网易深度学习与PyTorch</li></ul></li><li>李沐动手学机器学习</li></ul></li><li>看论文改模型</li><li>学习标注自己的数据集</li><li>数据库</li><li>信号处理</li></ul><ul><li>唐宇迪opencv</li><li>跑一下YOLO、SSD、R-CNN传统目标检测模型</li></ul>]]></content>
    
    
    <categories>
      
      <category>不破不立</category>
      
    </categories>
    
    
    <tags>
      
      <tag>成长</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python与爬虫</title>
    <link href="/2024/04/22/20240422_crawler/"/>
    <url>/2024/04/22/20240422_crawler/</url>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>网络爬虫（又称为<a href="https://baike.baidu.com/item/网页蜘蛛/15696186?fromModule=lemma_inlink">网页蜘蛛</a>，网络机器人，在<a href="https://baike.baidu.com/item/FOAF/4916497?fromModule=lemma_inlink">FOAF</a>社区中间，更经常的称为网页追逐者），是一种按照一定的规则，自动地抓取<a href="https://baike.baidu.com/item/万维网/215515?fromModule=lemma_inlink">万维网</a>信息的<a href="https://baike.baidu.com/item/程序/13831935?fromModule=lemma_inlink">程序</a>或者<a href="https://baike.baidu.com/item/脚本/1697005?fromModule=lemma_inlink">脚本</a>。另外一些不常使用的名字还有蚂蚁、<a href="https://baike.baidu.com/item/自动索引/56622668?fromModule=lemma_inlink">自动索引</a>、<a href="https://baike.baidu.com/item/模拟程序/12726595?fromModule=lemma_inlink">模拟程序</a>或者蠕虫。</p><h2 id="场景分类"><a href="#场景分类" class="headerlink" title="场景分类"></a>场景分类</h2><ul><li>通用爬虫：抓取系统重要组成部分。抓取的是一整张页面数据。</li><li>聚焦爬虫：建立在通用爬虫基础上。抓取的是页面中特定的局部内容。</li><li>增量式爬虫：检测网站中数据更新的情况。只会抓取最新更新出来的数据。</li></ul><h1 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h1><h2 id="robots-txt协议"><a href="#robots-txt协议" class="headerlink" title="robots.txt协议"></a>robots.txt协议</h2><p>robots是告诉搜索引擎，你可以爬取收录我的什么页面，你不可以爬取和收录我的那些页面。robots很好的控制网站那些页面可以被爬取，那些页面不可以被爬取。</p><p><strong>主流的搜索引擎都会遵守robots协议</strong>。并且robots协议是爬虫爬取网站第一个需要爬取的文件。爬虫爬取robots文件后，会读取上面的协议，并准守协议爬取网站，收录网站。</p><p><strong>robots文件是一个纯文本文件，也就是常见的.txt文件</strong>。在这个文件中网站管理者可以声明该网站中不想被robots访问的部分，或者指定搜索引擎只收录指定的内容。因此，robots的优化会直接影响到搜索引擎对网站的收录情况。</p><img src="/2024/04/22/20240422_crawler/image-20240422170700595.png" class="" title="image-20240422170700595"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">Crawl-delay: <span class="hljs-number">5</span> 指定爬虫访问间隔为<span class="hljs-number">5</span>秒<br></code></pre></td></tr></table></figure><p>注意事项</p><ol><li>不要禁止爬虫爬取网站的所有，因为从经验来看，如果屏蔽一次，解封后好一段时间爬虫都不会来你网站，收录成为问题。</li><li>代码后需要【冒号+空格+斜杆】 ，比如“Disallow: /<em>?</em> ”</li><li>当网站为静态路径时，需要屏蔽掉所有动态链接。网站中存在一种链接被收录即可，避免一个页面2个链接。代码如下“Disallow: /<em>?</em> ”表示禁止所有带 ?号的网址被爬取。通常动态网址带有“?”“=”等。</li><li>根据自己网站情况定，屏蔽不需要收录的网址。</li></ol><h1 id="伪装策略"><a href="#伪装策略" class="headerlink" title="伪装策略"></a>伪装策略</h1><p>我们知道即使是一些规模很小的网站通常也会对来访者的身份做一下检查，如验证请求 Headers，而对于那些上了一定规模的网站就更不用说了。因此，为了让我们的爬虫能够成功爬取所需数据信息，我们需要让爬虫进行伪装，简单来说就是让爬虫的行为变得像普通用户访问一样。</p><h2 id="Request-Headers问题"><a href="#Request-Headers问题" class="headerlink" title="Request Headers问题"></a>Request Headers问题</h2><img src="/2024/04/22/20240422_crawler/image-20240424001733029.png" class="" title="image-20240424001733029"><p>在上图中，我们可以看到 Request Headers 中包含 Referer 和 User-Agent 两个属性信息，Referer 的作用是告诉服务器该网页是从哪个页面链接过来的，User-Agent 中文是用户代理，它是一个特殊字符串头，作用是让服务器能够识别用户使用的操作系统、CPU 类型、浏览器等信息。通常的处理策略是：1）对于要检查 Referer 的网站就加上；2）对于每个 request 都添加 User-Agent。</p><h2 id="IP限制问题"><a href="#IP限制问题" class="headerlink" title="IP限制问题"></a>IP限制问题</h2><p>有时我们可能会对一些网站进行长期或大规模的爬取，而我们在爬取时基本不会变换 IP，有的网站可能会监控一个 IP 的访问频率和次数，一但超过这个阈值，就可能认作是爬虫，从而对其进行了屏蔽，对于这种情况，我们要采取间歇性访问的策略。</p><p>通常我们爬取是不会变换 IP 的，但有时可能会有一些特殊情况，要长时间不间断对某网站进行爬取，这时我们就可能需要采用 IP 代理的方式，但这种方式一般会增加我们开销，也就是可能要多花钱。</p><h1 id="Requests库"><a href="#Requests库" class="headerlink" title="Requests库"></a>Requests库</h1><p>所谓爬虫就是模拟客户端发送网络请求，获取网络响应，并按照一定的规则解析获取的数据并保存的程序。要说 Python 的爬虫必然绕不过 Requests 库。</p><h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">Requests 唯一的一个非转基因的 Python HTTP 库，人类可以安全享用。警告：非专业使用其他 HTTP 库会导致危险的副作用，包括：安全缺陷症、冗余代码症、重新发明轮子症、啃文档症、抑郁、头疼、甚至死亡。<br>这个介绍还是比较生动形象的，便不再多说。安装使用终端命令 `pip install requests` 。<br></code></pre></td></tr></table></figure><h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><h3 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h3><p>导入 Requests 模块：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br></code></pre></td></tr></table></figure><p>获取网页：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">r = requests.get(<span class="hljs-string">&#x27;http://xxx.xxx&#x27;</span>)<br></code></pre></td></tr></table></figure><p>此时，我们获取了 Response 对象 r，我们可以通过 r 获取所需信息。Requests 简便的 API 意味着所有 HTTP 请求类型都是显而易见的，我们来看一下使用常见 HTTP 请求类型 get、post、put、delete 的示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">r = requests.head(<span class="hljs-string">&#x27;http://xxx.xxx/get&#x27;</span>)<br>r = requests.post(<span class="hljs-string">&#x27;http://xxx.xxx/post&#x27;</span>, data = &#123;<span class="hljs-string">&#x27;key&#x27;</span>:<span class="hljs-string">&#x27;value&#x27;</span>&#125;)<br>r = requests.put(<span class="hljs-string">&#x27;http://xxx.xxx/put&#x27;</span>, data = &#123;<span class="hljs-string">&#x27;key&#x27;</span>:<span class="hljs-string">&#x27;value&#x27;</span>&#125;)<br>r = requests.delete(<span class="hljs-string">&#x27;http://xxx.xxx/delete&#x27;</span>)<br></code></pre></td></tr></table></figure><p>通常我们会设置请求的超时时间，Requests 使用 <code>timeout</code> 参数来设置，单位是秒，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">r = requests.head(<span class="hljs-string">&#x27;http://xxx.xxx/get&#x27;</span>, timeout=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h3 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h3><p>在使用 get 方式发送请求时，我们会将键值对形式参数放在 URL 中问号的后面，如：<code>http://xxx.xxx/get?key=val</code> ，Requests 通过 params 关键字，以一个字符串字典来提供这些参数。比如要传 <code>key1=val1</code> 和 <code>key2=val2</code> 到 <code>http://xxx.xxx/get</code>，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">pms= &#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-string">&#x27;val1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;val2&#x27;</span>&#125;<br>r = requests.get(<span class="hljs-string">&quot;http://xxx.xxx/get&quot;</span>, params=pms)<br></code></pre></td></tr></table></figure><p>Requests 还允许将一个列表作为值传入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pms= &#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-string">&#x27;val1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: [<span class="hljs-string">&#x27;val2&#x27;</span>, <span class="hljs-string">&#x27;val3&#x27;</span>]&#125;<br></code></pre></td></tr></table></figure><p><strong><code>注</code></strong>：字典里值为 None 的键都不会被添加到 URL 的查询字符串里。</p><h3 id="响应内容"><a href="#响应内容" class="headerlink" title="响应内容"></a>响应内容</h3><p>我们来获取一下服务器的响应内容，这里地址 <code>https://api.github.com</code> 为例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br>r = requests.get(<span class="hljs-string">&#x27;https://api.github.com&#x27;</span>)<br><span class="hljs-built_in">print</span>(r.text)<br><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-comment"># &#123;&quot;current_user_url&quot;:&quot;https://api.github.com/user&quot;,&quot;current_user...</span><br></code></pre></td></tr></table></figure><p>当访问 r.text 之时，Requests 会使用其推测的文本编码，我们可以使用 <code>r.encoding</code> 查看其编码，也可以修改编码，如：<code>r.encoding = &#39;GBK&#39;</code>，当改变了编码，再次访问 r.text 时，Request 都将会使用 r.encoding 的新值。</p><ol><li><p>二进制响应内容 比如当我们要获取一张图片的数据，会以二进制的方式获取响应数据，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> BytesIO<br>r = requests.get(<span class="hljs-string">&#x27;https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=102&amp;__biz=MzU3Mzk1ODA5OQ==&amp;mid=2247483907&amp;idx=1&amp;sn=0e2bcd8811313327582623246795a26e&amp;send_time=&#x27;</span>)<br>i = Image.<span class="hljs-built_in">open</span>(BytesIO(r.content))<br><span class="hljs-built_in">print</span>(i)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#&lt;PIL.BmpImagePlugin.BmpImageFile image mode=L size=129x129 at 0x22B7A7A8510&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>JSON响应内容 Requests 中已经内置了 JSON 解码器，因此我们可以很容易的对 JSON 数据进行解析，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br>r = requests.get(<span class="hljs-string">&#x27;https://api.github.com&#x27;</span>)<br>r.json()<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#&#123;&#x27;current_user_url&#x27;: &#x27;https://api.github.com/user&#x27;, &#x27;current_user_authorizations_html_url&#x27;: &#x27;https://github.com/settings/connections/applications&#123;/client_id&#125;&#x27;, &#x27;authorizations_url&#x27;: &#x27;https://api.github.com/authorizations&#x27;, &#x27;code_search_url&#x27;: &#x27;https://api.github.com/search/code?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&#x27;, &#x27;commit_search_url&#x27;: &#x27;https://api.github.com/search/commits?q=&#123;query&#125;&#123;&amp;page,per_page,sort,order&#125;&#x27;,</span><br>......<br></code></pre></td></tr></table></figure><p><strong><code>注</code></strong>:成功调用 r.json() 并不一定响应成功，有的服务器会在失败的响应中包含一个 JSON 对象（比如 HTTP 500 的错误细节），这时我们就需要查看响应的状态码了 <code>r.status_code</code> 或 r.raise_for_status()，成功调用时 <code>r.status_code</code> 为 200，r.raise_for_status() 为 None。</p></li></ol><h3 id="自定义请求头"><a href="#自定义请求头" class="headerlink" title="自定义请求头"></a>自定义请求头</h3><p>当我们要给请求添加 headers 时，只需给 <code>headers</code> 参数传递一个字典即可，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">url = <span class="hljs-string">&#x27;http://xxx.xxx&#x27;</span><br>hds= &#123;<span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;xxx&#x27;</span>&#125;<br>r = requests.get(url, headers=hds)<br></code></pre></td></tr></table></figure><p><code>注</code>：自定义 headers 优先级是低于一些特定的信息的，如：在 <code>.netrc</code> 中设置了用户认证信息，使用 headers 设置的授权就不会生效，而当设置了 <code>auth</code> 参数，<code>.netrc</code> 的设置会无效。所有的 headers 值必须是 string、bytestring 或者 unicode，通常不建议使用 unicode。</p><h3 id="重定向与历史"><a href="#重定向与历史" class="headerlink" title="重定向与历史"></a>重定向与历史</h3><p>默认情况下，Requests 会自动处理除了 HEAD 以外的所有重定向，可以使用响应对象的 <code>history</code> 属性来追踪重定向，其返回为响应对象列表，这个列表是按照请求由晚到早进行排序的，看一下示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br>r = requests.get(<span class="hljs-string">&#x27;http://github.com&#x27;</span>)<br><span class="hljs-built_in">print</span>(r.history)<br><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-comment"># [&lt;Response [301]&gt;]</span><br></code></pre></td></tr></table></figure><p>如果使用的是get、post、put、delete、options、patch 可以使用 <code>allow_redirects</code> 参数禁用重定向。示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">r = requests.get(<span class="hljs-string">&#x27;http://xxx.xxx&#x27;</span>, allow_redirects=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><h3 id="错误与异常"><a href="#错误与异常" class="headerlink" title="错误与异常"></a>错误与异常</h3><p>当遇到网络问题（如：DNS 查询失败、拒绝连接等）时，Requests 会抛出 ConnectionError 异常；在 HTTP 请求返回了不成功的状态码时， Response.raise_for_status() 会抛出 HTTPError 异常；请求超时，会抛出 Timeout 异常；请求超过了设定的最大重定向次数，会抛出 TooManyRedirects 异常。所有 Requests 显式抛出的异常都继承自 requests.exceptions.RequestException。</p><h1 id="BeautifulSoup库"><a href="#BeautifulSoup库" class="headerlink" title="BeautifulSoup库"></a>BeautifulSoup库</h1><p>BeautifulSoup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库，它能够将 HTML 或 XML 转化为可定位的树形结构，并提供了导航、查找、修改功能，它会自动将输入文档转换为 Unicode 编码，输出文档转换为 UTF-8 编码。</p><p>BeautifulSoup 支持 Python 标准库中的 HTML 解析器和一些第三方的解析器，默认使用 Python 标准库中的 HTML 解析器，默认解析器效率相对比较低，如果需要解析的数据量比较大或比较频繁，推荐使用更强、更快的 lxml 解析器。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="BeautifulSoup-安装"><a href="#BeautifulSoup-安装" class="headerlink" title="BeautifulSoup 安装"></a><strong>BeautifulSoup 安装</strong></h3><p>如果使用 Debain 或 ubuntu 系统，可以通过系统的软件包管理来安装：<code>apt-get install Python-bs4</code>，如果无法使用系统包管理安装，可以使用 <code>pip install beautifulsoup4</code> 来安装。</p><h3 id="第三方解析器安装"><a href="#第三方解析器安装" class="headerlink" title="第三方解析器安装"></a><strong>第三方解析器安装</strong></h3><p>如果需要使用第三方解释器 lxml 或 html5lib，可是使用如下命令进行安装：<code>apt-get install Python-lxml(html5lib)</code> 和 <code>pip install lxml(html5lib)</code>。</p><div class="table-container"><table><thead><tr><th style="text-align:center">解析器</th><th style="text-align:center"><strong>使用方法</strong></th><th style="text-align:center"><strong>优势</strong></th><th style="text-align:center"><strong>劣势</strong></th></tr></thead><tbody><tr><td style="text-align:center">Python标准库</td><td style="text-align:center">BeautifulSoup(markup,”html.parser”)</td><td style="text-align:center">Python的内置标准库；执行速度适中；文档容错能力强。</td><td style="text-align:center">Python 2.7.3 or 3.2.2前的版本中文档容错能力差。</td></tr><tr><td style="text-align:center">lxml HTML 解析器</td><td style="text-align:center">BeautifulSoup(markup,”lxml”)</td><td style="text-align:center">速度快；文档容错能力强。</td><td style="text-align:center">需要安装C语言库。</td></tr><tr><td style="text-align:center">lxml XML 解析器</td><td style="text-align:center"><code>BeautifulSoup(markup,[&quot;lxml-xml&quot;])``BeautifulSoup(markup,&quot;xml&quot;)</code></td><td style="text-align:center">速度快；唯一支持XML的解析器。</td><td style="text-align:center">需要安装C语言库</td></tr><tr><td style="text-align:center">html5lib</td><td style="text-align:center"><code>BeautifulSoup(markup,&quot;html5lib&quot;)</code></td><td style="text-align:center">最好的容错性；以浏览器的方式解析文档；生成HTML5格式的文档。</td><td style="text-align:center">速度慢；不依赖外部扩展。</td></tr></tbody></table></div><h2 id="快速上手-1"><a href="#快速上手-1" class="headerlink" title="快速上手"></a>快速上手</h2><p>将一段文档传入 BeautifulSoup 的构造方法，就能得到一个文档的对象，可以传入一段字符串或一个文件句柄，示例如下：</p><p><strong>index.html文件</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">html = <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-string">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="hljs-string">&lt;head&gt;</span><br><span class="hljs-string">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="hljs-string">    &lt;title&gt;BeautifulSoup学习&lt;/title&gt;</span><br><span class="hljs-string">&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">Hello BeautifulSoup</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>使用示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-comment">#使用默认解析器</span><br>soup = BeautifulSoup(html,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-comment">#使用 lxml 解析器</span><br>soup = BeautifulSoup(html,<span class="hljs-string">&#x27;lxml&#x27;</span>)<br></code></pre></td></tr></table></figure><p><strong>举例本地文件</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-comment">#使用默认解析器</span><br>soup = BeautifulSoup(html,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-comment">#使用 lxml 解析器</span><br>soup = BeautifulSoup(html,<span class="hljs-string">&#x27;lxml&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="对象的种类"><a href="#对象的种类" class="headerlink" title="对象的种类"></a>对象的种类</h2><p>BeautifulSoup 将 HTML 文档转换成一个树形结构，每个节点都是 Python 对象，所有对象可以归纳为4种：<code>Tag</code>，<code>NavigableString</code>，<code>BeautifulSoup</code>，<code>Comment</code>。</p><h3 id="Tag-对象"><a href="#Tag-对象" class="headerlink" title="Tag 对象"></a><strong>Tag 对象</strong></h3><p>Tag 对象与 HTML 或 XML 原生文档中的 tag 相同，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title&gt;BeautifulSoup学习&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;lxml&#x27;</span>)<br>tag = soup.title<br>tp =<span class="hljs-built_in">type</span>(tag)<br><span class="hljs-built_in">print</span>(tag)<br><span class="hljs-built_in">print</span>(tp)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">&lt;title&gt;BeautifulSoup学习&lt;/title&gt;</span><br><span class="hljs-string">&lt;class &#x27;bs4.element.Tag&#x27;&gt;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>Tag 有很多方法和属性，这里先看一下它的的两种常用属性：<code>name</code> 和 <code>attributes</code>。</p><p>我们可以通过 <code>.name</code> 来获取 tag 的名字，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title&gt;BeautifulSoup学习&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;lxml&#x27;</span>)<br>tag = soup.title<br><span class="hljs-built_in">print</span>(tag.name)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#title</span><br></code></pre></td></tr></table></figure><p>我们还可以修改 tag 的 name，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">tag.name = <span class="hljs-string">&#x27;title1&#x27;</span><br><span class="hljs-built_in">print</span>(tag)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#&lt;title1&gt;BeautifulSoup学习&lt;/title1&gt;</span><br></code></pre></td></tr></table></figure><p>一个 tag 可能有很多个属性，先看一它的 <code>class</code> 属性，其属性的操作方法与字典相同，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title class=&quot;tl&quot;&gt;BeautifulSoup学习&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;lxml&#x27;</span>)<br>tag = soup.title<br>cls = tag[<span class="hljs-string">&#x27;class&#x27;</span>]<br><span class="hljs-built_in">print</span>(cls)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#[&#x27;tl&#x27;]</span><br></code></pre></td></tr></table></figure><p>我们还可以使用 <code>.attrs</code> 来获取，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">ats = tag.attrs<br><span class="hljs-built_in">print</span>(ats)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#&#123;&#x27;class&#x27;: [&#x27;tl&#x27;]&#125;</span><br></code></pre></td></tr></table></figure><p>tag 的属性可以被添加、修改和删除，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#添加 id 属性</span><br>tag[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-number">1</span><br><br><span class="hljs-comment">#修改 class 属性</span><br>tag[<span class="hljs-string">&#x27;class&#x27;</span>] = <span class="hljs-string">&#x27;tl1&#x27;</span><br><br><span class="hljs-comment">#删除 class 属性</span><br><span class="hljs-keyword">del</span> tag[<span class="hljs-string">&#x27;class&#x27;</span>]<br></code></pre></td></tr></table></figure><h3 id="NavigableString-对象"><a href="#NavigableString-对象" class="headerlink" title="NavigableString 对象"></a><strong>NavigableString 对象</strong></h3><p>NavigableString 类是用来包装 tag 中的字符串内容的，使用 <code>.string</code> 来获取字符串内容，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">str</span> = tag.string<br></code></pre></td></tr></table></figure><p>可以使用 <code>replace_with()</code> 方法将原有字符串内容替换成其它内容 ，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">tag.string.replace_with(<span class="hljs-string">&#x27;BeautifulSoup&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="BeautifulSoup-对象"><a href="#BeautifulSoup-对象" class="headerlink" title="BeautifulSoup 对象"></a><strong>BeautifulSoup 对象</strong></h3><p>BeautifulSoup 对象表示的是一个文档的全部内容，它并不是真正的 HTML 或 XML 的 tag，因此它没有 <code>name</code> 和 <code>attribute</code> 属性，为方便查看它的 <code>name</code> 属性，BeautifulSoup 对象包含了一个值为 <code>[document]</code> 的特殊属性 <code>.name</code>，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title class=&quot;tl&quot;&gt;BeautifulSoup学习&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;lxml&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.name)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#[document]</span><br></code></pre></td></tr></table></figure><h3 id="Comment-对象"><a href="#Comment-对象" class="headerlink" title="Comment 对象"></a><strong>Comment 对象</strong></h3><p>Comment 对象是一个特殊类型的 NavigableString 对象，它会使用特殊的格式输出，看一下例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title class=&quot;tl&quot;&gt;Hello BeautifulSoup&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br>comment = soup.title.prettify()<br><span class="hljs-built_in">print</span>(comment)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">&lt;title class=&quot;tl&quot;&gt;</span><br><span class="hljs-string"> Hello BeautifulSoup</span><br><span class="hljs-string">&lt;/title&gt;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>我们前面看的例子中 tag 中的字符串内容都不是注释内容，现在将字符串内容换成注释内容，我们来看一下效果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title class=&quot;tl&quot;&gt;&lt;!--Hello BeautifulSoup--&gt;&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">str</span> = soup.title.string<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>)<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#Hello BeautifulSoup</span><br></code></pre></td></tr></table></figure><p>通过结果我们发现注释符号 <code>&lt;!----&gt;</code> 被自动去除了，这一点我们要注意一下。</p><h2 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a><strong>搜索文档树</strong></h2><p>BeautifulSoup 定义了很多搜索方法。</p><p><strong>find_all()</strong></p><p>find_all() 方法搜索当前 tag 的所有 tag 子节点，方法详细如下：<code>find_all(name=None, attrs=&#123;&#125;, recursive=True, text=None,limit=None, **kwargs)</code>，来具体看一下各个参数。</p><p><code>name</code> 参数可以查找所有名字为 <code>name</code> 的 tag，字符串对象会被自动忽略掉，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title class=&quot;tl&quot;&gt;Hello BeautifulSoup&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.find_all(<span class="hljs-string">&#x27;title&#x27;</span>))<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#[&lt;title class=&quot;tl&quot;&gt;Hello BeautifulSoup&lt;/title&gt;]</span><br></code></pre></td></tr></table></figure><p><code>attrs</code> 参数定义一个字典参数来搜索包含特殊属性的 tag，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;title class=&quot;tl&quot;&gt;Hello BeautifulSoup&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br>soup.find_all(attrs=&#123;<span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;tl&quot;</span>&#125;)<br></code></pre></td></tr></table></figure><p>调用 find_all() 方法时，默认会检索当前 tag 的所有子孙节点，通过设置参数 <code>recursive=False</code>，可以只搜索 tag 的直接子节点，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;html&gt;&lt;head&gt;&lt;title&gt;Hello BeautifulSoup&lt;/title&gt;&lt;/head&gt;&lt;/html&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.find_all(<span class="hljs-string">&#x27;title&#x27;</span>,recursive=<span class="hljs-literal">False</span>))<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#[]</span><br></code></pre></td></tr></table></figure><p>通过 <code>text</code> 参数可以搜搜文档中的字符串内容，它接受字符串、正则表达式、列表、True，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-keyword">import</span> re<br><br>soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;head&gt;myHead&lt;/head&gt;&lt;title&gt;BeautifulSoup&lt;/title&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-comment">#字符串</span><br>soup.find_all(text=<span class="hljs-string">&#x27;BeautifulSoup&#x27;</span>)<br><span class="hljs-comment">#[&#x27;BeautifulSoup&#x27;]</span><br><br><span class="hljs-comment">#正则表达式</span><br>soup.find_all(soup.find_all(text=re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&#x27;title&#x27;</span>)))<br><span class="hljs-comment">#[&lt;head&gt;myHead&lt;/head&gt;, &lt;title&gt;BeautifulSoup&lt;/title&gt;]</span><br><br><span class="hljs-comment">#列表</span><br>soup.find_all(soup.find_all(text=[<span class="hljs-string">&#x27;head&#x27;</span>,<span class="hljs-string">&#x27;title&#x27;</span>]))<br><span class="hljs-comment">#[&lt;head&gt;myHead&lt;/head&gt;, &lt;title&gt;BeautifulSoup&lt;/title&gt;]</span><br><br><span class="hljs-comment">#True</span><br>soup.find_all(text=<span class="hljs-literal">True</span>)<br><span class="hljs-comment">#[&#x27;myHead&#x27;, &#x27;BeautifulSoup&#x27;]</span><br></code></pre></td></tr></table></figure><p><code>limit</code> 参数与 SQL 中的 <code>limit</code> 关键字类似，用来限制搜索的数据，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;a id=&quot;link1&quot; href=&quot;http://example.com/elsie&quot;&gt;Elsie&lt;/a&gt;&lt;a id=&quot;link2&quot; href=&quot;http://example.com/elsie&quot;&gt;Elsie&lt;/a&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br>soup.find_all(<span class="hljs-string">&#x27;a&#x27;</span>, limit=<span class="hljs-number">1</span>)<br><span class="hljs-comment">#[&lt;a href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</span><br></code></pre></td></tr></table></figure><p>我们经常见到 Python 中 <code>*arg</code> 和 <code>**kwargs</code> 这两种可变参数，<code>*arg</code> 表示非键值对的可变数量的参数，将参数打包为 tuple 传递给函数；<code>**kwargs</code> 表示关键字参数，参数是键值对形式的，将参数打包为 dict 传递给函数。</p><p>使用多个指定名字的参数可以同时过滤 tag 的多个属性，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;a id=&quot;link1&quot; href=&quot;http://example.com/elsie&quot;&gt;Elsie&lt;/a&gt;&lt;a id=&quot;link2&quot; href=&quot;http://example.com/elsie&quot;&gt;Elsie&lt;/a&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br>soup.find_all(href=re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&quot;elsie&quot;</span>),<span class="hljs-built_in">id</span>=<span class="hljs-string">&#x27;link1&#x27;</span>)<br><span class="hljs-comment">#[&lt;a href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</span><br></code></pre></td></tr></table></figure><p>有些 tag 属性在搜索不能使用，如 HTML5 中的 <code>data-*</code> 属性，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;div data-foo=&quot;value&quot;&gt;foo!&lt;/div&gt;&#x27;</span>)<br>soup.find_all(data-foo=<span class="hljs-string">&#x27;value&#x27;</span>)<br></code></pre></td></tr></table></figure><p>首先当我在 Pycharm 中输入 <code>data-foo=&#39;value&#39;</code> 便提示语法错误了，然后我不管提示直接执行提示 <code>SyntaxError: keyword can&#39;t be an expression</code> 这个结果也验证了 <code>data-*</code> 属性在搜索中不能使用。我们可以通过 find_all() 方法的 <code>attrs</code> 参数定义一个字典参数来搜索包含特殊属性的 tag，示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(soup.find_all(attrs=&#123;<span class="hljs-string">&#x27;data-foo&#x27;</span>: <span class="hljs-string">&#x27;value&#x27;</span>&#125;))<br><span class="hljs-comment"># [&lt;div data-foo=&quot;value&quot;&gt;foo!&lt;/div&gt;]</span><br></code></pre></td></tr></table></figure><h3 id="find"><a href="#find" class="headerlink" title="find()"></a><strong>find()</strong></h3><p>方法详细如下：<code>find(name=None, attrs=&#123;&#125;, recursive=True, text=None,**kwargs)</code>，我们可以看出除了少了 <code>limit</code> 参数，其它参数与方法 <code>find_all</code> 一样，不同之处在于：find_all() 方法的返回结果是一个列表，find() 方法返回的是第一个节点，find_all() 方法没有找到目标是返回空列表，find() 方法找不到目标时，返回 None。来看个例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;a id=&quot;link1&quot; href=&quot;http://example.com/elsie&quot;&gt;Elsie&lt;/a&gt;&lt;a id=&quot;link2&quot; href=&quot;http://example.com/elsie&quot;&gt;Elsie&lt;/a&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.find_all(<span class="hljs-string">&#x27;a&#x27;</span>, limit=<span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(soup.find(<span class="hljs-string">&#x27;a&#x27;</span>))<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">[&lt;a href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</span><br><span class="hljs-string">&lt;a href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>从示例中我们也可以看出，find() 方法返回的是找到的第一个节点。</p><h3 id="find-parents-和-find-parent"><a href="#find-parents-和-find-parent" class="headerlink" title="find_parents() 和 find_parent()"></a><strong>find_parents() 和 find_parent()</strong></h3><p>find_all() 和 find() 用来搜索当前节点的所有子节点，find_parents() 和 find_parent() 则用来搜索当前节点的父辈节点。</p><h3 id="find-next-siblings-和-find-next-sibling"><a href="#find-next-siblings-和-find-next-sibling" class="headerlink" title="find_next_siblings() 和 find_next_sibling()"></a><strong>find_next_siblings() 和 find_next_sibling()</strong></h3><p>这两个方法通过 .next_siblings 属性对当前 tag 所有后面解析的兄弟 tag 节点进行迭代，find_next_siblings() 方法返回所有符合条件的后面的兄弟节点，find_next_sibling() 只返回符合条件的后面的第一个tag节点。</p><h3 id="find-previous-siblings-和-find-previous-sibling"><a href="#find-previous-siblings-和-find-previous-sibling" class="headerlink" title="find_previous_siblings() 和 find_previous_sibling()"></a><strong>find_previous_siblings() 和 find_previous_sibling()</strong></h3><p>这两个方法通过 .previous_siblings 属性对当前 tag 前面解析的兄弟 tag 节点进行迭代，find_previous_siblings() 方法返回所有符合条件的前面的兄弟节点，find_previous_sibling() 方法返回第一个符合条件的前面的兄弟节点。</p><h3 id="find-all-next-和-find-next"><a href="#find-all-next-和-find-next" class="headerlink" title="find_all_next() 和 find_next()"></a><strong>find_all_next() 和 find_next()</strong></h3><p>这两个方法通过 .next_elements 属性对当前 tag 之后的 tag 和字符串进行迭代，find_all_next() 方法返回所有符合条件的节点，find_next() 方法返回第一个符合条件的节点。</p><h3 id="find-all-previous-和-find-previous"><a href="#find-all-previous-和-find-previous" class="headerlink" title="find_all_previous() 和 find_previous()"></a><strong>find_all_previous() 和 find_previous()</strong></h3><p>这两个方法通过 .previous_elements 属性对当前节点前面的 tag 和字符串进行迭代，find_all_previous() 方法返回所有符合条件的节点，find_previous() 方法返回第一个符合条件的节点。</p><h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a><strong>CSS选择器</strong></h2><p>BeautifulSoup 支持大部分的 CSS 选择器，在 Tag 或 BeautifulSoup 对象的 .select() 方法中传入字符串参数，即可使用 CSS 选择器的语法找到 tag，返回类型为列表。示例如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">soup = BeautifulSoup(<span class="hljs-string">&#x27;&lt;body&gt;&lt;a id=&quot;link1&quot; class=&quot;elsie&quot;&gt;Elsie&lt;/a&gt;&lt;a id=&quot;link2&quot; class=&quot;elsie&quot;&gt;Elsie&lt;/a&gt;&lt;/body&gt;&#x27;</span>,<span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.select(<span class="hljs-string">&#x27;a&#x27;</span>))<br><br><span class="hljs-comment">#输出结果</span><br><span class="hljs-comment">#[&lt;a clss=&quot;elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;, &lt;a clss=&quot;elsie&quot; id=&quot;link2&quot;&gt;Elsie&lt;/a&gt;]</span><br></code></pre></td></tr></table></figure><p>通过标签逐层查找</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;body a&#x27;</span>)<br></code></pre></td></tr></table></figure><p>找到某个 tag 标签下的直接子标签</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;body &gt; a&#x27;</span>)<br></code></pre></td></tr></table></figure><p>通过类名查找</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;.elsie&#x27;</span>)<br>soup.select(<span class="hljs-string">&#x27;[class~=elsie]&#x27;</span>)<br></code></pre></td></tr></table></figure><p>通过 id 查找</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;#link1&#x27;</span>)<br></code></pre></td></tr></table></figure><p>使用多个选择器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;#link1,#link2&#x27;</span>)<br></code></pre></td></tr></table></figure><p>通过属性查找</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;a[class]&#x27;</span>)<br></code></pre></td></tr></table></figure><p>通过属性的值来查找</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select(<span class="hljs-string">&#x27;a[class=&quot;elsie&quot;]&#x27;</span>)<br></code></pre></td></tr></table></figure><p>查找元素的第一个</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">soup.select_one(<span class="hljs-string">&#x27;.elsie&#x27;</span>)<br></code></pre></td></tr></table></figure><p>查找兄弟节点标签</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#查找所有</span><br>soup.select(<span class="hljs-string">&#x27;#link1 ~ .elsie&#x27;</span>)<br><span class="hljs-comment">#查找第一个</span><br>soup.select(<span class="hljs-string">&#x27;#link1 + .elsie&#x27;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>数据获取</category>
      
    </categories>
    
    
    <tags>
      
      <tag>爬虫</tag>
      
      <tag>数据分析</tag>
      
      <tag>小甲鱼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何在博客中渲染数学公式</title>
    <link href="/2024/04/12/20240412_AddMathToBlogs/"/>
    <url>/2024/04/12/20240412_AddMathToBlogs/</url>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>​        在博客写作过程中，经常需要往文章中插入数学公式，对于不熟悉LaTex语法的人来说，我们自然希望能使用<code>MathType</code>编辑公式，然后往文章中插入<code>LaTex</code>语法的公式即可。然而，如果使用<code>Hexo</code>部署博客，<code>Hexo</code>自带的默认渲染引擎<a href="https://link.zhihu.com/?target=https%3A//github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>无法渲染<code>LaTex</code>公式。</p><p>​        <a href="https://www.latexlive.com/##">在线LaTeX公式编辑器</a></p><h1 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h1><h2 id="hexo-math插件"><a href="#hexo-math插件" class="headerlink" title="hexo-math插件"></a>hexo-math插件</h2><p>​    首先，安装<a href="https://link.zhihu.com/?target=https%3A//github.com/hexojs/hexo-math">hexo-math</a>插件，该插件使用<code>MathJax/KaTex</code>来渲染数学公式:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> hexo-<span class="hljs-keyword">math</span> --save<br></code></pre></td></tr></table></figure><p>​    安装完成后，配置目录下的<code>_config.yml</code>，加入下面配置信息：</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">math</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">engine</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&#x27;mathjax&#x27;</span><br>  <span class="hljs-attribute">mathjax</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">src</span><span class="hljs-punctuation">:</span> <span class="hljs-string">custom_mathjax_source</span><br>    <span class="hljs-attribute">config</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-comment"># MathJax config</span><br></code></pre></td></tr></table></figure><p>​    我在_config.主题.yml下还加了下面配置信息：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mathjax:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">per_page:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">cdn:</span> <span class="hljs-string">//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span><br></code></pre></td></tr></table></figure><h2 id="更改Hexo渲染引擎"><a href="#更改Hexo渲染引擎" class="headerlink" title="更改Hexo渲染引擎"></a>更改Hexo渲染引擎</h2><p>​    更改<code>Hexo</code>的渲染引擎。将<code>Hexo</code>的默认渲染引擎是<code>hexo-renderer-marked</code>替换为<a href="https://link.zhihu.com/?target=https%3A//github.com/sun11/hexo-renderer-kramed">hexo-renderer-kramed</a>。之所以这么做，是因为<code>Hexo</code>默认渲染引擎会将$$$$之间的下划线 <code>_</code> 解析成<code>HTML</code>中的<code>&lt;i&gt;</code>。然而，在<code>LaTex</code>公式中，经常用下划线 <code>_</code> 表示下标，这就导致冲突。而<code>hexo-renderer-kramed</code>在<code>hexo-renderer-marked</code>基础上修改了这个Bug。在安装<code>hexo-renderer-kramed</code>之前，需要卸载<code>hexo-renderer-marked</code>，顺序执行以下两行命令完成卸载与安装：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm uninstall hexo-renderer-marked <span class="hljs-comment">--save</span><br>npm install hexo-renderer-kramed <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><h2 id="解决语义冲突"><a href="#解决语义冲突" class="headerlink" title="解决语义冲突"></a>解决语义冲突</h2><p>​    在markdown中，斜体用下划线<code>_</code>或星号<code>*</code>表示，而在<code>LaTex</code>中，下划线<code>_</code>表示下标。为了解决这个冲突，需要修改两处。在博客根目录下，进入<code>node_modules\kramed\lib\rules\inline.js</code>，修改第11行escape变量的值（这一步是在原基础上对<code>,&#123;,&#125;</code>的<code>转义(escape)</code>）：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs r">修改前：escape<span class="hljs-operator">:</span> <span class="hljs-operator">/</span><span class="hljs-operator">^</span><span class="hljs-punctuation">\</span><span class="hljs-punctuation">\</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">\</span><span class="hljs-punctuation">\</span>`*&#123;&#125;\[\]()#$+\-.!_&gt;])/,<br>修改后：escape: /^\\([`<span class="hljs-operator">*</span><span class="hljs-punctuation">\</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">\</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-comment">#$+\-.!_&gt;])/,</span><br></code></pre></td></tr></table></figure><p>​    同时，把第20行的<code>em</code>变量也做相应的修改：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">修改前：em: /^\b_((?:<span class="hljs-emphasis">__|[\s\S])+?)_</span>\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,<br>修改后：em: /^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,<br></code></pre></td></tr></table></figure><h2 id="博客开头mathjax开关"><a href="#博客开头mathjax开关" class="headerlink" title="博客开头mathjax开关"></a>博客开头mathjax开关</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br>  <span class="hljs-attr">title:</span> <span class="hljs-string">xxxxxxxxxxxxxxx</span><br>  <span class="hljs-attr">tags:</span> <span class="hljs-string">xxx</span><br>  <span class="hljs-attr">mathjax:</span> <span class="hljs-literal">true</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><h2 id="公式单行居中"><a href="#公式单行居中" class="headerlink" title="公式单行居中"></a>公式单行居中</h2><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="hljs-template-variable">&#123;%raw%&#125;</span><span class="language-xml"> $$evidence_</span><span class="hljs-template-variable">&#123;i&#125;</span><span class="language-xml">=\sum_</span><span class="hljs-template-variable">&#123;j&#125;</span><span class="language-xml">W_</span><span class="hljs-template-variable">&#123;ij&#125;</span><span class="language-xml">x_</span><span class="hljs-template-variable">&#123;j&#125;</span><span class="language-xml">+b_</span><span class="hljs-template-variable">&#123;i&#125;</span><span class="language-xml"> $$</span><span class="hljs-template-variable">&#123;% endraw %&#125;</span><br></code></pre></td></tr></table></figure> $$evidence_{i}=\sum_{j}W_{ij}x_{j}+b_{i} $$<h2 id="公式嵌入到句子中"><a href="#公式嵌入到句子中" class="headerlink" title="公式嵌入到句子中"></a><strong>公式嵌入到句子中</strong></h2><p>若想在一句话中<code>嵌入公式</code>，则只需要在<code>LaTex</code>公式两端用一个<code>$</code>，如：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal">在公式<span class="hljs-variable">$ </span>evidence_&#123;i&#125;=\sum_&#123;j&#125;W_&#123;ij&#125;x_&#123;j&#125;+b_&#123;i&#125; <span class="hljs-variable">$中</span>，<span class="hljs-variable">$W</span>_i<span class="hljs-variable">$和</span><span class="hljs-variable">$b</span>_i<span class="hljs-variable">$分</span>别为类别的权值和偏置。<br></code></pre></td></tr></table></figure><p>在公式$evidence_{i}=\sum_{j}W_{ij}x_{j}+b_{i}$中，$W_i$和$b_i$分别为类别的权值和偏置。</p><h1 id="与MathType结合使用"><a href="#与MathType结合使用" class="headerlink" title="与MathType结合使用"></a><strong>与MathType结合使用</strong></h1><p>​    对于比较复杂的公式，如果不熟悉<code>LaTex</code>语法，直接写起来很麻烦，所以我尝试先使用<code>MathType</code>将公式写好，再复制公式，并以<code>LaTex</code>格式粘贴到markdown中。按照MathType<a href="https://link.zhihu.com/?target=https%3A//docs.wiris.com/en/mathtype/mathtype_desktop/mathjax%23write_equations_for_a_mathjax-enabled_website">官方教程</a>，对<code>Preferences</code>下的<code>Cut and Copy Preferences</code>进行设置。如下图：</p><img src="/2024/04/12/20240412_AddMathToBlogs/image-20240412012449378.png" class="" title="image-20240412012449378"><p>粘贴出现错误</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">INFO  [hexo-math] <span class="hljs-keyword">Using</span> engine <span class="hljs-comment">&#x27;mathjax&#x27;</span><br>INFO  Start processing<br>FATAL Something<span class="hljs-comment">&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br>Template render <span class="hljs-keyword">error</span>: (unknown path) [Line <span class="hljs-number">52</span>, Column <span class="hljs-number">56</span>]<br>  expected variable <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>​    解决，参考<a href="https://www.jianshu.com/p/738ebe02029b">Hexo的一个小BUG</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 、">在公式的前后分别加上&#123;% raw%&#125;和&#123;% endraw %&#125;:&#123;% raw%&#125; 数学公式 &#123;% endraw %&#125;<br></code></pre></td></tr></table></figure><p>​    具体地，如下所示：</p><ul><li><p>以<code>LaTex2.09 and later</code>或<code>MathJax:LaTex</code>方式粘贴:</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">&#123;% raw%&#125; \[&#123;x_&#123;1,2&#125;&#125; = \frac</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">-</span> b \pm \sqrt &#123;&#123;b^<span class="hljs-number">2</span>&#125; - <span class="hljs-number">4</span>ac&#125; &#125;&#125;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">2a</span>&#125;&#125;</span><span class="language-xml">\] &#123;% endraw %&#125;</span><br></code></pre></td></tr></table></figure><p>效果为：</p> \[{x_{1,2}} = \frac{{ - b \pm \sqrt {{b^2} - 4ac} }}{{2a}}\] </li><li><p>以Plain Tex方式粘贴：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">&#123;% raw%&#125; $$&#123;x_&#123;1,2&#125;&#125; = </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">-</span> b \pm \sqrt &#123;&#123;b^<span class="hljs-number">2</span>&#125; - <span class="hljs-number">4</span>ac&#125; &#125; \over &#123;<span class="hljs-number">2</span>a&#125;&#125;</span><span class="language-xml">$$ &#123;% endraw %&#125;</span><br></code></pre></td></tr></table></figure><p>效果为：</p> $${x_{1,2}} = {{ - b \pm \sqrt {{b^2} - 4ac} } \over {2a}}$$ </li><li><p>在句子中间粘贴：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">公式在句子中显示：&#123;% raw%&#125; $&#123;x_&#123;1,2&#125;&#125; = </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">-</span> b \pm \sqrt &#123;&#123;b^<span class="hljs-number">2</span>&#125; - <span class="hljs-number">4</span>ac&#125; &#125; \over &#123;<span class="hljs-number">2</span>a&#125;&#125;</span><span class="language-xml">$ &#123;% endraw %&#125;。</span><br></code></pre></td></tr></table></figure><p>效果为：</p><p>公式在句子中显示： ${x_{1,2}} = {{ - b \pm \sqrt {{b^2} - 4ac} } \over {2a}}$ 。</p></li></ul><h1 id="鸣谢博文"><a href="#鸣谢博文" class="headerlink" title="鸣谢博文"></a>鸣谢博文</h1><p><a href="https://zhuanlan.zhihu.com/p/108766968">结合MathType和MathJax在Hexo博客中插入数学公式 </a></p>]]></content>
    
    
    <categories>
      
      <category>搭建网站</category>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数学公式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>线性回归</title>
    <link href="/2024/04/10/20240411_linearRegression/"/>
    <url>/2024/04/10/20240411_linearRegression/</url>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>&emsp;&emsp;一个事物唯一由另一个事物决定</p><h2 id="线性"><a href="#线性" class="headerlink" title="线性"></a>线性</h2><p>&emsp;&emsp;类似二元直角坐标系，描出关系图形是一条直线，称为线性关系</p><h2 id="回归"><a href="#回归" class="headerlink" title="回归"></a>回归</h2><p>&emsp;&emsp;回归分析是一种统计方法,于对具有一个或多个自变量的因变量(目标变量)和自变量(预测变量)之间的关系进行建模。具体地说，回归分析有助于我们理解在其他自变量保持固定的情况下，自变量的值对应于自变量的变化方式。它可以预测连续/实际值,例如温度,年龄,工资,价格等。</p><p>&emsp;&emsp;回归是一种<strong>有监督</strong>的学习技术，有助于<strong>发现变量之间的相关性</strong>,并使我们能够基于一个或多个预测变量来预测连续输出变量。它主要用于<strong>预测，时间序列建模以及确定变量之间的因果关系</strong>。</p><h1 id="简单线性回归模型"><a href="#简单线性回归模型" class="headerlink" title="简单线性回归模型"></a><strong>简单线性回归模型</strong></h1> $$\hat{y}= h(x) = w*x +b  $$<p>&emsp;&emsp;其中$w$叫权重参数，$b$叫偏置或者截距。当求解得到未知参数$w$，$b$之后，也就意味着我们得到了这个预测模型。假设给定一个房屋面积$x$，就能够预测出其对应的房价。</p><h2 id="求解线性回归模型"><a href="#求解线性回归模型" class="headerlink" title="求解线性回归模型"></a><strong>求解线性回归模型</strong></h2><p>&emsp;&emsp;当建立好一个模型后，自然而然想到的就是如何通过给定的数据，也叫训练集（Training Data），来对模型$h(x)$进行求解。在中学时期我们倒是学过如何通过两个坐标点来求解过这两点的直线，可在上述的场景中这种做法显然行不通的（因为所有的点并不在一条直线上），那有没有什么好的解决的办法呢？</p><p>&emsp;&emsp;此时就需要我们转换一下思路了，既然不能直接来进行求解那就换一种间接的方式。现在来想象一下，当$h(x)$满足一个什么样的条件时，它才能称得上是一个好的$h(x)$? 回想一下求解$h(x)$的目的是什么，不就是希望输入面积$x$后能够输出”准确”的房价$h(x)$吗 ？既然直接求解$h(x)$不好入手，那么我们就从“准确”来入手。</p><p>&emsp;&emsp;可又怎么来定义准确呢？在这里，我们可以通过计算每个样本的真实房价与预测房价之间的均方误差来对“准确”进行刻画</p> $$ J(w,b) = {1 \over 2m}  \sum_{i=1}^{m} \left ( y^{(i)} - \hat{y^(i)} \right ) ^2  $$ $$\hat{y}^{(i)} = h(x^{(i)}) = wx^{(i)}+b$$ <p>&emsp;&emsp;其中，$m$表示样本数数量$x^{(i)}$表示第$i$个样本的，也就是第$i$个房屋的面积；$y^{(i)}$表示第$i$个房屋的真实价格；$\hat{y}^{(i)}$表示第$i$个房屋的预测价格。</p><p>&emsp;&emsp;由式可知，当函数$J(w,b)$取最小值时的参数$\hat{w},\hat{b}$，就是要求的目标参数。为什么？因为当$J(w,b)$取最小值就意味着此时所有样本的预测值与真实值之间的误差（Error）最小。如果极端一点，那就是所有预测值都等同于真实值，此时的$J(w,b)$就是0了。</p><h2 id="代价函数"><a href="#代价函数" class="headerlink" title="代价函数"></a>代价函数</h2><p>&emsp;&emsp;因此，对于如何求解模型$h(x)$的问题就转换成了如何最小化函数$J(w,b)$的问题。而$J(w,b)$也有一个专门的术语叫目标函（Objective Function）或者是代价函数（Cost Function）亦或是<a href="https://www.zhihu.com/search?q=损失函数&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra={&quot;sourceType&quot;%3A&quot;answer&quot;%2C&quot;sourceId&quot;%3A2183691849}">损失函数</a>。</p><h2 id="梯度下降"><a href="#梯度下降" class="headerlink" title="梯度下降"></a>梯度下降</h2><img src="/2024/04/10/20240411_linearRegression/image-20240412221504247.png" class="" title="image-20240412221504247"><p><a href="https://zhuanlan.zhihu.com/p/80887841">图片来源</a></p><h1 id="样例与代码"><a href="#样例与代码" class="headerlink" title="样例与代码"></a>样例与代码</h1>]]></content>
    
    
    <categories>
      
      <category>人工智能</category>
      
      <category>机器学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>机器学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Hexo+GitHub搭建个人免费博客</title>
    <link href="/2024/04/09/20240409_github&amp;hexo/"/>
    <url>/2024/04/09/20240409_github&amp;hexo/</url>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="GitHub-Pages与Hexo"><a href="#GitHub-Pages与Hexo" class="headerlink" title="GitHub Pages与Hexo"></a>GitHub Pages与Hexo</h2><ul><li><p>GitHub Pages 是由 GitHub 官方提供的一种免费的静态站点托管服务，让我们可以在 GitHub 仓库里托管和发布自己的静态网站页面。</p></li><li><p>Hexo 是一个快速、简洁且高效的静态博客框架，它基于 Node.js 运行，可以将我们撰写的 Markdown 文档解析渲染成静态的 HTML 网页。</p></li><li><p>在本地撰写 Markdown 格式文章后，通过 Hexo 解析文档，渲染生成具有主题样式的 HTML 静态网页，再推送到 GitHub 上完成博文的发布。（注意，在GitHub上没有存储你的md文件）</p><img src="/2024/04/09/20240409_github&hexo/image-20240409225733759.png" class="" title="image-20240409225733759"></li></ul><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li>输入代码时，核对准确，最好切换成英文输入法；</li><li>将文中的 “用户名” 和 “邮箱” 替换为自己的 GitHub 账户名和绑定的邮箱；</li><li>统一使用 Git Bash 进行操作（其实vscode控制台也可以，但是这样子真的好方便，以后就用typora写完直接hexo clean和hexo d就可以了）；</li><li>hhh小白请严格按步骤进行，不要跳！</li></ul><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>Hexo 基于 Node.js，搭建过程中还需要使用 npm（Node.js 已带） 和 git，因此先搭建本地操作环境，安装 Node.js 和 Git</p><ul><li><a href="https://nodejs.org/zh-cn">Node.js</a></li><li><a href="https://git-scm.com/downloads">Git</a></li></ul><p>下载 Node.js 和 Git 程序并安装，一路点 “下一步” 按默认配置完成安装。</p><p>安装完成后，Win+R 输入 cmd 并打开，依次输入 node -v、npm -v 和 git —version 并回车，如下图出现程序版本号即可。</p><h1 id="连接GitHub"><a href="#连接GitHub" class="headerlink" title="连接GitHub"></a>连接GitHub</h1><ol><li><p>使用邮箱注册<a href="https://github.com/">GitHub</a>账户(在github官网)</p></li><li><p>右键 -&gt; Git Bash Here , 设置_用户名和邮箱_（在自己电脑，随便找个地方，因为是全局的）</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.name</span> <span class="hljs-string">&quot;GitHub 用户名&quot;</span><br>git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.email</span> <span class="hljs-string">&quot;GitHub 邮箱&quot;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>创建 SSH 密匙</strong>：输入 <code>ssh-keygen -t rsa -C &quot;GitHub 邮箱&quot;</code>，然后一路回车。获取生成了密钥。</p><p>（注意，如果不一直回车，自定义名称，则后面需要在。ssh后添加一个config文件，且内容为</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># github</span><br>Host github.com<br>HostName github.com<br>PreferredAuthentications publickey<br>IdentityFile ~<span class="hljs-regexp">/.ssh/</span>你的自定义名称<br></code></pre></td></tr></table></figure><p>）</p></li><li><p><strong>添加密匙：</strong></p><p>进入 [C:\Users\用户名.ssh] 目录（要勾选显示“隐藏的项目”），用记事本打开公钥 id_rsa.pub 文件并复制里面的内容。</p><p>登陆 GitHub ，进入 Settings 页面，选择左边栏的 SSH and GPG keys，点击 New SSH key。</p><p>Title 随便取个名字，粘贴复制的 id_rsa.pub 内容到 Key 中，点击 Add SSH key 完成添加。</p><img src="/2024/04/09/20240409_github&hexo/image-20240409232327677-1712911016461.png" class="" title="image-20240409232327677"></li><li><p><strong>验证连接：</strong></p><p>打开 Git Bash，输入 <code>ssh -T git@github.com</code> 出现 “Are you sure……”，输入 yes 回车确认</p></li></ol><h1 id="创建Github-Pages仓库"><a href="#创建Github-Pages仓库" class="headerlink" title="创建Github Pages仓库"></a>创建Github Pages仓库</h1><p>创建后默认自动启用 HTTPS，博客地址为：<code>https://用户名.github.io</code></p><img src="/2024/04/09/20240409_github&hexo/image-20240409232820900.png" class="" title="image-20240409232820900"><h2 id="本地安装-Hexo-博客程序"><a href="#本地安装-Hexo-博客程序" class="headerlink" title="本地安装 Hexo 博客程序"></a>本地安装 Hexo 博客程序</h2><p> <a href="https://hexo.io/zh-cn/docs/">Hexo 官方文档</a></p><p><a href="https://huangzxuan.github.io/2024/04/09/blog01/">如何选主题更换主题呀，例如我的fluid</a></p><h1 id="部署Hexo到GitHub-Pages"><a href="#部署Hexo到GitHub-Pages" class="headerlink" title="部署Hexo到GitHub Pages"></a>部署Hexo到GitHub Pages</h1><p>本地博客测试成功后，就是上传到 GitHub 进行部署，使其能够在网络上访问。</p><p>首先<strong>安装 hexo-deployer-git</strong>：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>然后<strong>修改 _config.yml</strong> 文件末尾的 Deployment 部分，修改成如下：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repository:</span> git@github.com:用户名/用户名.github.io.git<br><span class="hljs-symbol">  branch:</span> master（这里可能是main，看你github仓库的主要分支）<br></code></pre></td></tr></table></figure><p>完成后运行 <code>hexo d</code> 将网站上传部署到 GitHub Pages。</p><p>完成！这时访问我们的 GitHub 域名 <code>https://用户名.github.io</code> 就可以看到 Hexo 网站了。</p>]]></content>
    
    
    <categories>
      
      <category>搭建网站</category>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>fluid主题</title>
    <link href="/2024/04/09/20240410_hexo/"/>
    <url>/2024/04/09/20240410_hexo/</url>
    
    <content type="html"><![CDATA[<p>一款 Material Design 风格的主题</p><h1 id="搭建-Hexo-博客"><a href="#搭建-Hexo-博客" class="headerlink" title="搭建 Hexo 博客"></a>搭建 Hexo 博客</h1><p>如果你还没有 Hexo 博客，请按照 <a href="https://hexo.io/zh-cn/docs/">Hexo 官方文档</a> 进行安装、建站。</p><h1 id="获取主题最新版本"><a href="#获取主题最新版本" class="headerlink" title="获取主题最新版本"></a>获取主题最新版本</h1><p>方式一：<br>Hexo 5.0.0 版本以上，推荐通过 npm 直接安装，进入博客目录执行命令：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br></code></pre></td></tr></table></figure><br>然后在博客目录下创建 _config.fluid.yml，将主题的<a href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml">_config.yml</a>内容复制进去<br>方式二：<br>下载<a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">最新release</a>解压导themes目录，并解压出的文件夹命名为fluid</p><h1 id="指定主题"><a href="#指定主题" class="headerlink" title="指定主题"></a>指定主题</h1><p>如下修改 Hexo 博客目录中的 _config.yml：<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">theme:</span> fluid  <span class="hljs-meta"># 指定主题</span><br><br><span class="hljs-symbol">language:</span> <span class="hljs-built_in">zh</span>-CN  <span class="hljs-meta"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure></p><h1 id="创建关于页"><a href="#创建关于页" class="headerlink" title="创建关于页"></a>创建关于页</h1><p>首次使用主题的「关于页」需要手动创建：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">hexo <span class="hljs-keyword">new</span> <span class="hljs-type">page</span> about<br></code></pre></td></tr></table></figure><br>创建成功后，编辑博客目录下 /source/about/index.md，添加 layout 属性。<br>修改后的文件示例如下：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">about</span><br><span class="hljs-attr">layout:</span> <span class="hljs-string">about</span><br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-string">这里写关于页的正文，支持</span> <span class="hljs-string">Markdown,</span> <span class="hljs-string">HTML</span><br></code></pre></td></tr></table></figure></p><h1 id="更新主题"><a href="#更新主题" class="headerlink" title="更新主题"></a><a href="https://hexo.fluid-dev.com/docs/start/#%E6%9B%B4%E6%96%B0%E4%B8%BB%E9%A2%98">更新主题</a></h1><h1 id="功能特性"><a href="#功能特性" class="headerlink" title="功能特性"></a>功能特性</h1><img src="/2024/04/09/20240410_hexo/image-20240410180425918.png" class="" title="image-20240410180425918">]]></content>
    
    
    <categories>
      
      <category>搭建网站</category>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
